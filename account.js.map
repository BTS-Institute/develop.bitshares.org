{"version":3,"file":"account.ee20f99cbd861fa825c0.js","sources":["webpack:///account.ee20f99cbd861fa825c0.js"],"sourcesContent":["(window.webpackJsonp=window.webpackJsonp||[]).push([[9],{1971:function(e,t,a){\"use strict\";a.d(t,\"b\",function(){return y}),a.d(t,\"a\",function(){return _});var n=a(0),s=a.n(n),o=a(1),r=a.n(o),i=a(3),l=a.n(i),c=a(32),u=a(26),p=a(28),d=a(5),h=a.n(d),m=a(2265),f=function(){function e(e,t){for(var a=0;a<t.length;a++){var n=t[a];n.enumerable=n.enumerable||!1,n.configurable=!0,\"value\"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,a,n){return a&&e(t.prototype,a),n&&e(t,n),t}}();function g(e,t){if(!(e instanceof t))throw new TypeError(\"Cannot call a class as a function\")}function b(e,t){if(!e)throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\");return!t||\"object\"!=typeof t&&\"function\"!=typeof t?e:t}function v(e,t){if(\"function\"!=typeof t&&null!==t)throw new TypeError(\"Super expression must either be null or a function, not \"+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var _=function(e){function t(){return g(this,t),b(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return v(t,s.a.Component),f(t,[{key:\"render\",value:function(){var e=this.props,t=e.isActive,a=e.index,n=e.changeTab,o=e.title,r=e.className,i=e.updatedTab,c=e.disabled,u=e.subText,p=l()({\"is-active\":t},r);return\"string\"==typeof o&&o.indexOf(\".\")>0&&(o=h.a.translate(o)),this.props.collapsed?(\"string\"==typeof u&&(u=u.trim()),\"span\"===o.type&&(o=o.props.children[2]),s.a.createElement(\"option\",{value:a,\"data-is-link-to\":this.props.isLinkTo},o,i?\"*\":\"\",u&&\" (\",u&&u,u&&\")\")):s.a.createElement(\"li\",{className:p,onClick:c?null:n.bind(this,a,this.props.isLinkTo)},s.a.createElement(\"a\",null,s.a.createElement(\"span\",{className:\"tab-title\"},o,i?\"*\":\"\"),u&&s.a.createElement(\"div\",{className:\"tab-subtext\"},u)))}}]),t}();_.propTypes={changeTab:r.a.func,isActive:r.a.bool.isRequired,index:r.a.number.isRequired,className:r.a.string,isLinkTo:r.a.string,subText:r.a.oneOfType([r.a.object,r.a.string])},_.defaultProps={isActive:!1,index:0,className:\"\",isLinkTo:\"\",subText:null};var y=function(e){function t(e){g(this,t);var a=b(this,(t.__proto__||Object.getPrototypeOf(t)).call(this));return a.state={activeTab:e.setting?e.viewSettings.get(e.setting,e.defaultActiveTab):e.defaultActiveTab,width:window.innerWidth},a._setDimensions=a._setDimensions.bind(a),a}return v(t,s.a.Component),f(t,[{key:\"componentDidMount\",value:function(){this._setDimensions(),window.addEventListener(\"resize\",this._setDimensions,{capture:!1,passive:!0})}},{key:\"componentWillReceiveProps\",value:function(e){var t=e.viewSettings.get(e.setting);t!==this.props.viewSettings.get(this.props.setting)&&this.setState({activeTab:t})}},{key:\"componentWillUnmount\",value:function(){window.removeEventListener(\"resize\",this._setDimensions)}},{key:\"_setDimensions\",value:function(){var e=window.innerWidth;e!==this.state.width&&this.setState({width:e})}},{key:\"_changeTab\",value:function(e,t){e!==this.state.activeTab&&(\"\"!==t&&this.props.history.push(t),this.props.setting&&u.a.changeViewSetting(function(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}({},this.props.setting,e)),this.setState({activeTab:e}),this.props.onChangeTab&&this.props.onChangeTab(e))}},{key:\"render\",value:function(){var e=this,t=this.props,a=t.children,n=t.contentClass,o=t.tabsClass,r=t.style,i=t.segmented,c=this.state.width<900&&s.a.Children.count(a)>2,u=null,p=s.a.Children.map(a,function(t,a){if(!t)return null;if(c&&t.props.disabled)return null;var n=a===e.state.activeTab;return n&&(u=t.props.children),s.a.cloneElement(t,{collapsed:c,isActive:n,changeTab:e._changeTab.bind(e),index:a})}).filter(function(e){return null!==e});return u||(u=p[0].props.children),s.a.createElement(\"div\",{className:l()(this.props.actionButtons?\"with-buttons\":\"\",this.props.className)},s.a.createElement(\"div\",{className:\"service-selector\"},s.a.createElement(\"ul\",{style:r,className:l()(\"button-group no-margin\",o,{segmented:i})},c?s.a.createElement(\"li\",{style:{paddingLeft:10,paddingRight:10,minWidth:\"15rem\"}},s.a.createElement(\"select\",{value:this.state.activeTab,style:{marginTop:10,marginBottom:10},className:\"bts-select\",onChange:function(t){var a=parseInt(t.target.value,10);e._changeTab(a,t.target[a].attributes[\"data-is-link-to\"].value)}},p)):p,this.props.actionButtons?s.a.createElement(\"li\",{className:\"tabs-action-buttons\"},this.props.actionButtons):null)),s.a.createElement(\"div\",{className:l()(\"tab-content\",n)},u))}}]),t}();y.propTypes={setting:r.a.string,defaultActiveTab:r.a.number,segmented:r.a.bool},y.defaultProps={active:0,defaultActiveTab:0,segmented:!0,contentClass:\"\",style:{}},y=Object(c.a)(y,{listenTo:function(){return[p.a]},getProps:function(){return{viewSettings:p.a.getState().viewSettings}}}),y=Object(m.a)(y)},1978:function(e,t,a){\"use strict\";var n=a(0),s=a.n(n),o=a(2),r=a.n(o),i=a(4),l=a(40),c=a(42),u=a(5),p=a.n(u),d=a(1973),h=a(30),m=a(11),f=a.n(m),g=a(3),b=a.n(g),v=a(140),_=a(1),y=a.n(_),E=function(){function e(e,t){for(var a=0;a<t.length;a++){var n=t[a];n.enumerable=n.enumerable||!1,n.configurable=!0,\"value\"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,a,n){return a&&e(t.prototype,a),n&&e(t,n),t}}();function w(e,t){if(!(e instanceof t))throw new TypeError(\"Cannot call a class as a function\")}function k(e,t){if(!e)throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\");return!t||\"object\"!=typeof t&&\"function\"!=typeof t?e:t}function A(e,t){if(\"function\"!=typeof t&&null!==t)throw new TypeError(\"Super expression must either be null or a function, not \"+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var C=function(e){function t(){return w(this,t),k(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return A(t,s.a.Component),E(t,[{key:\"render\",value:function(){return 0!==this.props.assets.length&&this.props.value?s.a.createElement(d.a,{entries:this.props.assets.map(function(e){return e&&e.get(\"symbol\")}).filter(function(e){return!!e}),values:this.props.assets.reduce(function(e,t){return t&&t.get(\"symbol\")&&(e[t.get(\"symbol\")]=t),e},{}),singleEntry:this.props.assets[0]?s.a.createElement(h.a,{asset:this.props.assets[0].get(\"id\"),amount:0,hide_amount:!0}):null,value:\"\",onChange:this.props.onChange}):null}}]),t}();C.propTypes={value:y.a.string,onChange:y.a.func},C=Object(v.a)(C,{asList:!0});var x=function(e){function t(){return w(this,t),k(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return A(t,s.a.Component),E(t,[{key:\"getAsset\",value:function(){return this.props.asset}},{key:\"getError\",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.props.assetInput,t=this.props.error;return t||!e||this.getNameType(e)||(t=p.a.translate(\"explorer.asset.invalid\",{name:e})),t}},{key:\"getNameType\",value:function(e){return e?i.ChainValidation.is_valid_symbol_error(e,!0)?null:\"symbol\":null}},{key:\"onInputChanged\",value:function(e){var t=e.target.value.trim().substr(0,16).toUpperCase();this.props.onChange&&t!==this.props.assetInput&&this.props.onChange(t)}},{key:\"onKeyDown\",value:function(e){13===e.keyCode&&(this.onFound(e),this.onAction(e))}},{key:\"componentDidMount\",value:function(){this.props.onFound&&this.props.asset&&this.props.onFound(this.props.asset)}},{key:\"componentWillReceiveProps\",value:function(e){this.props.onFound&&e.asset!==this.props.asset&&this.props.onFound(e.asset)}},{key:\"onFound\",value:function(e){e.preventDefault(),!this.props.onFound||this.getError()||this.props.disableActionButton||this.props.asset&&this.props.onFound(this.props.asset)}},{key:\"onAssetSelect\",value:function(e){e&&(this.props.onFound(e),this.props.onChange(e.get(\"symbol\")))}},{key:\"onAction\",value:function(e){e.preventDefault(),!this.props.onAction||this.getError()||this.props.disableActionButton||this.props.asset&&this.props.onAction(this.props.asset)}},{key:\"render\",value:function(){var e=this.props,t=e.disabled,a=e.noLabel,n=this.getError(),o=void 0;t||(this.props.asset?o=this.props.asset.get(\"symbol\"):!n&&this.props.assetInput&&(n=p.a.translate(\"explorer.asset.not_found\",{name:this.props.assetInput})));var i=b()(\"button\",{disabled:!this.props.asset||n||this.props.disableActionButton});return s.a.createElement(\"div\",{className:\"asset-selector\",style:this.props.style},s.a.createElement(\"div\",null,s.a.createElement(\"div\",{className:\"header-area\"},n||a?null:s.a.createElement(\"label\",{className:\"right-label\"},\"Â  \",s.a.createElement(\"span\",null,o)),s.a.createElement(r.a,{component:\"label\",content:this.props.label})),s.a.createElement(\"div\",{className:\"input-area\"},s.a.createElement(\"div\",{className:\"inline-label input-wrapper\"},s.a.createElement(\"input\",{style:this.props.inputStyle,disabled:this.props.disabled,type:\"text\",value:this.props.assetInput||\"\",placeholder:this.props.placeholder||p.a.translate(\"explorer.assets.symbol\"),ref:\"user_input\",onChange:this.onInputChanged.bind(this),onKeyDown:this.onKeyDown.bind(this),tabIndex:this.props.tabIndex}),s.a.createElement(\"div\",{className:\"form-label select floating-dropdown\"},this.props.asset?s.a.createElement(C,{ref:this.props.refCallback,value:this.props.asset.get(\"symbol\"),assets:f.a.List(this.props.assets),onChange:this.onAssetSelect.bind(this)}):null),this.props.children,this.props.onAction?s.a.createElement(\"button\",{className:i,onClick:this.onAction.bind(this)},s.a.createElement(r.a,{content:this.props.action_label})):null)),s.a.createElement(\"div\",{className:\"error-area\",style:{paddingBottom:\"10px\"}},s.a.createElement(\"span\",{style:{wordBreak:\"break-all\"}},n))))}}]),t}();x.propTypes={label:y.a.string,error:y.a.string,placeholder:y.a.string,onChange:y.a.func,onFound:y.a.func,assetInput:y.a.string,asset:l.a.ChainAsset,tabIndex:y.a.number,disableActionButton:y.a.bool},x.defaultProps={disabled:!1},t.a=Object(c.a)(x)},1980:function(e,t,a){\"use strict\";a.d(t,\"b\",function(){return S}),a.d(t,\"a\",function(){return P});var n=a(0),s=a.n(n),o=a(30),r=a(40),i=a(42),l=a(140),c=a(14),u=a(32),p=a(186),d=a(2),h=a.n(d),m=a(5),f=a.n(m),g=a(53),b=a.n(g),v=a(580),_=a(54),y=a(7),E=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var n in a)Object.prototype.hasOwnProperty.call(a,n)&&(e[n]=a[n])}return e},w=function(){function e(e,t){for(var a=0;a<t.length;a++){var n=t[a];n.enumerable=n.enumerable||!1,n.configurable=!0,\"value\"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,a,n){return a&&e(t.prototype,a),n&&e(t,n),t}}();function k(e,t){var a={};for(var n in e)t.indexOf(n)>=0||Object.prototype.hasOwnProperty.call(e,n)&&(a[n]=e[n]);return a}function A(e,t){if(!(e instanceof t))throw new TypeError(\"Cannot call a class as a function\")}function C(e,t){if(!e)throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\");return!t||\"object\"!=typeof t&&\"function\"!=typeof t?e:t}function x(e,t){if(\"function\"!=typeof t&&null!==t)throw new TypeError(\"Super expression must either be null or a function, not \"+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var O=function(e){function t(e){return A(this,t),C(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e))}return x(t,v[\"a\"]),w(t,[{key:\"componentDidMount\",value:function(){b.a.rebuild()}},{key:\"shouldComponentUpdate\",value:function(e){return function e(t,a,n){null===t&&(t=Function.prototype);var s=Object.getOwnPropertyDescriptor(t,a);if(void 0===s){var o=Object.getPrototypeOf(t);return null===o?void 0:e(o,a,n)}if(\"value\"in s)return s.value;var r=s.get;return void 0!==r?r.call(n):void 0}(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),\"shouldComponentUpdate\",this).call(this,e)||!c.a.are_equal_shallow(e.pulsate,this.props.pulsate)||e.toAsset!==this.props.toAsset||e.fromAsset!==this.props.fromAsset||e.amount!==this.props.amount}},{key:\"getValue\",value:function(){var e=this.props,t=e.amount,a=e.toAsset,n=e.fromAsset,s=e.fullPrecision,o=e.allMarketStats,r=e.coreAsset;return _.a.convertValue(t,a,n,o,r,s)}},{key:\"render\",value:function(){var e=this.props,t=e.amount,a=e.toAsset,n=e.fromAsset,r=e.fullPrecision,i=k(e,[\"amount\",\"toAsset\",\"fromAsset\",\"fullPrecision\"]),l=a.get(\"id\"),u=a.get(\"symbol\");r||(t=c.a.get_asset_amount(t,n));var p=this.getValue();return p||0===p?s.a.createElement(o.a,E({noPrefix:!0,amount:p,asset:l,decimalOffset:-1!==u.indexOf(\"BTC\")?4:this.props.fullDecimals?0:this.props.noDecimals?a.get(\"precision\"):a.get(\"precision\")-2},i)):s.a.createElement(y.Tooltip,{placement:\"bottom\",title:f.a.translate(\"tooltip.no_price\")},s.a.createElement(\"div\",{className:\"tooltip inline-block\",style:{fontSize:\"0.9rem\"}},s.a.createElement(h.a,{content:\"account.no_price\"})))}}]),t}();O.defaultProps={fullPrecision:!0,noDecimals:!1,fullDecimals:!1,hide_asset:!1},O=Object(l.a)(O,{propNames:[\"toAsset\",\"fromAsset\",\"coreAsset\"],defaultProps:{toAsset:\"1.3.0\",coreAsset:\"1.3.0\"}});var S=function(e){function t(){return A(this,t),C(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return x(t,s.a.Component),w(t,[{key:\"render\",value:function(){var e=this.props,t=e.refCallback,a=k(e,[\"refCallback\"]);return s.a.createElement(O,E({},a,{ref:t}))}}]),t}();S=Object(u.a)(S,{listenTo:function(){return[p.a]},getProps:function(){return{allMarketStats:p.a.getState().allMarketStats}}});var P=function(e){function t(){return A(this,t),C(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return x(t,s.a.Component),w(t,[{key:\"render\",value:function(){var e=this.props,t=e.balance,a=k(e,[\"balance\"]),n=!!t.getIn([\"balance\",\"amount\"]),o=Number(n?t.getIn([\"balance\",\"amount\"]):t.get(\"balance\")),r=n?t.getIn([\"balance\",\"asset_id\"]):t.get(\"asset_type\");return isNaN(o)?s.a.createElement(\"span\",null,\"--\"):s.a.createElement(S,E({amount:o,fromAsset:r,noDecimals:!0},a))}}]),t}();P.propTypes={balance:r.a.ChainObject.isRequired},P=Object(i.a)(P,{keep_updating:!0})},1990:function(e,t,a){\"use strict\";a.d(t,\"a\",function(){return _}),a.d(t,\"b\",function(){return b});var n=a(0),s=a.n(n),o=a(140),r=a(3),i=a.n(r),l=a(186),c=a(32),u=a(14),p=a(127),d=a(54),h=function(){function e(e,t){for(var a=0;a<t.length;a++){var n=t[a];n.enumerable=n.enumerable||!1,n.configurable=!0,\"value\"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,a,n){return a&&e(t.prototype,a),n&&e(t,n),t}}();function m(e,t){if(!(e instanceof t))throw new TypeError(\"Cannot call a class as a function\")}function f(e,t){if(!e)throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\");return!t||\"object\"!=typeof t&&\"function\"!=typeof t?e:t}function g(e,t){if(\"function\"!=typeof t&&null!==t)throw new TypeError(\"Super expression must either be null or a function, not \"+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var b=function(e){function t(e){m(this,t);var a=f(this,(t.__proto__||Object.getPrototypeOf(t)).call(this));a.statsInterval=null;var n=d.a.getMarketName(e.base,e.quote).marketName;return a.state={marketName:n},a}return g(t,s.a.Component),h(t,[{key:\"_checkStats\",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{close:{}},t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{close:{}};return e.volumeBase!==t.volumeBase||!u.a.are_equal_shallow(e.close&&e.close.base,t.close&&t.close.base)||!u.a.are_equal_shallow(e.close&&e.close.quote,t.close&&t.close.quote)}},{key:\"shouldComponentUpdate\",value:function(e){return this._checkStats(e.allMarketStats.get(this.state.marketName),this.props.allMarketStats.get(this.state.marketName))||e.base.get(\"id\")!==this.props.base.get(\"id\")||e.quote.get(\"id\")!==this.props.quote.get(\"id\")}},{key:\"componentWillUnmount\",value:function(){this.statsInterval&&this.statsInterval()}}]),t}(),v=function(e){function t(e){return m(this,t),f(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e))}return g(t,b),h(t,[{key:\"shouldComponentUpdate\",value:function(e){return function e(t,a,n){null===t&&(t=Function.prototype);var s=Object.getOwnPropertyDescriptor(t,a);if(void 0===s){var o=Object.getPrototypeOf(t);return null===o?void 0:e(o,a,n)}if(\"value\"in s)return s.value;var r=s.get;return void 0!==r?r.call(n):void 0}(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),\"shouldComponentUpdate\",this).call(this,e)}},{key:\"render\",value:function(){var e=this.props.allMarketStats,t=this.state.marketName,a=e.get(t),n=a&&a.price?a.price:null;return s.a.createElement(\"span\",{className:i()(\"\",this.props.className)},n?s.a.createElement(p.a,{base_amount:n.base.amount,base_asset:n.base.asset_id,quote_amount:n.quote.amount,quote_asset:n.quote.asset_id,force_direction:this.props.force_direction,hide_symbols:this.props.hide_symbols}):\"n/a\")}}]),t}();v=Object(o.a)(v,{propNames:[\"quote\",\"base\"]});var _=function(e){function t(){return m(this,t),f(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return g(t,s.a.Component),h(t,[{key:\"render\",value:function(){return s.a.createElement(v,this.props)}}]),t}();_=Object(c.a)(_,{listenTo:function(){return[l.a]},getProps:function(){return{allMarketStats:l.a.getState().allMarketStats}}})},2002:function(e,t,a){\"use strict\";var n=a(64).a.isFinite;t.a=function(e){return\"number\"==typeof e&&n(e)}},2003:function(e,t,a){\"use strict\";var n=a(0),s=a.n(n),o=a(2),r=a.n(o),i=a(14),l=a(42),c=a(40),u=a(53),p=a.n(u),d=a(5),h=a.n(d),m=a(82),f=a(584),g=a(133),b=a(41),v=a(45),_=a(32),y=a(28),E=a(26),w=a(579),k=a.n(w),A=a(7),C=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var n in a)Object.prototype.hasOwnProperty.call(a,n)&&(e[n]=a[n])}return e},x=function(){function e(e,t){for(var a=0;a<t.length;a++){var n=t[a];n.enumerable=n.enumerable||!1,n.configurable=!0,\"value\"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,a,n){return a&&e(t.prototype,a),n&&e(t,n),t}}();function O(e,t){if(!(e instanceof t))throw new TypeError(\"Cannot call a class as a function\")}function S(e,t){if(!e)throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\");return!t||\"object\"!=typeof t&&\"function\"!=typeof t?e:t}function P(e,t){if(\"function\"!=typeof t&&null!==t)throw new TypeError(\"Super expression must either be null or a function, not \"+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var N=function(e){function t(e){O(this,t);var a=S(this,(t.__proto__||Object.getPrototypeOf(t)).call(this));return a.state={inputCoinType:e.inputCoinType||a.props.preferredBridge,outputCoinType:e.outputCoinType,receiveAmount:0,depositLimit:0,sendAmount:0,toAddress:m.a.getLast(e.walletType),withdrawValue:\"\",amountError:null,inputAmount:0,receiveLoading:!1,limitLoading:!0,apiError:!1},a._validateAddress(a.state.toAddress,e),a.deposit_address_cache=new f.a,a}return P(t,s.a.Component),x(t,[{key:\"onClose\",value:function(){this.props.hideModal()}},{key:\"componentWillMount\",value:function(){this._getDepositAddress(this.props)}},{key:\"componentDidMount\",value:function(){this._getDepositLimit(this.props),this._estimateOutput(this.props)}},{key:\"componentWillReceiveProps\",value:function(e){e.inputCoinType===this.props.inputCoinType&&e.outputCoinType===this.props.outputCoinType||(this.setState({inputCoinType:e.inputCoinType,outputCoinType:e.outputCoinType}),this._getDepositLimit(e),this._estimateOutput(e),this._getDepositAddress(e))}},{key:\"componentDidUpdate\",value:function(){p.a.rebuild()}},{key:\"shouldComponentUpdate\",value:function(e,t){return this.state.inputCoinType===t.inputCoinType&&this.state.outputCoinType===t.outputCoinType||(this._getDepositLimit(t),this._estimateOutput(t),this._getDepositAddress(t)),e.inputCoinType!==this.props.inputCoinType||e.outputCoinType!==this.props.outputCoinType||e.sender!==this.props.sender||e.asset!==this.props.asset||e.isAvailable!==this.props.isAvailable||e.isDown!==this.props.isDown||!i.a.are_equal_shallow(t,this.state)}},{key:\"_getDepositAddress\",value:function(e){this.setState({receive_address:null}),Object(m.l)(this._getDepositObject(e))}},{key:\"_getDepositObject\",value:function(e){var t=this,a=e.inputCoinType,n=e.outputCoinType;return{inputCoinType:a.toLowerCase(),outputCoinType:n.toLowerCase(),outputAddress:this.props.sender.get(\"name\"),url:v.b.BASE,stateCallback:function(e){t.addDepositAddress(a.toLowerCase(),n.toLowerCase(),t.props.sender.get(\"name\"),e)}}}},{key:\"_getDepositLimit\",value:function(e){var t=this,a=e.inputCoinType,n=e.outputCoinType;this.setState({limitLoading:!0}),Object(m.k)(a.toLowerCase(),n.toLowerCase()).then(function(e){t.setState({depositLimit:e.depositLimit,limitLoading:!1})}).catch(function(e){console.log(\"deposit limit error:\",e),t.setState({depositLimit:null,limitLoading:!1})})}},{key:\"_onAmountChange\",value:function(e,t){var a=t.target.value;switch(new RegExp(/[[:digit:]]/).test(a)||(a=a.replace(/[^0-9.]/g,\"\")),\".\"==a.charAt(0)&&(a=\"0.\"),a.charAt(a.length)!=a.search(\".\")&&a.substr(1),a=i.a.limitByPrecision(a,8),e){case\"input\":this.setState({inputAmount:a},this._estimateOutput.bind(this));break;case\"output\":this.setState({outputAmount:a},this._estimateInput.bind(this))}}},{key:\"_estimateOutput\",value:function(){var e=this,t=this.state,a=t.inputAmount,n=t.inputCoinType,s=t.outputCoinType;this.setState({receiveAmount:0,sendAmount:a}),a&&(this.setState({receiveLoading:!0}),Object(m.c)(a,n.toLowerCase(),s.toLowerCase()).then(function(t){e.setState({inputAmount:t.inputAmount,receiveAmount:t.outputAmount,receiveLoading:!1})}).catch(function(t){console.log(\"receive amount err:\",t),e.setState({receiveLoading:!1,apiError:!0})}))}},{key:\"_estimateInput\",value:function(){var e=this,t=this.state,a=t.outputAmount,n=t.inputCoinType,s=t.outputCoinType;this.setState({receiveAmount:a,sendAmount:0}),a&&(this.setState({receiveLoading:!0}),Object(m.b)(a,n.toLowerCase(),s.toLowerCase()).then(function(t){console.log(t),e.setState({inputAmount:t.inputAmount,sendAmount:i.a.limitByPrecision(t.inputAmount,8),receiveLoading:!1})}).catch(function(t){console.log(\"send amount err:\",t),e.setState({receiveLoading:!1,apiError:!0})}))}},{key:\"addDepositAddress\",value:function(e,t,a,n){this.deposit_address_cache.cacheInputAddress(\"blocktrades\",a,e,t,n.address,n.memo),this.setState({receive_address:n})}},{key:\"_validateAddress\",value:function(e){var t=this,a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.props;Object(m.m)({walletType:a.walletType,newAddress:e}).then(function(a){t.state.toAddress===e&&t.setState({withdraw_address_check_in_progress:!1,validAddress:a})}).catch(function(e){console.error(\"Error when validating address:\",e)})}},{key:\"_setDepositAsset\",value:function(e){this.setState({inputCoinType:e}),E.a.changeViewSetting({preferredBridge:e})}},{key:\"_renderDeposit\",value:function(){var e=i.a.replaceName(this.props.asset),t=e.name,a=e.prefix,n=this.state,o=n.receive_address,l=n.apiError,c=o&&\"memo\"in o&&o.memo,u=o&&o.address||\"\",p=s.a.createElement(\"div\",{className:\"QR\",style:{textAlign:\"center\"}},s.a.createElement(k.a,{size:140,value:u})),d=Object.keys(this.props.bridges.toJS()),m=this.state.inputCoinType.toUpperCase(),f=(a||\"\")+t,v=(this.state.receiveAmount/this.state.inputAmount).toFixed(4),_=f+\"/\"+m,y=this.state.inputAmount>parseFloat(this.state.depositLimit)||this.state.sendAmount>parseFloat(this.state.depositLimit);return s.a.createElement(\"div\",{className:\"modal__body\",style:{paddingTop:0}},s.a.createElement(A.Form,{className:\"full-width\",layout:\"vertical\"},s.a.createElement(A.Form.Item,{label:h.a.translate(\"modal.buy.asset\")},s.a.createElement(A.Input,{disabled:!0,value:f})),s.a.createElement(A.Form.Item,{label:h.a.translate(\"modal.buy.bridge\")},s.a.createElement(A.Tooltip,{title:h.a.translate(\"tooltip.bridge_TRADE\")},s.a.createElement(A.Input,{disabled:!0,type:\"text\",defaultValue:\"BLOCKTRADES\"})))),l?s.a.createElement(r.a,{content:\"modal.deposit.address_generation_error\"}):s.a.createElement(\"span\",null,s.a.createElement(\"div\",{className:\"grid-block no-overflow wrap shrink\"},s.a.createElement(\"div\",{className:\"small-12 medium-6\",style:{paddingRight:5}},s.a.createElement(A.Form,{className:\"full-width\",layout:\"vertical\"},s.a.createElement(A.Form.Item,{label:h.a.translate(\"transfer.send\"),validateStatus:y?\"error\":\"\",help:y?h.a.translate(\"gateway.over_limit\"):\"\"},s.a.createElement(A.Input,{value:this.state.sendAmount,onChange:this._onAmountChange.bind(this,\"input\"),addonAfter:s.a.createElement(A.Select,{defaultValue:this.state.inputCoinType.toUpperCase(),value:this.state.inputCoinType.toUpperCase(),style:{width:100},onChange:this._setDepositAsset.bind(this)},d.map(function(e){return s.a.createElement(A.Select.Option,{key:e.toUpperCase()},e.toUpperCase())}))})))),s.a.createElement(\"div\",{className:\"small-12 medium-6\",style:{paddingRight:5}},s.a.createElement(A.Form,{className:\"full-width\",layout:\"vertical\"},s.a.createElement(A.Form.Item,{label:h.a.translate(\"gateway.deposit_limit\")},s.a.createElement(A.Input,{value:this.state.depositLimit,disabled:!0,addonAfter:s.a.createElement(A.Select,{defaultValue:this.state.inputCoinType.toUpperCase(),value:this.state.inputCoinType.toUpperCase(),style:{width:100},disabled:!0,showArrow:!1},d.map(function(e){return s.a.createElement(A.Select.Option,{key:e.toUpperCase()},e.toUpperCase())}))}))))),s.a.createElement(\"div\",{className:\"grid-block no-overflow wrap shrink\"},s.a.createElement(\"div\",{className:\"small-12 medium-6\",style:{paddingRight:5}},s.a.createElement(A.Form,{className:\"full-width\",layout:\"vertical\"},s.a.createElement(A.Form.Item,{label:h.a.translate(\"exchange.receive\")},s.a.createElement(A.Input,{value:this.state.receiveAmount,onChange:this._onAmountChange.bind(this,\"output\"),addonAfter:s.a.createElement(A.Select,{defaultValue:f,value:f,style:{width:100},disabled:!0,showArrow:!1},s.a.createElement(A.Select.Option,{key:f},f))})))),s.a.createElement(\"div\",{className:\"small-12 medium-6\",style:{paddingRight:5}},s.a.createElement(A.Form,{className:\"full-width\",layout:\"vertical\"},s.a.createElement(A.Form.Item,{label:h.a.translate(\"exchange.price\")},s.a.createElement(A.Input,{value:y||isNaN(v)?0:v,disabled:!0,addonAfter:s.a.createElement(A.Select,{defaultValue:_,value:_,style:{width:125},disabled:!0,showArrow:!1},s.a.createElement(A.Select.Option,{key:_},_))}))))),u?s.a.createElement(\"div\",{className:\"container-row\"},c?null:p,s.a.createElement(\"div\",{className:\"grid-block\"},s.a.createElement(\"div\",{className:\"copyIcon\"},s.a.createElement(g.a,{text:u,className:\"copyIcon\"})),s.a.createElement(\"div\",null,s.a.createElement(r.a,{component:\"div\",style:{fontSize:\"0.8rem\",fontWeight:\"bold\",paddingBottom:\"0.3rem\"},content:\"gateway.purchase_notice\",inputAsset:m,outputAsset:f}),s.a.createElement(\"div\",{className:\"modal__highlight\"},u))),c?s.a.createElement(\"div\",{className:\"grid-block\",style:{marginTop:\"10px\"}},s.a.createElement(\"div\",{className:\"copyIcon\"},s.a.createElement(g.a,{text:o.memo,className:\"copyIcon\"})),s.a.createElement(\"div\",null,s.a.createElement(r.a,{unsafe:!0,content:\"gateway.purchase_notice_memo\",component:\"div\",style:{fontSize:\"0.8rem\",fontWeight:\"bold\",paddingBottom:\"0.3rem\"}}),s.a.createElement(\"div\",{className:\"modal__highlight\"},o.memo))):null):s.a.createElement(\"div\",{style:{textAlign:\"center\"}},s.a.createElement(b.a,{type:\"three-bounce\"}))))}},{key:\"render\",value:function(){return this.props.asset?s.a.createElement(\"div\",{className:\"grid-block vertical no-overflow\"},this.props.isDown?s.a.createElement(\"div\",{style:{textAlign:\"center\"}},s.a.createElement(r.a,{className:\"txtlabel cancel\",content:\"gateway.unavailable_TRADE\",component:\"p\"})):this.props.isAvailable?this._renderDeposit():s.a.createElement(\"div\",{style:{textAlign:\"center\"}},s.a.createElement(r.a,{className:\"txtlabel cancel\",content:\"gateway.unavailable\",component:\"p\"}))):null}}]),t}();N.propTypes={sender:c.a.ChainAccount.isRequired,asset:c.a.ChainAsset.isRequired},N=Object(l.a)(N);var j=function(e){function t(){return O(this,t),S(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return P(t,s.a.Component),x(t,[{key:\"render\",value:function(){var e=this.props,t=e.preferredBridge,a=function(e,t){var a={};for(var n in e)t.indexOf(n)>=0||Object.prototype.hasOwnProperty.call(e,n)&&(a[n]=e[n]);return a}(e,[\"preferredBridge\"]),n=this.props.bridges.get(this.props.preferredBridge);return n||(t=(n=this.props.bridges.first()).inputCoinType),s.a.createElement(N,C({hideModal:this.props.hideModal},a,{preferredBridge:t},n.toJS()))}}]),t}();j=Object(_.a)(j,{listenTo:function(){return[y.a]},getProps:function(){return{preferredBridge:y.a.getState().viewSettings.get(\"preferredBridge\",\"btc\")}}});var M=function(e){function t(){return O(this,t),S(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return P(t,s.a.Component),x(t,[{key:\"render\",value:function(){return this.props.bridges?s.a.createElement(A.Modal,{title:h.a.translate(\"modal.buy.title\"),visible:this.props.visible,onCancel:this.props.hideModal,footer:[s.a.createElement(A.Button,{key:\"cancel\",onClick:this.props.hideModal},h.a.translate(\"modal.close\"))]},s.a.createElement(j,C({},this.props,{open:this.props.visible}))):null}}]),t}();t.a=M},2017:function(e,t,a){\"use strict\";var n=a(0),s=a.n(n),o=a(11),r=a.n(o),i=a(1),l=a.n(i),c=a(2),u=a.n(c),p=a(88),d=a(2244),h=(a(40),a(140)),m=function(){function e(e,t){for(var a=0;a<t.length;a++){var n=t[a];n.enumerable=n.enumerable||!1,n.configurable=!0,\"value\"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,a,n){return a&&e(t.prototype,a),n&&e(t,n),t}}();var f=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError(\"Cannot call a class as a function\")}(this,t),function(e,t){if(!e)throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\");return!t||\"object\"!=typeof t&&\"function\"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return function(e,t){if(\"function\"!=typeof t&&null!==t)throw new TypeError(\"Super expression must either be null or a function, not \"+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,s.a.Component),m(t,[{key:\"render\",value:function(){var e=this.props,t=e.base,a=e.quote;if(t.get(\"id\")===a.get(\"id\"))return null;var n=a.get(\"symbol\")+\"_\"+t.get(\"symbol\"),o=s.a.createElement(\"span\",null,s.a.createElement(p.a,{name:a.get(\"symbol\")}),\" /\",\" \",s.a.createElement(p.a,{name:t.get(\"symbol\")}));return s.a.createElement(d.a,{to:\"/market/\"+n},o)}}]),t}(),g=f=Object(h.a)(f,{propNames:[\"quote\",\"base\"],defaultProps:{base:\"1.3.0\"}}),b=a(366),v=a(100),_=a(20),y=a(5),E=a.n(y),w=a(4),k=a(338),A=a(15),C=a(37),x=a(115),O=function(){function e(e,t){for(var a=0;a<t.length;a++){var n=t[a];n.enumerable=n.enumerable||!1,n.configurable=!0,\"value\"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,a,n){return a&&e(t.prototype,a),n&&e(t,n),t}}(),S=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var n in a)Object.prototype.hasOwnProperty.call(a,n)&&(e[n]=a[n])}return e};function P(e,t){if(!e)throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\");return!t||\"object\"!=typeof t&&\"function\"!=typeof t?e:t}var N=function(e){return function(e){var t=Object(h.a)(e,{propNames:[\"shortBackingAsset\"]});return Object(h.a)(function(e){return s.a.createElement(t,S({},e,{shortBackingAsset:e.asset.getIn([\"bitasset\",\"options\",\"short_backing_asset\"])}))})}(function(t){function a(){var e,t,n;!function(e,t){if(!(e instanceof t))throw new TypeError(\"Cannot call a class as a function\")}(this,a);for(var s=arguments.length,o=Array(s),r=0;r<s;r++)o[r]=arguments[r];return t=n=P(this,(e=a.__proto__||Object.getPrototypeOf(a)).call.apply(e,[this].concat(o))),n.state={worthLessSettlement:void 0},P(n,t)}return function(e,t){if(\"function\"!=typeof t&&null!==t)throw new TypeError(\"Super expression must either be null or a function, not \"+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(a,n.PureComponent),O(a,[{key:\"updateFlag\",value:function(){var e=this,t=this.props,a=t.asset,n=t.shortBackingAsset,s=a.get(\"id\"),o=n.get(\"id\"),r=A.Apis.instance().db_api().exec(\"get_order_book\",[o,s,1]).then(function(e){return 0===e.bids.length?0:Number(e.bids[0].price)}),i=null,l=1;a.get(\"bitasset\")&&a.get(\"bitasset\").get(\"settlement_fund\")>0?i=a.get(\"bitasset\").get(\"settlement_price\"):(i=x.a.extractRawFeedPrice(a),l=1-a.get(\"bitasset\").get(\"options\").get(\"force_settlement_offset_percent\")/1e4);var c=new C.i({base:new C.a({asset_id:o,amount:i.getIn([\"quote\",\"amount\"]),preicision:n.get(\"precision\")}),quote:new C.a({asset_id:s,amount:i.getIn([\"base\",\"amount\"]),precision:a.get(\"precision\")})}).toReal()*l;r.then(function(t){return e.setState({worthLessSettlement:t>c,marketPrice:t,settlementPrice:c})})}},{key:\"componentWillMount\",value:function(){this.updateFlag()}},{key:\"componentDidUpdate\",value:function(){this.updateFlag()}},{key:\"render\",value:function(){var t=this.props,a=this.state,n=a.worthLessSettlement,o=a.marketPrice,r=a.settlementPrice;return s.a.createElement(e,S({},t,{worthLessSettlement:n,marketPrice:o,settlementPrice:r}))}}]),a}())},j=a(19),M=a(7),I=a(14),T=function(){function e(e,t){for(var a=0;a<t.length;a++){var n=t[a];n.enumerable=n.enumerable||!1,n.configurable=!0,\"value\"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,a,n){return a&&e(t.prototype,a),n&&e(t,n),t}}();function R(e,t){if(!(e instanceof t))throw new TypeError(\"Cannot call a class as a function\")}function B(e,t){if(!e)throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\");return!t||\"object\"!=typeof t&&\"function\"!=typeof t?e:t}function D(e,t){if(\"function\"!=typeof t&&null!==t)throw new TypeError(\"Super expression must either be null or a function, not \"+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var L=N(function(e){var t=e.worthLessSettlement,a=e.asset,n=e.shortBackingAsset,o=e.marketPrice,r=e.settlementPrice;switch(o=I.a.format_number(o,a.get(\"precision\")),r=I.a.format_number(r,a.get(\"precision\")),t){case!0:return s.a.createElement(\"div\",null,s.a.createElement(u.a,{component:\"h2\",content:\"exchange.settle_better_marketprice\"}),s.a.createElement(\"span\",null,s.a.createElement(j.a,{string:\"exchange.worth_less_settlement_warning\",keys:[{value:s.a.createElement(g,{base:a.get(\"id\"),quote:n.get(\"id\")}),arg:\"market_link\"}]}),s.a.createElement(\"br\",null),\"Â Â \",s.a.createElement(u.a,{content:\"exchange.price_market\"}),\":Â Â \",o,s.a.createElement(\"br\",null),\"Â Â \",s.a.createElement(u.a,{content:\"exchange.settle\"}),\":Â Â \",r));case void 0:return s.a.createElement(u.a,{content:\"exchange.checking_for_worth_less_settlement\"});default:return s.a.createElement(\"div\",null,s.a.createElement(u.a,{component:\"h2\",content:\"exchange.settle_better_settleprice\"}),s.a.createElement(\"span\",null,s.a.createElement(j.a,{string:\"exchange.settlement_hint\",keys:[{value:s.a.createElement(g,{base:a.get(\"id\"),quote:n.get(\"id\")}),arg:\"market_link\"},{value:s.a.createElement(p.a,{name:a.get(\"symbol\")}),arg:\"long\"}]}),s.a.createElement(\"br\",null),\"Â Â \",s.a.createElement(u.a,{content:\"exchange.price_market\"}),\":Â Â \",o,s.a.createElement(\"br\",null),\"Â Â \",s.a.createElement(u.a,{content:\"exchange.settle\"}),\":Â Â \",r))}}),V=function(e){function t(){R(this,t);var e=B(this,(t.__proto__||Object.getPrototypeOf(t)).call(this));return e.state={amount:0},e.onSubmit=e.onSubmit.bind(e),e}return D(t,s.a.Component),T(t,[{key:\"componentWillReceiveProps\",value:function(e){e.asset&&this.props.asset&&e.asset.get(\"id\")!==this.props.asset.get(\"id\")&&this.setState({amount:0})}},{key:\"getSettlementInfo\",value:function(){var e=this.props,t=e.getDynamicObject,a=e.asset,n=e.core,s=t(a.get(\"dynamic_asset_data_id\")),o=s&&s.size?s.get(\"current_supply\"):0,r=n&&n.size?n.getIn([\"parameters\",\"maintenance_interval\"]):0,i=a.get(\"bitasset\").toJS(),l=i.force_settled_volume,c=o*(i.options.maximum_force_settlement_volume/1e4);return{maxSettlementVolume:c,remainingVolume:l?c-l:c,maintenanceInterval:r,settlementDelay:i.options.force_settlement_delay_sec}}},{key:\"onAmountChanged\",value:function(e){var t=e.amount;e.asset;this.setState({amount:t})}},{key:\"onSubmit\",value:function(e){var t=this.state.amount;e.preventDefault(),this.props.hideModal(),t=parseInt(t*Math.pow(10,this.props.asset.get(\"precision\")));var a=v.a.new_transaction();return a.add_type_operation(\"asset_settle\",{fee:{amount:0,asset_id:0},account:this.props.account.get(\"id\"),amount:{amount:t,asset_id:this.props.asset.get(\"id\")}}),_.a.process_transaction(a,null,!0).then(function(e){return!0}).catch(function(e){return console.error(\"asset settle error: \",e),!1})}},{key:\"_useMaxValue\",value:function(e){this.setState({amount:e/Math.pow(10,this.props.asset.get(\"precision\"))})}},{key:\"render\",value:function(){var e=this.props,t=e.asset,a=e.account,o=this.state.amount;if(!t)return null;var r=t&&t.getIn([\"bitasset\",\"options\"])?t.getIn([\"bitasset\",\"options\"]).toJS():null,i=t.get(\"bitasset\").get(\"settlement_fund\")>0,l=0;i||(l=t.get(\"bitasset\").get(\"options\").get(\"force_settlement_offset_percent\")/100);var c=t.get(\"id\"),p=a.get(\"balances\"),d=I.a.replaceName(t),h=d.name,m=d.prefix,f=(m||\"\")+h,g=null,v=0;p&&p.forEach(function(e){var t=w.ChainStore.getObject(e);if(!t.get(\"balance\"))return null;t.get(\"asset_type\")===c&&(g=e,v=t.get(\"balance\"))});var _=s.a.createElement(\"span\",null,s.a.createElement(u.a,{content:\"exchange.balance\"}),\":Â \",g?s.a.createElement(\"span\",{className:\"underline\",onClick:this._useMaxValue.bind(this,v)},s.a.createElement(b.a,{balance:g})):\"0 \"+t.get(\"symbol\")),y=!1;o>v/Math.pow(10,this.props.asset.get(\"precision\"))&&(y=!0);var A=[s.a.createElement(M.Tooltip,{title:y?E.a.translate(\"tooltip.lack_funds\"):null},s.a.createElement(M.Button,{key:\"submit\",type:\"primary\",onClick:this.onSubmit,disabled:y},E.a.translate(\"modal.settle.submit\"))),s.a.createElement(M.Button,{key:\"close\",onClick:this.props.hideModal},E.a.translate(\"modal.close\"))],C=this.getSettlementInfo(),x=C.maxSettlementVolume,O=C.remainingVolume,S=C.settlementDelay,P=C.maintenanceInterval,N=i?0:(S+Math.floor(o/x)*P)/3600;return s.a.createElement(M.Modal,{title:E.a.translate(\"modal.settle.title\",{asset:f}),visible:this.props.visible,id:this.props.modalId,footer:A,onCancel:this.props.hideModal,overlay:!0,ref:\"settlement_modal\"},i?s.a.createElement(M.Alert,{message:E.a.translate(\"exchange.settle_delay_globally_settled\"),type:\"warning\",showIcon:!0}):s.a.createElement(M.Alert,{message:E.a.translate(\"exchange.settle_delay\",{hours:r.force_settlement_delay_sec/3600}),description:N?E.a.translate(\"modal.settle.delay\",{amount:N}):null,type:\"info\",showIcon:!0}),s.a.createElement(L,{asset:c}),s.a.createElement(\"br\",null),i?null:s.a.createElement(u.a,{component:\"div\",content:\"exchange.settle_offset\",offset:l}),s.a.createElement(\"br\",null),s.a.createElement(M.Form,{className:\"full-width\",layout:\"vertical\"},s.a.createElement(k.a,{label:\"modal.settle.amount\",amount:o,onChange:this.onAmountChanged.bind(this),display_balance:_,asset:c,assets:[c],tabIndex:1,style:o>O?{\"margin-bottom\":\"0\"}:{}}),o>O?s.a.createElement(n.Fragment,null,s.a.createElement(u.a,{className:\"facolor-info\",content:\"modal.settle.max_volume\",amount:x,asset:f}),s.a.createElement(\"br\",null),s.a.createElement(u.a,{className:\"facolor-info\",content:\"modal.settle.remaining_volume\",amount:O,asset:f})):null))}}]),t}();V.propTypes={asset:l.a.instanceOf(r.a.Map),core:l.a.instanceOf(r.a.Map),account:l.a.instanceOf(r.a.Map)},V.defaultProps={asset:r.a.Map(),core:r.a.Map(),account:r.a.Map()},V=Object(h.a)(V,{propNames:[\"asset\",\"core\"],withDynamic:!0,defaultProps:{core:\"2.0.0\"}});var F=function(e){function t(){return R(this,t),B(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return D(t,s.a.Component),T(t,[{key:\"render\",value:function(){return s.a.createElement(V,this.props)}}]),t}();t.a=F},2120:function(e,t,a){\"use strict\";(function(e){var n=a(0),s=a.n(n),o=a(2),r=a.n(o),i=a(40),l=a(42),c=a(14),u=a(5),p=a.n(u),d=a(237),h=a(278),m=a(1969),f=a(7),g=function(){function e(e,t){for(var a=0;a<t.length;a++){var n=t[a];n.enumerable=n.enumerable||!1,n.configurable=!0,\"value\"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,a,n){return a&&e(t.prototype,a),n&&e(t,n),t}}();var b=function(t){function a(e){!function(e,t){if(!(e instanceof t))throw new TypeError(\"Cannot call a class as a function\")}(this,a);var t=function(e,t){if(!e)throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\");return!t||\"object\"!=typeof t&&\"function\"!=typeof t?e:t}(this,(a.__proto__||Object.getPrototypeOf(a)).call(this,e));return t.state={amount:e.amount,to:e.to,to_id:null,memo:\"\"},t}return function(e,t){if(\"function\"!=typeof t&&null!==t)throw new TypeError(\"Super expression must either be null or a function, not \"+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(a,s.a.Component),g(a,[{key:\"onAmountChanged\",value:function(e){var t=e.amount;this.setState({amount:t})}},{key:\"onToAccountChanged\",value:function(e){var t=e?{to:e.get(\"name\"),to_id:e.get(\"id\")}:{to_id:null};this.setState(t)}},{key:\"onToChanged\",value:function(e){this.setState({to:e,to_id:null})}},{key:\"onSubmit\",value:function(){this.props.hideModal();var t=this.props.asset_to_issue,a=c.a.get_asset_precision(t.get(\"precision\")),n=this.state.amount.toString().replace(/,/g,\"\");n*=a,d.a.issue_asset(this.state.to_id,t.get(\"issuer\"),t.get(\"id\"),n,this.state.memo?new e(this.state.memo,\"utf-8\"):this.state.memo).catch(function(e){console.log(\"issue error caught here:\",e),f.Notification.error({message:p.a.translate(\"notifications.asset_issue_failure\")})}),this.setState({amount:0,to:\"\",to_id:null,memo:\"\"})}},{key:\"onMemoChanged\",value:function(e){this.setState({memo:e.target.value})}},{key:\"render\",value:function(){var e=this.props.asset_to_issue.get(\"id\"),t=1,a=[s.a.createElement(f.Button,{type:\"primary\",key:\"submit\",onClick:this.onSubmit.bind(this,this.state.to,this.state.amount),disabled:!this.state.to_id||!this.state.amount},p.a.translate(\"modal.issue.submit\")),s.a.createElement(f.Button,{key:\"cancel\",onClick:this.props.hideModal},p.a.translate(\"cancel\"))];return s.a.createElement(f.Modal,{title:p.a.translate(\"modal.issue.submit\"),visible:this.props.visible,onCancel:this.props.hideModal,footer:a},s.a.createElement(\"form\",{className:\"grid-block vertical full-width-content\"},s.a.createElement(\"div\",{className:\"grid-container \"},s.a.createElement(\"div\",{className:\"content-block\"},s.a.createElement(h.a,{label:\"modal.issue.to\",accountName:this.state.to,onAccountChanged:this.onToAccountChanged.bind(this),onChange:this.onToChanged.bind(this),account:this.state.to,tabIndex:t++})),s.a.createElement(\"div\",{className:\"content-block\"},s.a.createElement(m.a,{label:\"modal.issue.amount\",amount:this.state.amount,onChange:this.onAmountChanged.bind(this),asset:e,assets:[e],tabIndex:t++})),s.a.createElement(\"div\",{className:\"content-block\"},s.a.createElement(\"label\",null,s.a.createElement(r.a,{component:\"span\",content:\"transfer.memo\"}),\" \",\"(\",s.a.createElement(r.a,{content:\"transfer.optional\"}),\")\"),s.a.createElement(\"textarea\",{rows:\"3\",value:this.state.memo,tabIndex:t++,onChange:this.onMemoChanged.bind(this)})))))}}]),a}();b.propTypes={asset_to_issue:i.a.ChainAsset.isRequired},t.a=Object(l.a)(b)}).call(this,a(126).Buffer)},2121:function(e,t){e.exports=\"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAGQAAABkCAIAAAD/gAIDAAAACXBIWXMAAAsTAAALEwEAmpwYAAAAB3RJTUUH4QoLBzEKr7oFDgAAIABJREFUeNq9fXmYXVWV71p773PuvVUVSAL2o40KmjCEgiSEVFUSAiRR6U9Bwan9tPG1OPLk2bQTaQd89rOfooJD80RBUfTz4RPnVpx9bZuEzIHMAaICraIiZKjpnrP3Xuv9se5dtetU1U1SiveP+m5uztln77XXtH9rOPjWt751y5YtzrkQQpZlIQRjjDGGiOB4PsxsjIkxjoyMbNmyhZkBABHlf4nIGNPX19fT0+O9995v2rQpvRcR5Rr5rrfLP/VKItq7d+/VV19tjAGAPM9DCMyc5/ncuXM//elPy4179ux54xvfWK/XiUjWJU/pPH9rbQgBAJQC8mhmjjEODAy4bdu2rV+/Xn6NMSKizDud4rF8ZHSZ9+joaKPRkAGNMTJUWZbbt2+31nrv0ykKlWUE/V1ukQ2T+cgFiHjo0KFt27Z57+VHWaG1ttlsxhittcw8ODh4zz336MR0qDzP06dPJJbuUIxRZyKTQUSnU0nvkWUfF7F09BBCvV6X7/J4mXGe50RUYVjdGyGZ8pE8XcmnXxDRGNNsNnVVwgsxRiGZ/g4AzjkdWTfsWJZQobLOygh10l2Vx0/jY4yR+SFiCCHGGGMU6lRIL49LJ2etFUKkgsnM3nsdR4aSnRDKKhWMMYcOHdIHOefku0wmxigD6uZN/MjTZUD5yO7qjiKikbHkV6GiPIOP8yO3K6Gdc9Zaa22WZTKPPM9VlFSCAMB7X6vVdELOOUTMsuzss88GgCzLZBxZSQhBuIOIGo1GX1+fEDHGuG/fvnSzRT7yPO/v75cZeu/Lspxq/rorIQQZcGhoSMbUa5xMSNSkiqtz7njFUJlfNbGKmLU2xijKoiKGwtf6Vy8wxsyYMUNuF8WvnJvnuQw4OjqqkiKqUDZG9kDYVigrukz5cdL5V5hOGPbIkSOqsIwxTqiYXic8fLwKPtWFKkcVXSCLnHhL5Ue5RamWqggiKopCZVnkS9aZZZkaKL1ApqG0Vqp1sIk6iOyfEFekzaRaUK47qpXt8CRlHNFBkyopXbyqM/lF1bPcqOJQUXYiLHLlyMiIXiwjqJirdVYpUbJ2mLxogImMYoyx1o55E8LM6YZ3/lRYWr/rbug/RdlX3BGdligXdVxE8RHR5z73uSzLRIUtWLBAx1yxYoWMFkK47777ZObOOSWrem3yFO+9PnfTpk1TLUc0IyL29fWJUkpdxTGd9WR/KhZduS/lLN18nZ+QTHZVLIA6bsqbqon0u4wwUa6Pa7YVsRhTUE82pYSh1PmUL7KZ+stE56uyYDFBYmGFHMIv6iLIIMKGcv00dIgq8qn0tXmyiSXP1s1XaRKFolqywho6b71S6SJKXSRUr1RJ9N6L1P/pM6/ok78EsVQp1Go18R7UysinKAphhJRwHZhU2WdkZOSee+7Rwc8991xx65xzqQE9Xsue0qhy41+Is1Kekm0XfklVe2V++r8VudBxurq61MtBxO7ubvmvoiimYc0nEjT1Qv5yOit1GlSRy+anB2YlxMSjiRybU59DbbeMmVrbPM//FJ3VaeP/AtZQ6aKnqFSFjx1Tk4Oh+Maqs9QRVYMoBqurq0tdBIWV5OxSYcNjF8aUtSscOh3OEke8glV1dvZSRKEyJ/HgJ4rh4sWLVWDVeiLixo0bL7zwQgWFjooaHaOyT7EzdWv/DJyVrqGCQx0LZx0jJ2ZZpkBNyon1el3tpvpcuiXq7oqva4xRZK0zSKfjpMeMytLctGUq3fOjmjD5e1SyKjuo5lY8T72qoihkPQpsioJT5i3LUqFBEWE5Y3c+xumYuhzxQo6JWFORQDlf/JqjqlL1sPTGzqdZuSyEMDw8rFCvc857L6c84ZQU85LP8PCwzFncfbUSWZbJJIWCHbZW2HNwcFDuTV25oxBrKlGfqKo6L16vd86NjIyIgBzVKgHAvn37lIsXLFhw3333idz19vYqgdJTt2xeyshyLBUaiR+7bNmyzuuStYQQJp4ipslZFZC+8+J1wQpadRZbPdwdOXJE/ICyLOv1uopJrVar6GAhop6H1O+VQ1Ke54pVTHXoUz4VwU/PBn8GnSVzOkadVbn3qFYpna5Em1J0xXsvroOqcEVBlNbiOsjBSHScTniqOYjjVoHX/wwefIoWHIvzUkEpjxpkkxkL1i7+p/hZcrsKsnq2qd8r85Fly152dXUp4NFhtxRfVdFzzvX09Iy7aNWqVRUf51j2v4PY1mo1USiKdqrzIu7iRGcvBf51AuJnyTg7duww7U05d+ECHwMzx+jvWb9WWXvhwoXq9G7atCm1/ROduOP9OOdWrlxpFEVVn2UaQcP0uFAURQhBxEcRD3WanHNydlMWSO1UigurBy+IqJDXWtvV1WWNsKrLs7oAEhKMkaiSkr5er6e70gGAPyoTyLBG5D/d2GnDygrIOucErdYQVqpKxLTL3og2ybJMNHSK0lRg28xlFcsrke0KDi6EE93UbDbTcOT0FpXiqO7gwYOpEtGNnUZ0R2ght3vv5QGyAPHuxN9RJkoJquqvBeA6J0sV859lWRliltWIwuGDh2IIzrksy2yWi2ir/hZTIGMKb+oJtHJKOy4FTUQHDx5EsRdijysw5vESS7ZdpViEQiiVenf6T+9jltlEhNl7v2XLNg2JHzlyRDDlPM8HBpYZA0VR1GrCYgxgjhw58sAD+/M8HxkZmT179rx583Q/hFjNZlMMgrLk9EJ83vs8z1E34c8FLaaHNRWZtWvXilopy/Lss8+eMWMGMWaZQ4RI0RobyYsmwraBVn4RP4sBKEZrkSmgMQCGGQGRYgwh1Gq19GAEAAww2hxt1BsMDAAISEyIaACnvTpMcV6Vwc5AwhRjRZFE2duhoaG77rrrK1/5yo9//FOhYJ7nzWZTNtkYc/6S/he84AVXXXXVnDl/TUwx+sxlPvjcTVi2RGuADTBD/MC//Mt3v/tdtBbBRobcZUVRCP+q64uIz7v0+b29vZdffrkGe2KMeZbj8ftJY6Sg9kfPENOI3UsAfLQ5yOx//ZuHXvqyK4wFQDAWJoYPWs9Gi8YBmKXLl+27fz9xHC1GiKOi7OlMZH7eF8z+da/9rwiABowBMGMpLhoebqk/BOMsILzs5X978PAhYg4UI09vaa0pQX9/fyUW3dnVcpD1zj+HmQP5yJL9wUwcikPM5fXvfg8AIIKoUYO5WpM0+IqIFiCzDsCYrAts7Y3//R+bkT1zJCbmZrPJHJkjM4fQoplnH0bpmte8yBpwCHUE42am3tP4g5cxxunfO7/81cDsmYk9M0dPzEzMgWMZCiYW1mPmtWvX6vIlXjmW69DV1aVjKyLRwcmOEJ/ylKeIQjFowAAAMZHN6osXLLpv195arVEUo8ZZFo8HuK+v77nPfa44FkT005/+dOvWrcEXIQZrbfRNNO7WT/7vdT9fu337VrRQFr5eqwFA2Szyes1aJAKG4ME3cnFKoF53ZTNQCJVjnSIctSwrysIAGgNE8MpXvGJ4tPmqv7/SGEYAY0WviQ/sUjdAbhe6a+5U67N69eo07iQOZGcxXr58ufctWaHofTnCsTnv1DkZQmZzAAcGAeHZz7nke9//sdj+iSy9e/ful7/8ZQjQlVsEQLSu1nPK0+cG5sBclG3fMqjoRM+eA1991eUtcUP42C13qrRKBEywmo0bN77rnWsa9byWOxk8r3Wjaxx4+NEg1xPHGCNTYBYeUydGUxKNMcuXLx+XKXTxxRdXDpCdw/fG4cBA39hK2DM3L1x+ngWo2xqCA3A9M078fz/79xDZB05dapmNOCtl8MzxoV/sP23OUxyAFRG3XQMrVgbmIjIJlYmZAlPwvvBccuDXXvl8RMzrNQDz/o/ekaq2siyTjYkc/Esuv6yROVEJYGqrLrnMMweKvmzG6Ik5EkdiVWUhhB07dqjTd84551SJlToUqZqf9AMIS5f2hxA4cvSByb/33W/PDCBA7moA2V8/9dQ/PPZ4SVGmImvQAfWfgTlGT36E/fAFSxZ059aiQ5ODyT904ycCs2+rqhhK0V+jNMKB33L1y1sQALr/8dEvCKumzCsIJ1Ng9hzL8xeeU3c2z3MAB7b26BMj8mhmT8whMkVm4jVr1ogMLlq0SBIpJqp5I7iPeqFCXXUjJkmgMJYIrLFgCDk++utff+ADNwYCBihDnDV79oO/+MXsk2cDBQAyCIq3qFLIsoyIENgYgy6LxOvu2XjKKacAB6ASmNasecfhI8MRUDSnsVZcOIcOAgyPDAmDi24ty1JObEVRiKoVVCsSMQEgfu72z8YQfVkCEMS4cdN2knMikdgFNABI9XpdDkZyxkyTvMZBNJXjzsSI7ngElWtZ3mwOAxNmeO2116I1AIBZDgg/X7eOgYjJWRNjCUBi/iSpTASwZd0BY2QAZ/MGZNnP/uM/LEJN3NJI1113nbMABoghBAJs62PD9Sw3yBQiAGdWWKaFdggs04I6rItEALBg8aIsw66aQyAAuu++vRSF+Gn0hCrhyDQ3cYxYgsaKQVFCdggfGbBEUK/XAPmJxx77+rf+LQRicBzDG6+55oyz5jXqGSISk7Nj2QmyJImzt3wWZmMtAxBgCPTUpz/tmmvewBGAIyDeftttPjAxMIJ1jhlBrAZiCMG0Y9tEAZIkWM2xISIGtM6R9wBw3sJziyI4BAQYGhpBCwRs2qgpM8vpQ1hECDIpu4zL9tYg+5g3NG5EAADKOQwPA3oosls+doOzmQMACGC6P3zTTQbZcHSMljPgVjJuZX9agwNCJARCJrTO2Ox97/ufooktRIT4ma98N+NmACAA5BIRS4hgAZwNDE5svzUa5kmZAhENAHNhsgawa8e7awYoy2xgYITIDAwWAGgMfUfEtWvXimwpviSfgYEBk+Z5p7lbim2l6fNEBD64Wj1yBAvf+Ma3yuAZwLr88he/pOasBQQAppbgdDozoT7RGjQA0N3dGOg7p21q8Gt3fQXQUtsXijE6cHJUtBaNzYCNgr+CzAjPtpL/mAw0KBwBsHv27rSmzraIkC1c0OuEzuLKIqABAGw0GgJMpjCWhiattY1Gw3TOGUwLH9LsfotZeeSJfff/J4DJrI2RX//611oDDGPIkSxzyjMXMBhmljkBANh6dvnllwG0VMnPf/pDQOsQkAkArLEGAAgQDUUoyxLQMKPiPCoHLbgVgSIb2/PQLzY0R2qem4EMYL6s/zxhv/ZSQU7Waapqmgc85gZIHnyadZfmRlWSbzT3sCQGgK2bN4h3xIyA+UUrlqfPOJYjavpQ0ZLPee5qC0RM1uUwOvy7Px7G1iYjAEQKLdgaENEaY9OET0gqMmQTEBGweNd17wcogDOwpndJ/zPmzERg4DaR2uqoLEtNPtdjX5oHD62TaJIKkSauVMJzLeeewToHjLt3b/XRABIRnXzas7rqxjAARTkTHhUIkSsMCpIFzAjMZ83vtQAGTYzBONjzwC8BwLQ4lJxxgC2eyPOcoo+hFEnUmpukIMIgFnd+8Utf/9b32QABQ6x9+MMfRAAD7GxOkcVgyapvuOGGI0eOiL2W+C4R7dmzp+o6TBqkmYqznEUwBhB//9uHIxhAQOBnnXGmITCYhnCOGh0Yz30GmV02Y5YFcJkBRi5H//N3f7TQZl4iHtttKotRAGqM54U0wEMB3v+B66989Zvy7oYnAAyve8ObL1k5EKMHMAAGUBSsEMsIz8oZQ1hMY5fqUTupLKhAo2kIU3V8i6xEzTIA46O/fUigOiSeefJJDICgUU8wRm7sAIABMyGKr2AZLYABcCd2ZwebEYyzBIOj5RiohMjAwGAzY42NFOs1e+D+PRs2bBDtLvF9Y8wDDzywfv36Oz7/mZGRwEhDw7Wsy/3N6hd/4uPvdQwkW8ggVqUSixa4TbPn06CJMcZphcZUWSVCKVV1BiCr5QAwNHwYwIADDnDCzBPboSpqsQwfBUFEAAALEAGIARAtAEbPM2ee8NhvHofMGoJmIcQitA6BI4QMIcYYKRoAX8Q7brv1i5++MVXGCvk7BMQcnOE4/L73fmrNmqstBPCMmSGGGME5YAaDQj3UkK2WmSGiFOGNBQk3bdpUyTHTUGiadaaAHKIJcRTIFUgAkEOtsIBNZGgVaJVlCQiMR1HzRIJ7QaCIgMxABNYZ9l5QHwvQ3d0NzEyi4AwCC4GFKXIECM0xuQMGBEAbAgGYgFnXjJPf8Y63HRp8Ys2aq1sbaBHBGITMtUZsiWSbP2KMa9eubTQaAi4sWLAg9Q1dyodpKYB+EaRYAf/ABMQQY6PelWeuLIYB4fDBx8VyhxD1/IHGMMcpFZcBQAg+uiwPxMaARYLgDw0NGWsgxgDQ090FKA4mMIPFdpCRyVosI4PJiYpWhIVaxX/W2RDC7JNOueVTn3zpS64QkSnKop7XiL2BrAN8rABMxUMQp9epA0VEgmSlxX1iUNWsil9Syyw4+9Snneb9RgCT1+HXDz1EDIjWOIHiRMF3ygFBBCJyWQZgrAEfPLN3GR8ZIXYZoPEMp845JfEzEIABwGUZgwkRnIUVq56zesUCIBZ1s3nzxu/823djCM7CE4899qq/e8mtn/6bH/7ge2iplteCB5dR55wBEUD5m6Y0id/r9u3b9/jjj0sYbuHChYr8CSsJjbZv3y5kbsX+iQHo6afNM0CAObP/5YP7GYEiW4vel3luseWg89ReFgmGaQzECIjsHD70wO4SgMXuYXb6M0+NAA4MACFihOioVaDCjMZlqy953vve8XpisihcjAD0T29/x003fdyY6Ev695/85LLnv+TuH36dCGwGDNzBQpdlaa096aSTFi5cWKvVarWaJj5ba8844wwYGBiQpBxNXVU8q1JqpIGGpQN9HMPPfvLtOkLN1MEAQPejfzwyOFpGJgHORQ16X0wVAgjkiYJAXEVJzDE0H//eN28Xmwim5mb8VWAuSIA5z8yeS/Z8zWuvQLQADkz2z5/4QmQKFFtoH8fm6CCTv/3WWxCh0egGcADuIx/5lA9MXPpYHjU2IV5bBeAVspju7m6tkqnIoFaXpmIMBh0wIPf1r2AGZAQEC/R/7/pavZ5xy3UBHB+Cn0wMbTvVC2wmpSnuhz/4KYJFZGvw/P5llluBDwhtFARbyfFoDDCHEBDQokgQee9r9a4Y6TVveP11b/9vzdHCGAIM7/yndz36+8eK6NFkHUJeGlFPk7xUwROREUqpX5omM8pfyYfSMltgOShxV8/ss8+cE5kBwUC87bO3h7YuTAORU7ukaE1G0QMSAEQmzBqf/9ydLZc9lle++iqITZZjEfIYjYENMHAEpkZeK4tCwZksqwEYBgPgPvi/bjj9WXMyZwAxxKFLL73U2a4OyU7GGFXZac556naZFNZQVJOINm/evGHDhu3bt+/fv3/+/PlLliy54IILLrjgAjDGMABiUfrXv/Yq1zqN8L4dO3bu3BMpapFN56wVjiCQFmLL+H79K18tPAASMhHTi150udBRWFRdWSICJrmrKJridreML4APZJ0LkdE1vvntL3sfgCyg371n1+dvv4v46GkNlRyp9HAOK1eurKTJT5U/1U57dsuXXcTEVI6ODj0uoAxCDpift2TZaGDPXDI3y1Fmz1SkiH4K8HtmHyWUVzI3mctTTp5lAWytDuguu+IlxOwDE7OPgUjUhw+R3/yaKyS2g2Cu//jnp9Q9xMzxTa9+KQJ0AQD0mKzn9yPEHCn6EIKEKUIIzJFjmQY+UsU9DoPvnLFXqaQxxlhniEPwEV1W757xxte92jlAiIh479atH7vpY+JC5Vk9RgY06tBWKgYsgDMIAL4sgfEt//APTzxxkBFiGcCYG264QfgJAZyxiPa4UxMQIDRv/tyXZtVhBFzdlBT4NVe+MpIhcNbaGALqQaV97hcdouJVHbQzZ4kuS2kMCEv6+9pb533zsEMwCNZmYnq+ffcPPHNJHChOzAQQW0NEzLE5Oszkmcsv3XE7ihZDB1h71WveEJgLX5IYuJHRFmMdD2cFZt8cJC6/8KmbAEzNALguQPez9ZuGi0DMRDQyPMgchec1yzCFWyqfKZNnent7TzjhBAAYHh7etWvX4OAgEfX09Cw679zzzjuvLCjLDRDYrHb33d+89NIXxeidyVyeXX7pZV+88/+88hV/K9HqNP1M82iZGZhqeQYAN97w4Xe/+3rB9YBh5sl/ddttt8o2C4xTq4SFj5W1CGs9GIdedfU//uvNt2zb+6scRjy6573gikOP/zYCOMRGVxcwhwiI8PvfPfrII49o0a0IxIwZM/TE04mzlJtE649Fh7iITMQcvMh2ydxc8/Y316zJTSvDwbr6ylXP/ePjh6mt6dJcD2Gu0Bx+cN/uhb1n1Z1FgFqtkde6AbI9+x8OzJ4pchniaKQilL4dBD0OziKOgZmpJOZf7d3mnHFyejeNa697z6gfm5oor+uuu64SrM/zvK+v71h1lmSjaQ5Eq6gFDBBTAOPAOUfMAPaGj3z0yitfGYmNAWOAol+/fu3JJ8164QuvuOOOO/bu3avyX5bltm3bbr755sV9S86Yf87+Bw+UgVxWKwpflsWO3bvnn/mMUAYjRDcO2NjMwXQyHI0FKinDWD79rEVv+PuXm8zmBkxmPvGRDz388MMhsgDbEkA84YQTpGuLwqST9GLpwFlqAdPshxhKJiZiYiaOkUNbyMuP3/ghZzF3rYvzei3FSzUzU8+G2mnGufzU0+bdf+Bhzxxa8WcmotHRUXXNp8FZTMJcftQHLg/Va5mcb11WO7N3gSTtUMv2xfe+970aoNX46bJly46Js9atW7dx48atW7fu2rUrRaZ++eAvt2zeKuSNFBHQOgcMwHzt296ye/fOufOe6YwFgFAWEsJJGyuNtY6QI6Zk70R++OGHvvHNr/sA1kKkVpSlXq8TME2Lr4ACgbEERXR1W3LW/dlb/pXRNDITfHH/vn233voZAAgMzhmg2EZNgkKhk9SwXXTRRWnFiLBJ6tNPzM1dvHhxNdMs+e598cMffv/Zz17lsrGYQBo91EolQepdO+wAprZwyfKDR0Ylkab0LW5q+WLEZTHKXL7uqldiCzzM3vfBj3Vws6g1pUAUIhXM/vzFCwABrRHn8A9/fCxITgbT9ddfr417dMlLly4dZw0llATjuzBV+kRVMt3T+ra0ME6QL+fcRRdddMkllwDAj370o02btuzdu/dXv/qVbECWZX19ffPmzbvkkuc8bc6cvr7z9+y5HwEYyFnYsXXLSSed9PVvfO2Flz7POQmAsLU2xBIYszxnCmvWvPMNV18TyQSwzzj1tCkZi4mIMtuqPkdwAHT33Xf/6pHfGGPKshwDFRA0mT5FDSY5fqxevVrjiJwYL72n0g3GGDMwMDA6OjppcmVZtjJevC/ky/g0oNZR3ntfFEWMPobm2992bWunEa3NrKsDuDddc20rH4hJNl98Lopehm3BFfHoaY9ERBTaU/I+tn13ij4GsezE/J73vKdSjiGZaOM46/TTTy/LsizLQ4cOaaMFa+3555+f6uO0r1xfX1+atq6+Rft03gq3yAPUOAjaoxPK8xyAKPJHbrxx1apVV7zgCmKG6CNEALjlkzd/5zvfXrfhnlNOOcUaEwEsQKDoTAYERIwWECgz1LlWq51G3soMLssyz+ut2ESSuCy/CAKqNZ+T5HxMzMxTVyh1jlImkhiHlJ2k7pj6vul3oZE+Qsdsd7OKMTRjaP7u1w8/8+lPdQAAJs/r7WiVu+NLX24GDsyRA3FszYJa/OLDaAeeknnKE4W52kmqraVpXQIzizWs1D1VdJZJs9W1wEP7e02sDxJmEQw6TWLS4J0mH4zlaCTYhvZTkZBtWQZjMzTuv8x56i8ffvhlL3sxAJVlExGNtYjw6iv/7tkrV40MNSlEBCPujXKEs3nn8pgELLIxcrNZwvgmZzp/TQZJeapaIy0+p1bITkz+rhT0TKzLa38n76Mo+HaHMFspINDKV+ccUEtIGZAgxDJkzt1511fvbKeMSa2A4M4hkHNS6KNWxYUg+MmUcUmKMTLJ1nrvXZbV2qUWmpmkG6k1bFoRqsDWGLH27t176NAh6X2SBlNTcCflrBjjzJkzzzrrrEr9u8Y7tNpEVpi2+xrnkSAyE7bIx1leR5A8Wi91T1LThczAxlkDDKJjrMUQAxA45yjClHgEs7HWoB13OIVxRZ5CR1msODRZlp1wwglz586Vy6SV3thnxYoVlRLKzmH3tO/ZpEV8abOLFJnRDJyJI0xsulkRJfmrmJx+0lsWLVokmiiEsH79eu13IEm0or/Wrl2rK01T8yu52JyAEKkRb0XKFLpKY6udC75Vso5a+at5pGkNvmq09MexfBXTSj4QXFz+aiwvxZG0DHliHwi5sdFoqFEWPZvGBCskU99dvcj0MqOPl3KhSnX1pA3ZpJxQmeio9f/GGNGmaVHOuCBIkjymRiDPc8mZ0h5uabqdaBblYqnVShvhaRfX9GCr9bWpAtWOcJC0VEnT/nRrnWbL5Hm+cOHCPM8nPxYlOksD1/rXGLNu3bpJr1+wYIH0H5LOKJroUunPptO48MILpZPf8PDw3r17hR0ajcb8+fMhaYIiBvcPf/jDAw88UOmgV5bljBkzlixZIlpv3rx5WgIp/qBo7jzPL7zwQlHkRVFIbFRbwAkTSPdNGX/WrFlw8cUXKwnFJ2o7JpN/JtZKaBvaSXVWmlMum59WCFWYJc0L27Fjh2h6AEhP/22glUMIO3fuVEkcGBiooOZSd98+sXpm3rBhg4r5qlWrNEFfa6oBYMmSJfqgLVu2QLuP3sDAgEvL1CZqzUlDIAp4KlMctbMsjG/5WommaN2xyLgQd2hoqFUhNN7mpJMcHBxMu1bD+P47mnKQ9mtRB2h4eFi742nerPpPojFED4gf09XVZVJ9UelEMOlHSVOWpZ5yOseXlLHTnnyqNer1ujKL+ofSE6WS0pkGPmTDFKSW85NSTTZGRpPEhVRWVNgSAAAGi0lEQVS1yZakiQpSWSzcJDXxyg0y51aJHkzR9Xnz5s2TOg3qEBCRSEfnGuGNGzcK73R3d/f29tbrdc2U0y8iHTLU3r17Dx48mOf5gQMHFi1aJC1v58yZs23bNslFkLvEYtx3333aXvXgwYP33nuvKCaxntKjW4UmhLBnzx7t9TM0NLR9+3ahzoEDBxYsWCAe9Zw5c/bv3z8yMkJEBw4cSBMwjyluOJV8pQqis5+lajVt+aDaJC201z07//zzVQdt27atcvKYWJwFEzrJVqrd0hbiFdu6ZMkSndvmzZtTjaR/V65c+aR3ZktFQ/suaIRNjFpqYVVsU+9EEKEErgDtuZyufFyoPTlpac/o1JdMp6fz0RYOk4rLk04sFRwFDlPnKFWRaSWU5mJUWqqkFaQV9VrJG06746V5oROLBaW6P6W4NDefWBvypDdIlP0UG7d79+7BwUEhRH9/vxhBY4xgZ7KSjRs3lmWZZdnhw4d37tzZbDadcw8++OCiRYvErT106ND999+vO5G+EkA3YNasWWeccUZ6NhJH9IknntBO6GkV3GOPPbZz586yLEdGRn7729+ec845YgdGRkZ27dp1rBHpP11nTVQTlWcp6qR8pFVReq+g/vLZs2dPxTvT1Cj5kue5WB61sCJZMcatW7dW/I+Kk2GM6e/vV8fw3nvv/YvqrNSGqkylCLfYbFUx9Xq9LMvKqz4UBdGMfrXo6TlJdFZZllo1m7qBFcgl9QEkRCjgkiLsIQSJJP7ldFbaLjhtJ5civymckEY6lRCNRkOP1uJApOiuSLoM7pyTwkP1wjTRTKDdiWcGOepqtCLtjT6h88CTr7PUIe7r64N208IdO3boOxCWLl1aMfnMPGPGjHPPPVfuFQUkpJk5c+a5557b3d2drk3eYbF//37xRYeHh7dv3y4EmjVr1llnnSUSeuKJJy5evFiUetq7SFOQnXNnn3228mDV5V61alXlKCN71QHYUt83zWaahi5Ta6UnuLTwbPny5fK7nhYrXyr/u23btkoqmvxzYGBgqsSYdD4TowREpGdJa+3FF19slC6VFxp0AB4qR7zOPf86q7NKiV5abyt4gPayVQBW0xP1bKSYn0JMqX+nAYEOQGYlg3Ri6+AWF2uHz/TSChqXeuG686p0p9eaSsOUqcKKMcqCBbQTH0KWKm6X9tiC9ksr5AAg/6Xd7tJWd5U1T7T4+r3SAFqvh3ZHfTdp93RjzJIlS9SOVPpcyv2HDx/WDmHH+64sADjzzDNnzpwpHVd37twpYddZs2bJgrMsO3LkyO7du8W0dXd3L1y4UN9YsmvXrjzPRSbkJOi9P3DggAaZ6vX6GWec0dXVVRTF/PnzhXnT0odJ+asiWIg4e/Zs8QGzLDv99NNh1apVAjNpJ2JFi1KRTk9zFQ1yLH7WpDiXfqnA+SmviaD19/crLrZu3brJOwElH4n3pXwkkXoh/URgLlXWqQKVu8Yw+PSFHCkgN/H1JtWmne3I4DTelZWCpemrwFIUVFEzsffp4UPP3np4qlgefbGUOCLSKgzajfZSEVGhmQhwV5xVKZ7J0hCpJn9PVdOlb4CqFPpMz6uotHytsJvIuD5C27Zqs0AxNbVaTb6oNdBGi5LMJ+GSSY97KXUq3Z+FyzSwhIhOnFcR6fvvv//gwYOaV5MqyIluhEYiBCOfBhqhYTsdSpWr6J1FixYVRYGIc+fO3b59u0z1kUcekdoaY8zQ0NCePXtEzc2ePXvu3LnyEr/TTjtN8C9jTE9PT29vr1BheHh49+7dijHos5xzixYtSskkNB0dHd2+fbsQoaenB1avXj2pppg2xqDsnQKbaRbJRAgfxveOlL9Lly5VGRckMs0Ok3u3bt2qYpXmJQgmJQOed955qnTknRcw4S0olYwzVVvy3j+5bOnSpW7iy7umfaypvJFv0hdPTBVPrUTCK+9tCO0+WaqY5H9Tf3iqF+mJ3ql0R0yNTxpDqQAS6VSzLHOpIKgfMO2mrjLjZrMp8HGqCwTxkP44aRxfGgGmTo22OSmKQpD1sX4S1koSWnp4lKH0eo1Oaj9Z8dfSh6YaXU3ZxFWri9cC4yR7WWHfNCB4XMTSd44NDg6KWpUR+vv7G40GEY2MjKRd4NRLFt0k75xTQF2aTmqudXd394oVK4QEvb296ql3dXUtX75cFLz+Lnj/8uXLRX/19vZqw4aenp5ly5al4ShZsrSrm9g2uVarLVu2TDasv7///wMCmdZm6AM8jAAAAABJRU5ErkJggg==\"},2122:function(e,t){function a(e,t){if(!e.length&&!t.length)return 1;if(!e.length||!t.length)return 0;if(e.toUpperCase()===t.toUpperCase())return 1;if(1===e.length&&1===t.length)return 0;const a=s(e),n=s(t),o=a.length+n.length;let r=0;return a.forEach(e=>{for(let t,a=0;t=n[a];a++)if(e===t){r++,n.splice(a,1);break}}),2*r/o}function n(e){const t=[];for(let a=0,n=e.length-1;a<n;a++)t[a]=e.substring(a,a+2);return t}function s(e){return function e(t){return Array.isArray(t)?t.reduce((t,a)=>t.concat(e(a)),[]):[t]}(e.toUpperCase().split(\" \").map(n))}e.exports={compareTwoStrings:a,findBestMatch:function(e,t){if(!function(e,t){return\"string\"==typeof e&&!!Array.isArray(t)&&!!t.length&&!t.find(e=>\"string\"!=typeof e)}(e,t))throw new Error(\"Bad arguments: First argument should be a string, second should be an array of strings\");const n=t.map(t=>({target:t,rating:a(e,t)})),s=Array.from(n).sort((e,t)=>t.rating-e.rating)[0];return{ratings:n,bestMatch:s}}}},2123:function(e,t){!function(t){\"object\"==typeof e&&e.exports?e.exports=t:t(Highcharts)}(function(e){!function(e,t){var a=e.seriesType,n=e.seriesTypes,s=e.map,o=e.merge,r=e.extend,i=e.noop,l=e.each,c=t.getColor,u=t.getLevelOptions,p=e.grep,d=e.isNumber,h=e.isObject,m=e.isString,f=e.pick,g=e.Series,b=e.stableSort,v=e.Color,_=e.reduce,y=function(e,t,a){a=a||this,!1!==(e=t.call(a,e))&&y(e,t,a)},E=t.updateRootId;a(\"treemap\",\"scatter\",{showInLegend:!1,marker:!1,colorByPoint:!1,dataLabels:{enabled:!0,defer:!1,verticalAlign:\"middle\",formatter:function(){return this.point.name||this.point.id},inside:!0},tooltip:{headerFormat:\"\",pointFormat:\"<b>{point.name}</b>: {point.value}<br/>\"},ignoreHiddenPoint:!0,layoutAlgorithm:\"sliceAndDice\",layoutStartingDirection:\"vertical\",alternateStartingDirection:!1,levelIsConstant:!0,drillUpButton:{position:{align:\"right\",x:-10,y:10}},borderColor:\"#e6e6e6\",borderWidth:1,opacity:.15,states:{hover:{borderColor:\"#999999\",brightness:n.heatmap?0:.1,halo:!1,opacity:.75,shadow:!1}}},{pointArrayMap:[\"value\"],axisTypes:n.heatmap?[\"xAxis\",\"yAxis\",\"colorAxis\"]:[\"xAxis\",\"yAxis\"],directTouch:!0,optionalAxis:\"colorAxis\",getSymbol:i,parallelArrays:[\"x\",\"y\",\"value\",\"colorValue\"],colorKey:\"colorValue\",translateColors:n.heatmap&&n.heatmap.prototype.translateColors,colorAttribs:n.heatmap&&n.heatmap.prototype.colorAttribs,trackerGroups:[\"group\",\"dataLabelsGroup\"],getListOfParents:function(t,a){return function(t,a,n){n=n||this,e.objectEach(t,function(e,s){a.call(n,e,s,t)})}(t=_(t||[],function(e,t,a){return void 0===e[t=f(t.parent,\"\")]&&(e[t]=[]),e[t].push(a),e},{}),function(t,n,s){\"\"!==n&&-1===e.inArray(n,a)&&(l(t,function(e){s[\"\"].push(e)}),delete s[n])}),t},getTree:function(){var e=s(this.data,function(e){return e.id});e=this.getListOfParents(this.data,e);return this.nodeMap=[],this.buildNode(\"\",-1,0,e,null)},init:function(t,a){g.prototype.init.call(this,t,a),this.options.allowDrillToNode&&e.addEvent(this,\"click\",this.onClickDrillToNode)},buildNode:function(e,t,a,n,s){var o,r=this,i=[],c=r.points[t],u=0;return l(n[e]||[],function(t){o=r.buildNode(r.points[t].id,t,a+1,n,e),u=Math.max(o.height+1,u),i.push(o)}),t={id:e,i:t,children:i,height:u,level:a,parent:s,visible:!1},r.nodeMap[t.id]=t,c&&(c.node=t),t},setTreeValues:function(e){var t,a=this,n=a.options,s=a.nodeMap[a.rootNode],o=(n=\"boolean\"!=typeof n.levelIsConstant||n.levelIsConstant,0),i=[],c=a.points[e.i];return l(e.children,function(e){e=a.setTreeValues(e),i.push(e),e.ignore||(o+=e.val)}),b(i,function(e,t){return e.sortIndex-t.sortIndex}),t=f(c&&c.options.value,o),c&&(c.value=t),r(e,{children:i,childrenTotal:o,ignore:!(f(c&&c.visible,!0)&&0<t),isLeaf:e.visible&&!o,levelDynamic:e.level-(n?0:s.level),name:f(c&&c.name,\"\"),sortIndex:f(c&&c.sortIndex,-t),val:t}),e},calculateChildrenAreas:function(e,t){var a,n=this,s=n.options,r=n.mapOptionsToLevel[e.level+1],i=f(n[r&&r.layoutAlgorithm]&&r.layoutAlgorithm,s.layoutAlgorithm),c=s.alternateStartingDirection;e=p(e.children,function(e){return!e.ignore}),r&&r.layoutStartingDirection&&(t.direction=\"vertical\"===r.layoutStartingDirection?0:1),a=n[i](t,e),l(e,function(e,s){s=a[s],e.values=o(s,{val:e.childrenTotal,direction:c?1-t.direction:t.direction}),e.pointValues=o(s,{x:s.x/n.axisRatio,width:s.width/n.axisRatio}),e.children.length&&n.calculateChildrenAreas(e,e.values)})},setPointValues:function(){var e=this,t=e.xAxis,a=e.yAxis;l(e.points,function(n){var s,o,r,i=n.node,l=i.pointValues;r=(e.pointAttribs(n)[\"stroke-width\"]||0)%2/2,l&&i.visible?(i=Math.round(t.translate(l.x,0,0,0,1))-r,s=Math.round(t.translate(l.x+l.width,0,0,0,1))-r,o=Math.round(a.translate(l.y,0,0,0,1))-r,l=Math.round(a.translate(l.y+l.height,0,0,0,1))-r,n.shapeType=\"rect\",n.shapeArgs={x:Math.min(i,s),y:Math.min(o,l),width:Math.abs(s-i),height:Math.abs(l-o)},n.plotX=n.shapeArgs.x+n.shapeArgs.width/2,n.plotY=n.shapeArgs.y+n.shapeArgs.height/2):(delete n.plotX,delete n.plotY)})},setColorRecursive:function(e,t,a,n,s){var o,r=this,i=(i=r&&r.chart)&&i.options&&i.options.colors;e&&(o=c(e,{colors:i,index:n,mapOptionsToLevel:r.mapOptionsToLevel,parentColor:t,parentColorIndex:a,series:r,siblings:s}),(t=r.points[e.i])&&(t.color=o.color,t.colorIndex=o.colorIndex),l(e.children||[],function(t,a){r.setColorRecursive(t,o.color,o.colorIndex,a,e.children.length)}))},algorithmGroup:function(e,t,a,n){this.height=e,this.width=t,this.plot=n,this.startDirection=this.direction=a,this.lH=this.nH=this.lW=this.nW=this.total=0,this.elArr=[],this.lP={total:0,lH:0,nH:0,lW:0,nW:0,nR:0,lR:0,aspectRatio:function(e,t){return Math.max(e/t,t/e)}},this.addElement=function(e){this.lP.total=this.elArr[this.elArr.length-1],this.total+=e,0===this.direction?(this.lW=this.nW,this.lP.lH=this.lP.total/this.lW,this.lP.lR=this.lP.aspectRatio(this.lW,this.lP.lH),this.nW=this.total/this.height,this.lP.nH=this.lP.total/this.nW,this.lP.nR=this.lP.aspectRatio(this.nW,this.lP.nH)):(this.lH=this.nH,this.lP.lW=this.lP.total/this.lH,this.lP.lR=this.lP.aspectRatio(this.lP.lW,this.lH),this.nH=this.total/this.width,this.lP.nW=this.lP.total/this.nH,this.lP.nR=this.lP.aspectRatio(this.lP.nW,this.nH)),this.elArr.push(e)},this.reset=function(){this.lW=this.nW=0,this.elArr=[],this.total=0}},algorithmCalcPoints:function(e,t,a,n){var s,o,r,i,c,u=a.lW,p=a.lH,d=a.plot,h=0,m=a.elArr.length-1;t?(u=a.nW,p=a.nH):c=a.elArr[a.elArr.length-1],l(a.elArr,function(e){(t||h<m)&&(0===a.direction?(s=d.x,o=d.y,i=e/(r=u)):(s=d.x,o=d.y,r=e/(i=p)),n.push({x:s,y:o,width:r,height:i}),0===a.direction?d.y+=i:d.x+=r),h+=1}),a.reset(),0===a.direction?a.width-=u:a.height-=p,d.y=d.parent.y+(d.parent.height-a.height),d.x=d.parent.x+(d.parent.width-a.width),e&&(a.direction=1-a.direction),t||a.addElement(c)},algorithmLowAspectRatio:function(e,t,a){var n,s=[],o=this,r={x:t.x,y:t.y,parent:t},i=0,c=a.length-1,u=new this.algorithmGroup(t.height,t.width,t.direction,r);return l(a,function(a){n=a.val/t.val*t.height*t.width,u.addElement(n),u.lP.nR>u.lP.lR&&o.algorithmCalcPoints(e,!1,u,s,r),i===c&&o.algorithmCalcPoints(e,!0,u,s,r),i+=1}),s},algorithmFill:function(e,t,a){var n,s,o,r,i,c=[],u=t.direction,p=t.x,d=t.y,h=t.width,m=t.height;return l(a,function(a){n=a.val/t.val*t.height*t.width,s=p,o=d,0===u?(h-=r=n/(i=m),p+=r):(m-=i=n/(r=h),d+=i),c.push({x:s,y:o,width:r,height:i}),e&&(u=1-u)}),c},strip:function(e,t){return this.algorithmLowAspectRatio(!1,e,t)},squarified:function(e,t){return this.algorithmLowAspectRatio(!0,e,t)},sliceAndDice:function(e,t){return this.algorithmFill(!0,e,t)},stripes:function(e,t){return this.algorithmFill(!1,e,t)},translate:function(){var e,t,a=this,n=a.options,s=E(a);g.prototype.translate.call(a),t=a.tree=a.getTree(),e=a.nodeMap[s],a.mapOptionsToLevel=u({from:e.level+1,levels:n.levels,to:t.height,defaults:{levelIsConstant:a.options.levelIsConstant,colorByPoint:n.colorByPoint}}),\"\"===s||e&&e.children.length||(a.drillToNode(\"\",!1),s=a.rootNode,e=a.nodeMap[s]),y(a.nodeMap[a.rootNode],function(e){var t=!1,n=e.parent;return e.visible=!0,(n||\"\"===n)&&(t=a.nodeMap[n]),t}),y(a.nodeMap[a.rootNode].children,function(e){var t=!1;return l(e,function(e){e.visible=!0,e.children.length&&(t=(t||[]).concat(e.children))}),t}),a.setTreeValues(t),a.axisRatio=a.xAxis.len/a.yAxis.len,a.nodeMap[\"\"].pointValues=s={x:0,y:0,width:100,height:100},a.nodeMap[\"\"].values=s=o(s,{width:s.width*a.axisRatio,direction:\"vertical\"===n.layoutStartingDirection?0:1,val:t.val}),a.calculateChildrenAreas(t,s),a.colorAxis?a.translateColors():n.colorByPoint||a.setColorRecursive(a.tree),n.allowDrillToNode&&(n=e.pointValues,a.xAxis.setExtremes(n.x,n.x+n.width,!1),a.yAxis.setExtremes(n.y,n.y+n.height,!1),a.xAxis.setScale(),a.yAxis.setScale()),a.setPointValues()},drawDataLabels:function(){var e,t,a=this,n=a.mapOptionsToLevel,s=p(a.points,function(e){return e.node.visible});l(s,function(s){t=n[s.node.level],e={style:{}},s.node.isLeaf||(e.enabled=!1),t&&t.dataLabels&&(e=o(e,t.dataLabels),a._hasPointLabels=!0),s.shapeArgs&&(e.style.width=s.shapeArgs.width,s.dataLabel&&s.dataLabel.css({width:s.shapeArgs.width+\"px\"})),s.dlOptions=o(e,s.options.dataLabels)}),g.prototype.drawDataLabels.call(this)},alignDataLabel:function(e){n.column.prototype.alignDataLabel.apply(this,arguments),e.dataLabel&&e.dataLabel.attr({zIndex:(e.node.zIndex||0)+1})},pointAttribs:function(e,t){var a=h(this.mapOptionsToLevel)?this.mapOptionsToLevel:{},n=e&&a[e.node.level]||{},s=(a=this.options,t&&a.states[t]||{}),o=e&&e.getClassName()||\"\";return e={stroke:e&&e.borderColor||n.borderColor||s.borderColor||a.borderColor,\"stroke-width\":f(e&&e.borderWidth,n.borderWidth,s.borderWidth,a.borderWidth),dashstyle:e&&e.borderDashStyle||n.borderDashStyle||s.borderDashStyle||a.borderDashStyle,fill:e&&e.color||this.color},-1!==o.indexOf(\"highcharts-above-level\")?(e.fill=\"none\",e[\"stroke-width\"]=0):-1!==o.indexOf(\"highcharts-internal-node-interactive\")?(t=f(s.opacity,a.opacity),e.fill=v(e.fill).setOpacity(t).get(),e.cursor=\"pointer\"):-1!==o.indexOf(\"highcharts-internal-node\")?e.fill=\"none\":t&&(e.fill=v(e.fill).brighten(s.brightness).get()),e},drawPoints:function(){var e=this,t=p(e.points,function(e){return e.node.visible});l(t,function(t){var a=\"level-group-\"+t.node.levelDynamic;e[a]||(e[a]=e.chart.renderer.g(a).attr({zIndex:1e3-t.node.levelDynamic}).add(e.group)),t.group=e[a]}),n.column.prototype.drawPoints.call(this),e.options.allowDrillToNode&&l(t,function(t){t.graphic&&(t.drillId=e.options.interactByLeaf?e.drillToByLeaf(t):e.drillToByGroup(t))})},onClickDrillToNode:function(e){var t=(e=e.point)&&e.drillId;m(t)&&(e.setState(\"\"),this.drillToNode(t))},drillToByGroup:function(e){var t=!1;return 1!=e.node.level-this.nodeMap[this.rootNode].level||e.node.isLeaf||(t=e.id),t},drillToByLeaf:function(e){var t=!1;if(e.node.parent!==this.rootNode&&e.node.isLeaf)for(e=e.node;!t;)(e=this.nodeMap[e.parent]).parent===this.rootNode&&(t=e.id);return t},drillUp:function(){var e=this.nodeMap[this.rootNode];e&&m(e.parent)&&this.drillToNode(e.parent)},drillToNode:function(e,t){var a=this.nodeMap[e];this.idPreviousRoot=this.rootNode,this.rootNode=e,\"\"===e?this.drillUpButton=this.drillUpButton.destroy():this.showDrillUpButton(a&&a.name||e),this.isDirty=!0,f(t,!0)&&this.chart.redraw()},showDrillUpButton:function(e){var t=this;e=e||\"< Back\";var a,n,s=t.options.drillUpButton;s.text&&(e=s.text),this.drillUpButton?(this.drillUpButton.placed=!1,this.drillUpButton.attr({text:e}).align()):(n=(a=s.theme)&&a.states,this.drillUpButton=this.chart.renderer.button(e,null,null,function(){t.drillUp()},a,n&&n.hover,n&&n.select).addClass(\"highcharts-drillup-button\").attr({align:s.position.align,zIndex:7}).add().align(s.position,!1,s.relativeTo||\"plotBox\"))},buildKDTree:i,drawLegendSymbol:e.LegendSymbolMixin.drawRectangle,getExtremes:function(){g.prototype.getExtremes.call(this,this.colorValueData),this.valueMin=this.dataMin,this.valueMax=this.dataMax,g.prototype.getExtremes.call(this)},getExtremesFromAll:!0,bindAxes:function(){var t={endOnTick:!1,gridLineWidth:0,lineWidth:0,min:0,dataMin:0,minPadding:0,max:100,dataMax:100,maxPadding:0,startOnTick:!1,title:null,tickPositions:[]};g.prototype.bindAxes.call(this),e.extend(this.yAxis.options,t),e.extend(this.xAxis.options,t)},utils:{recursive:y,reduce:_}},{getClassName:function(){var t=e.Point.prototype.getClassName.call(this),a=this.series,n=a.options;return this.node.level<=a.nodeMap[a.rootNode].level?t+=\" highcharts-above-level\":this.node.isLeaf||f(n.interactByLeaf,!n.allowDrillToNode)?this.node.isLeaf||(t+=\" highcharts-internal-node\"):t+=\" highcharts-internal-node-interactive\",t},isValid:function(){return this.id||d(this.value)},setState:function(t){e.Point.prototype.setState.call(this,t),this.graphic&&this.graphic.attr({zIndex:\"hover\"===t?1:0})},setVisible:n.pie.prototype.pointClass.prototype.setVisible})}(e,function(e){var t=e.each,a=e.extend,n=e.isArray,s=e.isObject,o=e.isNumber,r=e.merge,i=e.pick,l=e.reduce;return{getColor:function(t,a){var n,s,o,r,l=a.index,c=a.mapOptionsToLevel,u=a.parentColor,p=a.parentColorIndex,d=a.series,h=a.colors,m=a.siblings,f=d.points;return t&&(f=f[t.i],t=c[t.level]||{},(n=f&&t.colorByPoint)&&(o=f.index%(h?h.length:d.chart.options.chart.colorCount),s=h&&h[o]),h=f&&f.options.color,n=t&&t.color,(c=u)&&(c=(c=t&&t.colorVariation)&&\"brightness\"===c.key?e.color(u).brighten(l/m*c.to).get():u),n=i(h,n,s,c,d.color),r=i(f&&f.options.colorIndex,t&&t.colorIndex,o,p,a.colorIndex)),{color:n,colorIndex:r}},getLevelOptions:function(e){var t,i,c,u,p=null;if(s(e))for(p={},c=o(e.from)?e.from:1,u=e.levels,i={},t=s(e.defaults)?e.defaults:{},n(u)&&(i=l(u,function(e,n){var i,l;return s(n)&&o(n.level)&&(i=\"boolean\"==typeof(l=r({},n)).levelIsConstant?l.levelIsConstant:t.levelIsConstant,delete l.levelIsConstant,delete l.level,n=n.level+(i?0:c-1),s(e[n])?a(e[n],l):e[n]=l),e},{})),u=o(e.to)?e.to:1,e=0;e<=u;e++)p[e]=r({},t,s(i[e])?i[e]:{});return p},setTreeValues:function e(n,s){var o=s.before,r=s.idRoot,l=s.mapIdToNode[r],c=s.points[n.i],u=c&&c.options||{},p=0,d=[];return a(n,{levelDynamic:n.level-(\"boolean\"!=typeof s.levelIsConstant||s.levelIsConstant?0:l.level),name:i(c&&c.name,\"\"),visible:r===n.id||\"boolean\"==typeof s.visible&&s.visible}),\"function\"==typeof o&&(n=o(n,s)),t(n.children,function(t,o){var r=a({},s);a(r,{index:o,siblings:n.children.length,visible:n.visible}),t=e(t,r),d.push(t),t.visible&&(p+=t.val)}),n.visible=0<p||n.visible,o=i(u.value,p),a(n,{children:d,childrenTotal:p,isLeaf:n.visible&&!p,val:o}),n},updateRootId:function(e){var t;return s(e)&&(t=s(e.options)?e.options:{},t=i(e.rootNode,t.rootId,\"\"),s(e.userOptions)&&(e.userOptions.rootId=t),e.rootNode=t),t}}}(e))})},2124:function(e,t){!function(t){\"object\"==typeof e&&e.exports?e.exports=t:t(Highcharts)}(function(e){!function(e){var t,a=e.addEvent,n=e.Axis,s=e.Chart,o=e.color,r=e.each,i=e.extend,l=e.isNumber,c=e.Legend,u=e.LegendSymbolMixin,p=e.noop,d=e.merge,h=e.pick;e.ColorAxis||(t=e.ColorAxis=function(){this.init.apply(this,arguments)},i(t.prototype,n.prototype),i(t.prototype,{defaultColorAxisOptions:{lineWidth:0,minPadding:0,maxPadding:0,gridLineWidth:1,tickPixelInterval:72,startOnTick:!0,endOnTick:!0,offset:0,marker:{animation:{duration:50},width:.01,color:\"#999999\"},labels:{overflow:\"justify\",rotation:0},minColor:\"#e6ebf5\",maxColor:\"#003399\",tickLength:5,showInLegend:!0},keepProps:[\"legendGroup\",\"legendItemHeight\",\"legendItemWidth\",\"legendItem\",\"legendSymbol\"].concat(n.prototype.keepProps),init:function(e,t){var a,s=\"vertical\"!==e.options.legend.layout;this.coll=\"colorAxis\",a=d(this.defaultColorAxisOptions,{side:s?2:1,reversed:!s},t,{opposite:!s,showEmpty:!1,title:null,visible:e.options.legend.enabled}),n.prototype.init.call(this,e,a),t.dataClasses&&this.initDataClasses(t),this.initStops(),this.horiz=s,this.zoomEnabled=!1,this.defaultLegendLength=200},initDataClasses:function(e){var t,a=this.chart,n=0,s=a.options.chart.colorCount,i=this.options,l=e.dataClasses.length;this.dataClasses=t=[],this.legendItems=[],r(e.dataClasses,function(e,r){e=d(e),t.push(e),e.color||(\"category\"===i.dataClassColor?(r=a.options.colors,s=r.length,e.color=r[n],e.colorIndex=n,++n===s&&(n=0)):e.color=o(i.minColor).tweenTo(o(i.maxColor),2>l?.5:r/(l-1)))})},setTickPositions:function(){if(!this.dataClasses)return n.prototype.setTickPositions.call(this)},initStops:function(){this.stops=this.options.stops||[[0,this.options.minColor],[1,this.options.maxColor]],r(this.stops,function(e){e.color=o(e[1])})},setOptions:function(e){n.prototype.setOptions.call(this,e),this.options.crosshair=this.options.marker},setAxisSize:function(){var e,t,a=this.legendSymbol,n=this.chart,s=n.options.legend||{};a?(this.left=s=a.attr(\"x\"),this.top=e=a.attr(\"y\"),this.width=t=a.attr(\"width\"),this.height=a=a.attr(\"height\"),this.right=n.chartWidth-s-t,this.bottom=n.chartHeight-e-a,this.len=this.horiz?t:a,this.pos=this.horiz?s:e):this.len=(this.horiz?s.symbolWidth:s.symbolHeight)||this.defaultLegendLength},normalizedValue:function(e){return this.isLog&&(e=this.val2lin(e)),1-(this.max-e)/(this.max-this.min||1)},toColor:function(e,t){var a,n,s,o,r=this.stops,i=this.dataClasses;if(i){for(o=i.length;o--;)if(a=(s=i[o]).from,r=s.to,(void 0===a||e>=a)&&(void 0===r||e<=r)){n=s.color,t&&(t.dataClass=o,t.colorIndex=s.colorIndex);break}}else{for(e=this.normalizedValue(e),o=r.length;o--&&!(e>r[o][0]););a=r[o]||r[o+1],e=1-((r=r[o+1]||a)[0]-e)/(r[0]-a[0]||1),n=a.color.tweenTo(r.color,e)}return n},getOffset:function(){var e=this.legendGroup,t=this.chart.axisOffset[this.side];e&&(this.axisParent=e,n.prototype.getOffset.call(this),this.added||(this.added=!0,this.labelLeft=0,this.labelRight=this.width),this.chart.axisOffset[this.side]=t)},setLegendColor:function(){var e,t=this.reversed;e=t?1:0,t=t?0:1,e=this.horiz?[e,0,t,0]:[0,t,0,e],this.legendColor={linearGradient:{x1:e[0],y1:e[1],x2:e[2],y2:e[3]},stops:this.stops}},drawLegendSymbol:function(e,t){var a=e.padding,n=e.options,s=this.horiz,o=h(n.symbolWidth,s?this.defaultLegendLength:12),r=h(n.symbolHeight,s?12:this.defaultLegendLength),i=h(n.labelPadding,s?16:30);n=h(n.itemDistance,10);this.setLegendColor(),t.legendSymbol=this.chart.renderer.rect(0,e.baseline-11,o,r).attr({zIndex:1}).add(t.legendGroup),this.legendItemWidth=o+a+(s?n:i),this.legendItemHeight=r+a+(s?i:0)},setState:function(e){r(this.series,function(t){t.setState(e)})},visible:!0,setVisible:p,getSeriesExtremes:function(){var e=this.series,t=e.length;for(this.dataMin=1/0,this.dataMax=-1/0;t--;)e[t].getExtremes(),void 0!==e[t].valueMin&&(this.dataMin=Math.min(this.dataMin,e[t].valueMin),this.dataMax=Math.max(this.dataMax,e[t].valueMax))},drawCrosshair:function(e,t){var a,s=t&&t.plotX,o=t&&t.plotY,r=this.pos,i=this.len;t&&((a=this.toPixels(t[t.series.colorKey]))<r?a=r-2:a>r+i&&(a=r+i+2),t.plotX=a,t.plotY=this.len-a,n.prototype.drawCrosshair.call(this,e,t),t.plotX=s,t.plotY=o,this.cross&&!this.cross.addedToColorAxis&&this.legendGroup&&(this.cross.addClass(\"highcharts-coloraxis-marker\").add(this.legendGroup),this.cross.addedToColorAxis=!0,this.cross.attr({fill:this.crosshair.color})))},getPlotLinePath:function(e,t,a,s,o){return l(o)?this.horiz?[\"M\",o-4,this.top-6,\"L\",o+4,this.top-6,o,this.top,\"Z\"]:[\"M\",this.left,o,\"L\",this.left-6,o+6,this.left-6,o-6,\"Z\"]:n.prototype.getPlotLinePath.call(this,e,t,a,s)},update:function(e,t){var a=this.chart,s=a.legend;r(this.series,function(e){e.isDirtyData=!0}),e.dataClasses&&s.allItems&&(r(s.allItems,function(e){e.isDataClass&&e.legendGroup&&e.legendGroup.destroy()}),a.isDirtyLegend=!0),a.options[this.coll]=d(this.userOptions,e),n.prototype.update.call(this,e,t),this.legendItem&&(this.setLegendColor(),s.colorizeItem(this,!0))},remove:function(){this.legendItem&&this.chart.legend.destroyItem(this),n.prototype.remove.call(this)},getDataClassLegendSymbols:function(){var t,a=this,n=this.chart,s=this.legendItems,o=n.options.legend,l=o.valueDecimals,c=o.valueSuffix||\"\";return s.length||r(this.dataClasses,function(o,d){var h=!0,m=o.from,f=o.to;t=\"\",void 0===m?t=\"< \":void 0===f&&(t=\"> \"),void 0!==m&&(t+=e.numberFormat(m,l)+c),void 0!==m&&void 0!==f&&(t+=\" - \"),void 0!==f&&(t+=e.numberFormat(f,l)+c),s.push(i({chart:n,name:t,options:{},drawLegendSymbol:u.drawRectangle,visible:!0,setState:p,isDataClass:!0,setVisible:function(){h=this.visible=!h,r(a.series,function(e){r(e.points,function(e){e.dataClass===d&&e.setVisible(h)})}),n.legend.colorizeItem(this,h)}},o))}),s},name:\"\"}),r([\"fill\",\"stroke\"],function(t){e.Fx.prototype[t+\"Setter\"]=function(){this.elem.attr(t,o(this.start).tweenTo(o(this.end),this.pos),null,!0)}}),a(s,\"afterGetAxes\",function(){var e=this.options.colorAxis;this.colorAxis=[],e&&new t(this,e)}),a(c,\"afterGetAllItems\",function(t){var a=[],n=this.chart.colorAxis[0];for(n&&n.options&&n.options.showInLegend&&(n.options.dataClasses?a=n.getDataClassLegendSymbols():a.push(n),r(n.series,function(a){e.erase(t.allItems,a)})),n=a.length;n--;)t.allItems.unshift(a[n])}),a(c,\"afterColorizeItem\",function(e){e.visible&&e.item.legendColor&&e.item.legendSymbol.attr({fill:e.item.legendColor})}),a(c,\"afterUpdate\",function(e,t,a){this.chart.colorAxis[0]&&this.chart.colorAxis[0].update({},a)}))}(e),function(e){var t=e.defined,a=e.each,n=e.noop,s=e.seriesTypes;e.colorPointMixin={isValid:function(){return null!==this.value&&1/0!==this.value&&-1/0!==this.value},setVisible:function(e){var t=this,n=e?\"show\":\"hide\";a([\"graphic\",\"dataLabel\"],function(e){t[e]&&t[e][n]()})},setState:function(t){e.Point.prototype.setState.call(this,t),this.graphic&&this.graphic.attr({zIndex:\"hover\"===t?1:0})}},e.colorSeriesMixin={pointArrayMap:[\"value\"],axisTypes:[\"xAxis\",\"yAxis\",\"colorAxis\"],optionalAxis:\"colorAxis\",trackerGroups:[\"group\",\"markerGroup\",\"dataLabelsGroup\"],getSymbol:n,parallelArrays:[\"x\",\"y\",\"value\"],colorKey:\"value\",pointAttribs:s.column.prototype.pointAttribs,translateColors:function(){var e=this,t=this.options.nullColor,n=this.colorAxis,s=this.colorKey;a(this.data,function(a){var o=a[s];(o=a.options.color||(a.isNull?t:n&&void 0!==o?n.toColor(o,a):a.color||e.color))&&(a.color=o)})},colorAttribs:function(e){var a={};return t(e.color)&&(a[this.colorProp||\"fill\"]=e.color),a}}}(e),function(e){var t=e.colorPointMixin,a=e.each,n=e.merge,s=e.noop,o=e.pick,r=e.Series,i=e.seriesType,l=e.seriesTypes;i(\"heatmap\",\"scatter\",{animation:!1,borderWidth:0,nullColor:\"#f7f7f7\",dataLabels:{formatter:function(){return this.point.value},inside:!0,verticalAlign:\"middle\",crop:!1,overflow:!1,padding:0},marker:null,pointRange:null,tooltip:{pointFormat:\"{point.x}, {point.y}: {point.value}<br/>\"},states:{hover:{halo:!1,brightness:.2}}},n(e.colorSeriesMixin,{pointArrayMap:[\"y\",\"value\"],hasPointSpecificOptions:!0,getExtremesFromAll:!0,directTouch:!0,init:function(){var e;l.scatter.prototype.init.apply(this,arguments),(e=this.options).pointRange=o(e.pointRange,e.colsize||1),this.yAxis.axisPointRange=e.rowsize||1},translate:function(){var e=this.options,t=this.xAxis,n=this.yAxis,s=e.pointPadding||0,r=function(e,t,a){return Math.min(Math.max(t,e),a)};this.generatePoints(),a(this.points,function(a){var i=(e.colsize||1)/2,l=(e.rowsize||1)/2,c=r(Math.round(t.len-t.translate(a.x-i,0,1,0,1)),-t.len,2*t.len),u=(i=r(Math.round(t.len-t.translate(a.x+i,0,1,0,1)),-t.len,2*t.len),r(Math.round(n.translate(a.y-l,0,1,0,1)),-n.len,2*n.len)),p=(l=r(Math.round(n.translate(a.y+l,0,1,0,1)),-n.len,2*n.len),o(a.pointPadding,s));a.plotX=a.clientX=(c+i)/2,a.plotY=(u+l)/2,a.shapeType=\"rect\",a.shapeArgs={x:Math.min(c,i)+p,y:Math.min(u,l)+p,width:Math.abs(i-c)-2*p,height:Math.abs(l-u)-2*p}}),this.translateColors()},drawPoints:function(){l.column.prototype.drawPoints.call(this),a(this.points,function(e){e.graphic.attr(this.colorAttribs(e))},this)},animate:s,getBox:s,drawLegendSymbol:e.LegendSymbolMixin.drawRectangle,alignDataLabel:l.column.prototype.alignDataLabel,getExtremes:function(){r.prototype.getExtremes.call(this,this.valueData),this.valueMin=this.dataMin,this.valueMax=this.dataMax,r.prototype.getExtremes.call(this)}}),e.extend({haloPath:function(e){if(!e)return[];var t=this.shapeArgs;return[\"M\",t.x-e,t.y-e,\"L\",t.x-e,t.y+t.height+e,t.x+t.width+e,t.y+t.height+e,t.x+t.width+e,t.y-e,\"Z\"]}},t))}(e)})},2252:function(e,t,a){\"use strict\";a.r(t);var n=a(0),s=a.n(n),o=a(39),r=a(25),i=a(28),l=a(109),c=a(40),u=a(42),p=a(32),d=a(80),h=a(11),m=a.n(h),f=a(587),g=a(2264),b=a(2245),v=a(2259),_=a(335),y=a(1),E=a.n(y),w=a(2244),k=a(2),A=a.n(k),C=a(461),x=a(578),O=a(30),S=a(41),P=a(2120),N=a(115),j=a(140),M=a(1971),I=a(23),T=function(){function e(e,t){for(var a=0;a<t.length;a++){var n=t[a];n.enumerable=n.enumerable||!1,n.configurable=!0,\"value\"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,a,n){return a&&e(t.prototype,a),n&&e(t,n),t}}();var R=function(e){function t(e){!function(e,t){if(!(e instanceof t))throw new TypeError(\"Cannot call a class as a function\")}(this,t);var a=function(e,t){if(!e)throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\");return!t||\"object\"!=typeof t&&\"function\"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return a.state={isIssueAssetModalVisible:!1,create:{symbol:\"\",name:\"\",description:\"\",max_supply:1e15,precision:4},issue:{amount:0,to:\"\",to_id:\"\",asset_id:\"\",symbol:\"\"},errors:{symbol:null},isValid:!1,searchTerm:\"\"},a._searchAccounts=Object(_.a)(a._searchAccounts,150),a.showIssueAssetModal=a.showIssueAssetModal.bind(a),a.hideIssueAssetModal=a.hideIssueAssetModal.bind(a),a}return function(e,t){if(\"function\"!=typeof t&&null!==t)throw new TypeError(\"Super expression must either be null or a function, not \"+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,s.a.Component),T(t,[{key:\"showIssueAssetModal\",value:function(){this.setState({isIssueAssetModalVisible:!0})}},{key:\"hideIssueAssetModal\",value:function(){this.setState({isIssueAssetModalVisible:!1})}},{key:\"_checkAssets\",value:function(e,t){if(!this.props.account.get(\"assets\").size){var a=e.sort(function(e,t){return e.symbol>t.symbol?1:e.symbol<t.symbol?-1:0}).last();0===e.size||t?(C.a.getAssetList.defer(\"A\",100),this.setState({assetsFetched:100})):e.size>=this.state.assetsFetched&&(C.a.getAssetList.defer(a.symbol,100),this.setState({assetsFetched:this.state.assetsFetched+99}))}}},{key:\"componentWillReceiveProps\",value:function(e){this._checkAssets(e.assets)}},{key:\"componentWillMount\",value:function(){this._checkAssets(this.props.assets,!0)}},{key:\"_onIssueInput\",value:function(e,t){var a=t.target.id,n=this.state.issue;if(\"to\"===a){this._searchAccounts(t.target.value),n.to=t.target.value;var s=this.props.searchAccounts.findEntry(function(e){return e===t.target.value});n.to_id=s?s[0]:null}else n[e]=t.target.value;this.setState({issue:n})}},{key:\"_searchAccounts\",value:function(e){o.a.accountSearch(e)}},{key:\"_issueButtonClick\",value:function(e,t,a){a.preventDefault();var n=this.state.issue;n.asset_id=e,n.symbol=t,this.setState({issue:n}),this.showIssueAssetModal()}},{key:\"_editButtonClick\",value:function(e,t,a){a.preventDefault(),this.props.history.push(\"/account/\"+t+\"/update-asset/\"+e)}},{key:\"_createButtonClick\",value:function(e){this.props.history.push(\"/account/\"+e+\"/create-asset\")}},{key:\"render\",value:function(){var e=this,t=this.props,a=t.account,n=t.account_name,o=t.assets,r=t.assetsList,i=!0;if(!a)return s.a.createElement(S.a,{type:\"circle\"});if(a.notFound&&(i=!1),!i)return s.a.createElement(\"div\",{className:\"grid-block\"},s.a.createElement(\"h5\",null,s.a.createElement(A.a,{component:\"h5\",content:\"account.errors.not_found\",name:n})));r.length&&(o=o.clear(),r.forEach(function(e){e&&(o=o.set(e.get(\"id\"),e.toJS()))}));var l=o.filter(function(e){return e.issuer===a.get(\"id\")}).sort(function(e,t){return parseInt(e.id.substring(4,e.id.length),10)-parseInt(t.id.substring(4,t.id.length),10)}).map(function(t){var a=N.a.parseDescription(t.options.description),o=a.short_name?a.short_name:a.main;o.length>100&&(o=o.substr(0,100)+\"...\");var r=e.props.getDynamicObject(t.dynamic_asset_data_id);return s.a.createElement(\"tr\",{key:t.symbol},s.a.createElement(\"td\",{style:{textAlign:\"left\"}},s.a.createElement(w.a,{to:\"/asset/\"+t.symbol},t.symbol)),s.a.createElement(\"td\",{style:{textAlign:\"left\"}},\"bitasset\"in t?t.bitasset.is_prediction_market?s.a.createElement(A.a,{content:\"account.user_issued_assets.pm\"}):s.a.createElement(A.a,{content:\"account.user_issued_assets.mpa\"}):\"User Issued Asset\"),s.a.createElement(\"td\",{style:{textAlign:\"right\"}},r?s.a.createElement(O.a,{hide_asset:!0,amount:parseInt(r.get(\"current_supply\"),10),asset:t.id}):null),s.a.createElement(\"td\",{style:{textAlign:\"right\"}},s.a.createElement(O.a,{hide_asset:!0,amount:parseInt(t.options.max_supply,10),asset:t.id})),s.a.createElement(\"td\",null,t.bitasset_data_id?null:s.a.createElement(\"a\",{onClick:e._issueButtonClick.bind(e,t.id,t.symbol)},s.a.createElement(I.a,{name:\"cross-circle\",className:\"rotate45\"}))),s.a.createElement(\"td\",null,s.a.createElement(\"a\",{onClick:e._editButtonClick.bind(e,t.symbol,n)},s.a.createElement(I.a,{name:\"dashboard\"}))))}).toArray();return s.a.createElement(\"div\",{className:\"grid-content app-tables no-padding\",ref:\"appTables\"},s.a.createElement(\"div\",{className:\"content-block small-12\"},s.a.createElement(\"div\",{className:\"tabs-container generic-bordered-box\"},s.a.createElement(M.b,{segmented:!1,setting:\"issuedAssetsTab\",className:\"account-tabs\",tabsClass:\"account-overview bordered-header content-block\",contentClass:\"padding\"},s.a.createElement(M.a,{title:\"account.user_issued_assets.issued_assets\"},s.a.createElement(\"div\",{className:\"content-block\"},s.a.createElement(\"table\",{className:\"table dashboard-table\"},s.a.createElement(\"thead\",null,s.a.createElement(\"tr\",null,s.a.createElement(\"th\",{style:{textAlign:\"left\"}},s.a.createElement(A.a,{content:\"account.user_issued_assets.symbol\"})),s.a.createElement(\"th\",{style:{textAlign:\"left\"}},s.a.createElement(A.a,{content:\"explorer.asset.summary.asset_type\"})),s.a.createElement(A.a,{component:\"th\",content:\"markets.supply\",style:{textAlign:\"right\"}}),s.a.createElement(\"th\",{style:{textAlign:\"right\"}},s.a.createElement(A.a,{content:\"account.user_issued_assets.max_supply\"})),s.a.createElement(\"th\",{style:{textAlign:\"center\"}},s.a.createElement(A.a,{content:\"transaction.trxTypes.asset_issue\"})),s.a.createElement(\"th\",{style:{textAlign:\"center\"}},s.a.createElement(A.a,{content:\"transaction.trxTypes.asset_update\"})))),s.a.createElement(\"tbody\",null,l))),s.a.createElement(\"div\",{className:\"content-block\"},s.a.createElement(\"button\",{className:\"button\",onClick:this._createButtonClick.bind(this,n)},s.a.createElement(A.a,{content:\"transaction.trxTypes.asset_create\"})))))),s.a.createElement(P.a,{visible:this.state.isIssueAssetModalVisible,hideModal:this.hideIssueAssetModal,showModal:this.showIssueAssetModal,asset_to_issue:this.state.issue.asset_id})))}}]),t}();R.defaultProps={symbol:\"\",name:\"\",description:\"\",max_supply:0,precision:0},R.propTypes={symbol:E.a.string.isRequired},R=Object(j.a)(R,{propNames:[\"assetsList\"],asList:!0,withDynamic:!0});var B=Object(p.a)(R,{listenTo:function(){return[x.a]},getProps:function(e){var t=Object(h.Map)(),a=Object(h.List)();return e.account.get(\"assets\",[]).size?e.account.get(\"assets\",[]).forEach(function(e){a=a.push(e)}):t=x.a.getState().assets,{assets:t,assetsList:a}}}),D=a(3),L=a.n(D),V=a(576),F=a(14),q=a(4),U=a(5),W=a.n(U),z=a(1978),J=a(163),K=a.n(J),G=a(1969),Z=a(182),H=a.n(Z),Q=a(154),Y=a(7),X=function(){function e(e,t){for(var a=0;a<t.length;a++){var n=t[a];n.enumerable=n.enumerable||!1,n.configurable=!0,\"value\"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,a,n){return a&&e(t.prototype,a),n&&e(t,n),t}}();function $(e,t){if(!(e instanceof t))throw new TypeError(\"Cannot call a class as a function\")}function ee(e,t){if(!e)throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\");return!t||\"object\"!=typeof t&&\"function\"!=typeof t?e:t}function te(e,t){if(\"function\"!=typeof t&&null!==t)throw new TypeError(\"Super expression must either be null or a function, not \"+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var ae=new K.a(H.a.GRAPHENE_MAX_SHARE_SUPPLY),ne=function(e){function t(e){$(this,t);var a=ee(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return a.state={backingAsset:e.backingAsset.get(\"symbol\"),error:null},a}return te(t,s.a.Component),X(t,[{key:\"_onInputBackingAsset\",value:function(e){this.props.disableBackingAssetChange?this.props.disabledBackingAssetChangeCallback():this.setState({backingAsset:e.toUpperCase(),error:null})}},{key:\"_onFoundBackingAsset\",value:function(e){if(e){var t=e.get(\"bitasset\")&&q.ChainStore.getAsset(e.getIn([\"bitasset\",\"options\",\"short_backing_asset\"])),a=t&&t.get(\"bitasset\")&&q.ChainStore.getAsset(t.getIn([\"bitasset\",\"options\",\"short_backing_asset\"]));a&&\"1.3.0\"!==a?(this.setState({error:W.a.translate(\"account.user_issued_assets.error_too_deep\")}),this.props.onUpdate(\"invalid\",!0)):e.getIn([\"bitasset\",\"is_prediction_market\"])?(this.setState({error:W.a.translate(\"account.user_issued_assets.error_invalid\")}),this.props.onUpdate(\"invalid\",!0)):this.props.isPredictionMarket&&e.get(\"precision\")!==parseInt(this.props.assetPrecision,10)?(this.setState({error:W.a.translate(\"account.user_issued_assets.error_precision\",{asset:this.props.assetSymbol})}),this.props.onUpdate(\"invalid\",!0)):(this.props.onUpdate(\"short_backing_asset\",e.get(\"id\")),this.props.onUpdate(\"invalid\",!1))}else this.props.onUpdate(\"invalid\",!0)}},{key:\"render\",value:function(){var e=this.props.bitasset_opts,t=this.state.error;return s.a.createElement(\"div\",{className:\"small-12 grid-content\"},s.a.createElement(\"label\",null,s.a.createElement(A.a,{content:\"account.user_issued_assets.feed_lifetime_sec\"}),s.a.createElement(\"input\",{type:\"number\",value:e.feed_lifetime_sec/60,onChange:this.props.onUpdate.bind(this,\"feed_lifetime_sec\")})),s.a.createElement(\"label\",null,s.a.createElement(A.a,{content:\"account.user_issued_assets.minimum_feeds\"}),s.a.createElement(\"input\",{type:\"number\",value:e.minimum_feeds,onChange:this.props.onUpdate.bind(this,\"minimum_feeds\")})),s.a.createElement(\"label\",null,s.a.createElement(A.a,{content:\"account.user_issued_assets.force_settlement_delay_sec\"}),s.a.createElement(\"input\",{type:\"number\",value:e.force_settlement_delay_sec/60,onChange:this.props.onUpdate.bind(this,\"force_settlement_delay_sec\")})),s.a.createElement(\"label\",null,s.a.createElement(A.a,{content:\"account.user_issued_assets.force_settlement_offset_percent\"}),s.a.createElement(\"input\",{type:\"number\",value:e.force_settlement_offset_percent/H.a.GRAPHENE_1_PERCENT,onChange:this.props.onUpdate.bind(this,\"force_settlement_offset_percent\")})),s.a.createElement(\"label\",null,s.a.createElement(A.a,{content:\"account.user_issued_assets.maximum_force_settlement_volume\"}),s.a.createElement(\"input\",{type:\"number\",value:e.maximum_force_settlement_volume/H.a.GRAPHENE_1_PERCENT,onChange:this.props.onUpdate.bind(this,\"maximum_force_settlement_volume\")})),s.a.createElement(\"div\",{className:\"grid-block no-margin small-12\"},s.a.createElement(z.a,{label:\"account.user_issued_assets.backing\",onChange:this._onInputBackingAsset.bind(this),asset:this.state.backingAsset,assetInput:this.state.backingAsset,tabIndex:1,style:{width:\"100%\",paddingRight:\"10px\"},onFound:this._onFoundBackingAsset.bind(this)}),t?s.a.createElement(\"div\",{className:\"content-block has-error\"},t):null))}}]),t}();ne.propTypes={backingAsset:c.a.ChainAsset.isRequired,isUpdate:E.a.bool},ne.defaultProps={isUpdate:!1},ne=Object(u.a)(ne);var se=function(e){function t(e){$(this,t);var a=ee(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return a.state=a.resetState(e),a}return te(t,s.a.Component),X(t,[{key:\"resetState\",value:function(e){F.a.get_asset_precision(4),F.a.get_asset_precision(e.core.get(\"precision\"));var t=this._getPermissions({isBitAsset:!1}),a=t.flagBooleans,n=t.permissionBooleans;q.ChainStore.getAsset(\"1.3.0\").get(\"symbol\");return{update:{symbol:\"\",precision:4,max_supply:1e5,max_market_fee:0,market_fee_percent:0,description:{main:\"\"}},errors:{max_supply:null},isValid:!0,flagBooleans:a,permissionBooleans:n,isBitAsset:!1,is_prediction_market:!1,core_exchange_rate:{quote:{asset_id:null,amount:1},base:{asset_id:\"1.3.0\",amount:1}},bitasset_opts:{feed_lifetime_sec:86400,minimum_feeds:7,force_settlement_delay_sec:86400,force_settlement_offset_percent:1*H.a.GRAPHENE_1_PERCENT,maximum_force_settlement_volume:20*H.a.GRAPHENE_1_PERCENT,short_backing_asset:\"1.3.0\"},marketInput:\"\"}}},{key:\"_getPermissions\",value:function(e){return{flagBooleans:N.a.getFlagBooleans(0,e.isBitAsset),permissionBooleans:N.a.getFlagBooleans(\"all\",e.isBitAsset)}}},{key:\"_createAsset\",value:function(e){e.preventDefault();var t=this.state,a=t.update,n=t.flagBooleans,s=t.permissionBooleans,o=t.core_exchange_rate,r=t.isBitAsset,i=t.is_prediction_market,l=t.bitasset_opts,c=this.props.account,u=N.a.getFlags(n,r),p=N.a.getPermissions(s,r);this.state.marketInput!==a.description.market&&(a.description.market=\"\");var d=JSON.stringify(a.description);C.a.createAsset(c.get(\"id\"),a,u,p,o,r,i,l,d).then(function(e){console.log(\"... AssetActions.createAsset(account_id, update)\",c.get(\"id\"),a,u,p)})}},{key:\"_hasChanged\",value:function(){return!F.a.are_equal_shallow(this.state,this.resetState(this.props))}},{key:\"_reset\",value:function(e){e.preventDefault(),this.setState(this.resetState(this.props))}},{key:\"_forcePositive\",value:function(e){return parseFloat(e)<0?\"0\":e}},{key:\"_onUpdateDescription\",value:function(e,t){var a=this.state.update,n=!0;switch(e){case\"condition\":if(t.target.value.length>60)return void(n=!1);a.description[e]=t.target.value;break;case\"short_name\":if(t.target.value.length>32)return void(n=!1);a.description[e]=t.target.value;break;case\"market\":a.description[e]=t;break;case\"visible\":a.description[e]=!a.description[e];break;default:a.description[e]=t.target.value}n&&(this.forceUpdate(),this._validateEditFields(a))}},{key:\"onChangeBitAssetOpts\",value:function(e,t){var a=this.state,n=a.bitasset_opts,s=a.errors;switch(e){case\"force_settlement_offset_percent\":case\"maximum_force_settlement_volume\":n[e]=parseFloat(t.target.value)*H.a.GRAPHENE_1_PERCENT;break;case\"minimum_feeds\":n[e]=parseInt(t.target.value,10);break;case\"feed_lifetime_sec\":case\"force_settlement_delay_sec\":console.log(t.target.value,parseInt(60*parseFloat(t.target.value),10)),n[e]=parseInt(60*parseFloat(t.target.value),10);break;case\"short_backing_asset\":n[e]=t;break;case\"invalid\":s.invalid_bitasset=t;break;default:n[e]=t.target.value}var o=!s.symbol&&!s.max_supply&&!s.invalid_bitasset;this.setState({isValid:o,errors:s})}},{key:\"_onUpdateInput\",value:function(e,t){var a=this.state,n=a.update,s=a.errors,o=!1,r=F.a.get_asset_precision(this.state.update.precision),i=t.target,l=i.selectionStart,c=i.value;switch(e){case\"market_fee_percent\":n[e]=this._forcePositive(i.value);break;case\"max_market_fee\":if(new K.a(c).times(r).gt(ae))return s.max_market_fee=\"The number you tried to enter is too large\",this.setState({errors:s});i.value=F.a.limitByPrecision(i.value,this.state.update.precision),n[e]=i.value;break;case\"precision\":n[e]=this._forcePositive(i.value);break;case\"max_supply\":o=!0,new RegExp(/[[:digit:]]/).test(i.value)||(i.value=i.value.replace(/[^0-9.]/g,\"\")),\".\"==i.value.charAt(0)&&(i.value=\"0.\"),i.value.charAt(i.value.length)!=i.value.search(\".\")&&i.value.substr(1),i.value=F.a.limitByPrecision(i.value,this.state.update.precision),n[e]=i.value;break;case\"symbol\":o=!0;var u=i.value.toUpperCase(),p=new RegExp(\"^[.A-Z0-9]+$\");if(\"\"!==u&&!p.test(u))break;q.ChainStore.getAsset(u),n[e]=this._forcePositive(u);break;default:n[e]=i.value}this.setState({update:n},function(){if(o){var t=l-(c.length-n[e].length);i.setSelectionRange(t,t)}}),this._validateEditFields(n)}},{key:\"_validateEditFields\",value:function(e){var t=this.state.errors;t.max_supply=null,t.symbol=q.ChainValidation.is_valid_symbol_error(e.symbol),q.ChainStore.getAsset(e.symbol)&&(t.symbol=W.a.translate(\"account.user_issued_assets.exists\"));try{t.max_supply=e.max_supply<=0?W.a.translate(\"account.user_issued_assets.max_positive\"):new K.a(e.max_supply).times(Math.pow(10,e.precision)).gt(ae)?W.a.translate(\"account.user_issued_assets.too_large\"):null}catch(e){console.log(\"err:\",e),t.max_supply=W.a.translate(\"account.user_issued_assets.too_large\")}var a=!t.symbol&&!t.max_supply&&!t.invalid_bitasset;this.setState({isValid:a,errors:t})}},{key:\"_onFlagChange\",value:function(e){var t=this.state.flagBooleans;t[e]=!t[e],this.setState({flagBooleans:t})}},{key:\"_onPermissionChange\",value:function(e){var t=this.state.permissionBooleans;t[e]=!t[e],this.setState({permissionBooleans:t})}},{key:\"_onInputCoreAsset\",value:function(e,t){\"quote\"===e?this.setState({quoteAssetInput:t}):\"base\"===e&&this.setState({baseAssetInput:t})}},{key:\"_onFoundCoreAsset\",value:function(e,t){if(t){var a=this.state.core_exchange_rate;a[e].asset_id=t.get(\"id\"),this.setState({core_exchange_rate:a}),this._validateEditFields({max_supply:this.state.max_supply,core_exchange_rate:a})}}},{key:\"_onInputMarket\",value:function(e){this.setState({marketInput:e})}},{key:\"_onFoundMarketAsset\",value:function(e){e&&this._onUpdateDescription(\"market\",e.get(\"symbol\"))}},{key:\"_onCoreRateChange\",value:function(e,t){var a=void 0,n=void 0;if(\"quote\"===e)a=F.a.limitByPrecision(t.target.value,this.state.update.precision),n=null;else{if(!(t&&\"amount\"in t))return;a=\"\"==t.amount?\"0\":F.a.limitByPrecision(t.amount.toString().replace(/,/g,\"\"),this.props.core.get(\"precision\")),n=t.asset.get(\"id\")}this.state.core_exchange_rate[e]={amount:a,asset_id:n},this.forceUpdate()}},{key:\"_onToggleBitAsset\",value:function(){this.state.update;this.state.isBitAsset=!this.state.isBitAsset,this.state.isBitAsset||(this.state.is_prediction_market=!1);var e=this._getPermissions(this.state),t=e.flagBooleans,a=e.permissionBooleans;this.state.flagBooleans=t,this.state.permissionBooleans=a,this.forceUpdate()}},{key:\"_onTogglePM\",value:function(){this.state.is_prediction_market=!this.state.is_prediction_market,this.state.update.precision=this.props.core.get(\"precision\"),this.state.core_exchange_rate.base.asset_id=this.props.core.get(\"id\"),this.forceUpdate()}},{key:\"render\",value:function(){var e=this.props,t=e.globalObject,a=e.core,n=this.state,o=n.errors,r=n.isValid,i=n.update,l=n.flagBooleans,c=n.permissionBooleans,u=n.core_exchange_rate,p=n.is_prediction_market,d=n.isBitAsset,h=n.bitasset_opts,m=i.symbol.length,f=\"N/A\";3===m?f=s.a.createElement(O.a,{amount:Object(Q.c)(\"asset_create\",[\"symbol3\"],t),asset:\"1.3.0\"}):4===m?f=s.a.createElement(O.a,{amount:Object(Q.c)(\"asset_create\",[\"symbol4\"],t),asset:\"1.3.0\"}):m>4&&(f=s.a.createElement(O.a,{amount:Object(Q.c)(\"asset_create\",[\"long_symbol\"],t),asset:\"1.3.0\"}));var g=[],b=function(e,t,a){return s.a.createElement(\"table\",{key:\"table_\"+e,className:\"table\"},s.a.createElement(\"tbody\",null,s.a.createElement(\"tr\",null,s.a.createElement(\"td\",{style:{border:\"none\",width:\"80%\"}},s.a.createElement(A.a,{content:\"account.user_issued_assets.\"+e}),\":\"),s.a.createElement(\"td\",{style:{border:\"none\"}},s.a.createElement(Y.Switch,{checked:a,onChange:t})))))};for(var v in c)c[v]&&\"charge_market_fee\"!==v&&g.push(b(v,this._onFlagChange.bind(this,v),l[v]));g.push(b(\"visible\",this._onUpdateDescription.bind(this,\"visible\"),!i.description.visible&&!1===i.description.visible));var _=[];for(var y in c)_.push(s.a.createElement(\"table\",{key:\"table_\"+y,className:\"table\"},s.a.createElement(\"tbody\",null,s.a.createElement(\"tr\",null,s.a.createElement(\"td\",{style:{border:\"none\",width:\"80%\"}},s.a.createElement(A.a,{content:\"account.user_issued_assets.\"+y}),\":\"),s.a.createElement(\"td\",{style:{border:\"none\"}},s.a.createElement(Y.Switch,{checked:c[y],onChange:this._onPermissionChange.bind(this,y)}))))));var E=s.a.createElement(\"div\",null,s.a.createElement(\"button\",{className:\"button\",onClick:this._reset.bind(this),value:W.a.translate(\"account.perm.reset\")},s.a.createElement(A.a,{content:\"account.perm.reset\"})),s.a.createElement(\"button\",{className:L()(\"button\",{disabled:!r}),onClick:this._createAsset.bind(this)},s.a.createElement(A.a,{content:\"header.create_asset\"})));return s.a.createElement(\"div\",{className:\"grid-content app-tables no-padding\",ref:\"appTables\"},s.a.createElement(\"div\",{className:\"content-block small-12\"},s.a.createElement(\"div\",{className:\"tabs-container generic-bordered-box\"},s.a.createElement(\"div\",{className:\"tabs-header\"},s.a.createElement(\"h3\",null,s.a.createElement(A.a,{content:\"header.create_asset\"}))),s.a.createElement(M.b,{setting:\"createAssetTab\",className:\"account-tabs\",tabsClass:\"account-overview no-padding bordered-header content-block\",contentClass:\"grid-block shrink small-vertical medium-horizontal padding\",segmented:!1,actionButtons:E},s.a.createElement(M.a,{title:\"account.user_issued_assets.primary\"},s.a.createElement(\"div\",{className:\"small-12 grid-content\"},s.a.createElement(\"label\",null,s.a.createElement(A.a,{content:\"account.user_issued_assets.symbol\"}),s.a.createElement(\"input\",{type:\"text\",value:i.symbol,onChange:this._onUpdateInput.bind(this,\"symbol\")})),o.symbol?s.a.createElement(\"p\",{className:\"grid-content has-error\"},o.symbol):null,s.a.createElement(\"label\",null,s.a.createElement(A.a,{content:\"account.user_issued_assets.max_supply\"}),\" \",i.symbol?s.a.createElement(\"span\",null,\"(\",i.symbol,\")\"):null,s.a.createElement(\"input\",{type:\"text\",value:i.max_supply,onChange:this._onUpdateInput.bind(this,\"max_supply\")})),o.max_supply?s.a.createElement(\"p\",{className:\"grid-content has-error\"},o.max_supply):null,s.a.createElement(\"label\",null,s.a.createElement(A.a,{content:\"account.user_issued_assets.decimals\"}),s.a.createElement(\"input\",{min:\"0\",max:\"8\",step:\"1\",type:\"range\",value:i.precision,onChange:this._onUpdateInput.bind(this,\"precision\")})),s.a.createElement(\"p\",null,i.precision),s.a.createElement(\"div\",{style:{marginBottom:10},className:\"txtlabel cancel\"},s.a.createElement(A.a,{content:\"account.user_issued_assets.precision_warning\"})),s.a.createElement(\"table\",{className:\"table\",style:{width:\"inherit\"}},s.a.createElement(\"tbody\",null,s.a.createElement(\"tr\",null,s.a.createElement(\"td\",{style:{border:\"none\"}},s.a.createElement(A.a,{content:\"account.user_issued_assets.mpa\"}),\":\"),s.a.createElement(\"td\",{style:{border:\"none\"}},s.a.createElement(Y.Switch,{checked:d,onChange:this._onToggleBitAsset.bind(this)}))))),d?s.a.createElement(\"table\",{className:\"table\",style:{width:\"inherit\"}},s.a.createElement(\"tbody\",null,s.a.createElement(\"tr\",null,s.a.createElement(\"td\",{style:{border:\"none\"}},s.a.createElement(A.a,{content:\"account.user_issued_assets.pm\"}),\":\"),s.a.createElement(\"td\",{style:{border:\"none\"}},s.a.createElement(Y.Switch,{checked:p,onChange:this._onTogglePM.bind(this)}))))):null,s.a.createElement(A.a,{component:\"h3\",content:\"account.user_issued_assets.core_exchange_rate\"}),s.a.createElement(\"label\",null,s.a.createElement(\"div\",{className:\"grid-block no-margin\"},o.quote_asset?s.a.createElement(\"p\",{className:\"grid-content has-error\"},o.quote_asset):null,o.base_asset?s.a.createElement(\"p\",{className:\"grid-content has-error\"},o.base_asset):null,s.a.createElement(\"div\",{className:\"grid-block no-margin small-12 medium-6\"},s.a.createElement(\"div\",{className:\"amount-selector\",style:{width:\"100%\",paddingRight:\"10px\"}},s.a.createElement(A.a,{component:\"label\",content:\"account.user_issued_assets.quote\"}),s.a.createElement(\"div\",{className:\"inline-label\"},s.a.createElement(\"input\",{type:\"text\",placeholder:\"0.0\",onChange:this._onCoreRateChange.bind(this,\"quote\"),value:u.quote.amount})))),s.a.createElement(\"div\",{className:\"grid-block no-margin small-12 medium-6\"},s.a.createElement(G.a,{label:\"account.user_issued_assets.base\",amount:u.base.amount,onChange:this._onCoreRateChange.bind(this,\"base\"),asset:u.base.asset_id,assets:[u.base.asset_id],placeholder:\"0.0\",tabIndex:1,style:{width:\"100%\",paddingLeft:\"10px\"}}))),s.a.createElement(\"div\",null,s.a.createElement(\"h5\",null,s.a.createElement(A.a,{content:\"exchange.price\"}),s.a.createElement(\"span\",null,\":\",\" \",F.a.format_number(F.a.get_asset_price(u.quote.amount*F.a.get_asset_precision(i.precision),{precision:i.precision},u.base.amount*F.a.get_asset_precision(a),a),2+(parseInt(i.precision,10)||8))),s.a.createElement(\"span\",null,\" \",i.symbol,\"/\",a.get(\"symbol\"))))),s.a.createElement(\"div\",null,s.a.createElement(A.a,{content:\"account.user_issued_assets.cer_warning_1\",component:\"label\",className:\"has-error\"}),s.a.createElement(A.a,{content:\"account.user_issued_assets.cer_warning_2\",component:\"p\"})),s.a.createElement(\"p\",null,s.a.createElement(A.a,{content:\"account.user_issued_assets.approx_fee\"}),\": \",f))),s.a.createElement(M.a,{title:\"account.user_issued_assets.description\"},s.a.createElement(\"div\",{className:\"small-12 grid-content\"},s.a.createElement(A.a,{component:\"label\",content:\"account.user_issued_assets.description\"}),s.a.createElement(\"label\",null,s.a.createElement(\"textarea\",{style:{height:\"7rem\"},rows:\"1\",value:i.description.main,onChange:this._onUpdateDescription.bind(this,\"main\")})),s.a.createElement(A.a,{component:\"label\",content:\"account.user_issued_assets.short\"}),s.a.createElement(\"label\",null,s.a.createElement(\"input\",{type:\"text\",rows:\"1\",value:i.description.short_name,onChange:this._onUpdateDescription.bind(this,\"short_name\")})),s.a.createElement(A.a,{component:\"label\",content:\"account.user_issued_assets.market\"}),s.a.createElement(z.a,{label:\"account.user_issued_assets.name\",onChange:this._onInputMarket.bind(this),asset:this.state.marketInput,assetInput:this.state.marketInput,style:{width:\"100%\",paddingRight:\"10px\"},onFound:this._onFoundMarketAsset.bind(this)}),p?s.a.createElement(\"div\",null,s.a.createElement(A.a,{component:\"h3\",content:\"account.user_issued_assets.condition\"}),s.a.createElement(\"label\",null,s.a.createElement(\"input\",{type:\"text\",rows:\"1\",value:i.description.condition,onChange:this._onUpdateDescription.bind(this,\"condition\")})),s.a.createElement(A.a,{component:\"h3\",content:\"account.user_issued_assets.expiry\"}),s.a.createElement(\"label\",null,s.a.createElement(\"input\",{type:\"date\",value:i.description.expiry,onChange:this._onUpdateDescription.bind(this,\"expiry\")}))):null)),d?s.a.createElement(M.a,{title:\"account.user_issued_assets.bitasset_opts\"},s.a.createElement(ne,{bitasset_opts:h,onUpdate:this.onChangeBitAssetOpts.bind(this),backingAsset:h.short_backing_asset,assetPrecision:i.precision,assetSymbol:i.symbol,isPredictionMarket:p})):null,s.a.createElement(M.a,{title:\"account.permissions\"},s.a.createElement(\"div\",{className:\"small-12 grid-content\"},s.a.createElement(\"div\",{style:{maxWidth:800}},s.a.createElement(V.a,{path:\"components/AccountAssetCreate\",section:\"permissions\"})),_)),s.a.createElement(M.a,{title:\"account.user_issued_assets.flags\"},s.a.createElement(\"div\",{className:\"small-12 grid-content\"},s.a.createElement(\"div\",{style:{maxWidth:800}},s.a.createElement(V.a,{path:\"components/AccountAssetCreate\",section:\"flags\"})),c.charge_market_fee?s.a.createElement(\"div\",null,s.a.createElement(A.a,{component:\"h3\",content:\"account.user_issued_assets.market_fee\"}),s.a.createElement(\"table\",{className:\"table\"},s.a.createElement(\"tbody\",null,s.a.createElement(\"tr\",null,s.a.createElement(\"td\",{style:{border:\"none\",width:\"80%\"}},s.a.createElement(A.a,{content:\"account.user_issued_assets.charge_market_fee\"}),\":\"),s.a.createElement(\"td\",{style:{border:\"none\"}},s.a.createElement(Y.Switch,{checked:l.charge_market_fee,onChange:this._onFlagChange.bind(this,\"charge_market_fee\")}))))),s.a.createElement(\"div\",{className:L()({disabled:!l.charge_market_fee})},s.a.createElement(\"label\",null,s.a.createElement(A.a,{content:\"account.user_issued_assets.market_fee\"}),\" \",\"(%)\",s.a.createElement(\"input\",{type:\"number\",value:i.market_fee_percent,onChange:this._onUpdateInput.bind(this,\"market_fee_percent\")})),s.a.createElement(\"label\",null,s.a.createElement(A.a,{content:\"account.user_issued_assets.max_market_fee\"}),\" \",\"(\",i.symbol,\")\",s.a.createElement(\"input\",{type:\"number\",value:i.max_market_fee,onChange:this._onUpdateInput.bind(this,\"max_market_fee\")})),o.max_market_fee?s.a.createElement(\"p\",{className:\"grid-content has-error\"},o.max_market_fee):null)):null,s.a.createElement(\"h3\",null,s.a.createElement(A.a,{content:\"account.user_issued_assets.flags\"})),g))))))}}]),t}();se.propTypes={core:c.a.ChainAsset.isRequired,globalObject:c.a.ChainObject.isRequired},se.defaultProps={globalObject:\"2.0.0\",core:\"1.3.0\"},se=Object(u.a)(se);var oe=function(){function e(e,t){for(var a=0;a<t.length;a++){var n=t[a];n.enumerable=n.enumerable||!1,n.configurable=!0,\"value\"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,a,n){return a&&e(t.prototype,a),n&&e(t,n),t}}();var re=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError(\"Cannot call a class as a function\")}(this,t),function(e,t){if(!e)throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\");return!t||\"object\"!=typeof t&&\"function\"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return function(e,t){if(\"function\"!=typeof t&&null!==t)throw new TypeError(\"Super expression must either be null or a function, not \"+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,s.a.Component),oe(t,[{key:\"getFee\",value:function(){return Object(Q.c)(this.props.opType,this.props.options,this.props.globalObject)}},{key:\"render\",value:function(){var e=this.props,t=e.opType,a=e.options,n=e.globalObject;if(!t||!a||!n)return null;var o=Object(Q.c)(t,a,n);return s.a.createElement(O.a,{amount:o,asset:\"1.3.0\"})}}]),t}();re.propTypes={globalObject:c.a.ChainObject.isRequired,opType:E.a.string,options:E.a.array},re.defaultProps={globalObject:\"2.0.0\",options:[]};var ie=Object(u.a)(re),le=a(127),ce=a(110),ue=a(148),pe=a(278),de=a(26),he=function(){function e(e,t){for(var a=0;a<t.length;a++){var n=t[a];n.enumerable=n.enumerable||!1,n.configurable=!0,\"value\"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,a,n){return a&&e(t.prototype,a),n&&e(t,n),t}}();var me=function(e){function t(e){!function(e,t){if(!(e instanceof t))throw new TypeError(\"Cannot call a class as a function\")}(this,t);var a=function(e,t){if(!e)throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\");return!t||\"object\"!=typeof t&&\"function\"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).call(this));return a.state={listType:e.assetWhiteListType,accountTable:-1===e.assetWhiteListType.indexOf(\"market\"),listTypes:[\"whitelist_authorities\",\"blacklist_authorities\",\"whitelist_markets\",\"blacklist_markets\"],assetInput:null,asset_id:null},a}return function(e,t){if(\"function\"!=typeof t&&null!==t)throw new TypeError(\"Super expression must either be null or a function, not \"+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,s.a.Component),he(t,[{key:\"renderAccountTables\",value:function(){var e=this,t=this.state.listType;return this.props.whiteListEnabled?s.a.createElement(\"div\",null,s.a.createElement(\"table\",{className:\"table dashboard-table table-hover\"},s.a.createElement(\"thead\",null,s.a.createElement(\"tr\",null,s.a.createElement(\"th\",null,s.a.createElement(A.a,{content:\"explorer.account.title\"})),s.a.createElement(\"th\",null,s.a.createElement(A.a,{content:\"account.perm.remove_text\"})))),s.a.createElement(\"tbody\",null,this.props[t].map(function(a){return s.a.createElement(\"tr\",{key:a},s.a.createElement(\"td\",null,s.a.createElement(ce.a,{account:a})),s.a.createElement(\"td\",{className:\"clickable\",onClick:e.props.onChangeList.bind(e,t,\"remove\",a)},s.a.createElement(I.a,{name:\"cross-circle\",title:\"icons.cross_circle.remove\",className:\"icon-14px\"})))}))),s.a.createElement(\"div\",{style:{paddingTop:\"2rem\"}},s.a.createElement(pe.a,{label:\"account.whitelist.\"+t,accountName:this.props.authority_name,account:this.props.authority_name,onChange:this.props.onAccountNameChanged.bind(this,\"authority_name\"),onAccountChanged:this.props.onAccountChanged.bind(this,\"new_authority_id\"),error:null,tabIndex:1,action_label:\"account.perm.confirm_add\",onAction:this.props.onChangeList.bind(this,t,\"add\",this.props.new_authority_id)}))):s.a.createElement(\"div\",null,s.a.createElement(A.a,{className:\"txtlabel cancel\",component:\"p\",content:\"explorer.asset.whitelist.enable_flag\"}))}},{key:\"_onAssetChange\",value:function(e){this.setState({assetInput:e})}},{key:\"_onAssetFound\",value:function(e){this.setState({asset_id:e?e.get(\"id\"):null})}},{key:\"renderMarketTable\",value:function(){var e=this,t=this.state.listType;return s.a.createElement(\"div\",null,s.a.createElement(\"table\",{className:\"table dashboard-table table-hover\"},s.a.createElement(\"thead\",null,s.a.createElement(\"tr\",null,s.a.createElement(\"th\",null,s.a.createElement(A.a,{content:\"explorer.asset.title\"})),s.a.createElement(\"th\",null,s.a.createElement(A.a,{content:\"account.perm.remove_text\"})))),s.a.createElement(\"tbody\",null,this.props[t].map(function(a){return s.a.createElement(\"tr\",{key:a},s.a.createElement(\"td\",null,s.a.createElement(ue.a,{asset:a})),s.a.createElement(\"td\",{className:\"clickable\",onClick:e.props.onChangeList.bind(e,t,\"remove\",a)},s.a.createElement(I.a,{name:\"cross-circle\",title:\"icons.cross_circle.remove\",className:\"icon-14px\"})))}))),s.a.createElement(\"div\",{style:{paddingTop:\"2rem\"}},s.a.createElement(z.a,{label:\"explorer.asset.whitelist.\"+t,onChange:this._onAssetChange.bind(this),asset:this.state.assetInput,assetInput:this.state.assetInput,tabIndex:1,style:{width:\"100%\"},onFound:this._onAssetFound.bind(this),action_label:\"account.perm.confirm_add\",onAction:this.props.onChangeList.bind(this,t,\"add\",this.state.asset_id)})))}},{key:\"_onSwitchType\",value:function(e){this.setState({listType:e,accountTable:-1===e.indexOf(\"market\")}),de.a.changeViewSetting({assetWhiteListType:e})}},{key:\"render\",value:function(){var e=this,t=this.state.accountTable,a=this.state.listTypes.indexOf(this.state.listType);return s.a.createElement(\"div\",{className:\"small-12 large-8 large-offset-2 grid-content\"},s.a.createElement(\"div\",null,s.a.createElement(\"div\",{className:\"header-selector\",style:{paddingBottom:\"2rem\"}},s.a.createElement(\"div\",{className:\"selector\"},this.state.listTypes.map(function(t,n){return s.a.createElement(\"div\",{key:t,className:L()(\"inline-block\",{inactive:a!==n}),onClick:e._onSwitchType.bind(e,t)},s.a.createElement(A.a,{content:\"explorer.asset.whitelist.\"+t}))}))),t?this.renderAccountTables():this.renderMarketTable(),this.props.children))}}]),t}(),fe=Object(p.a)(me,{listenTo:function(){return[i.a]},getProps:function(){return{assetWhiteListType:i.a.getState().viewSettings.get(\"assetWhiteListType\",\"whitelist_authorities\")}}}),ge=function(){function e(e,t){for(var a=0;a<t.length;a++){var n=t[a];n.enumerable=n.enumerable||!1,n.configurable=!0,\"value\"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,a,n){return a&&e(t.prototype,a),n&&e(t,n),t}}();var be=function(e){function t(e){!function(e,t){if(!(e instanceof t))throw new TypeError(\"Cannot call a class as a function\")}(this,t);var a=function(e,t){if(!e)throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\");return!t||\"object\"!=typeof t&&\"function\"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return a.state={producer_name:null},a}return function(e,t){if(\"function\"!=typeof t&&null!==t)throw new TypeError(\"Super expression must either be null or a function, not \"+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,s.a.Component),ge(t,[{key:\"onAccountChanged\",value:function(e){this.setState({new_producer_id:e?e.get(\"id\"):null})}},{key:\"onAccountNameChanged\",value:function(e){this.setState({producer_name:e})}},{key:\"render\",value:function(){var e=this,t=this.props,a=t.witnessFed,n=t.committeeFed;return a||n?s.a.createElement(\"div\",{className:\"grid-content small-12 large-8 large-offset-2\"},s.a.createElement(A.a,{component:\"p\",content:\"account.user_issued_assets.feed_not_allowed_1\",className:\"has-error\"}),s.a.createElement(A.a,{component:\"p\",content:\"account.user_issued_assets.feed_not_allowed_2\"})):s.a.createElement(\"div\",{className:\"grid-content small-12 large-8 large-offset-2\"},s.a.createElement(\"table\",{className:\"table dashboard-table table-hover\"},s.a.createElement(\"thead\",null,s.a.createElement(\"tr\",null,s.a.createElement(\"th\",null),s.a.createElement(\"th\",{style:{textAlign:\"left\"}},s.a.createElement(A.a,{content:\"explorer.account.title\"})),s.a.createElement(\"th\",null,s.a.createElement(A.a,{content:\"account.perm.remove_text\"})))),s.a.createElement(\"tbody\",null,this.props.producers.map(function(t,a){return s.a.createElement(\"tr\",{key:t},s.a.createElement(\"td\",{style:{textAlign:\"left\"}},\"#\",a+1),s.a.createElement(\"td\",{style:{textAlign:\"left\"}},s.a.createElement(ce.a,{account:t})),s.a.createElement(\"td\",{className:\"clickable\",onClick:e.props.onChangeList.bind(e,\"remove\",t)},s.a.createElement(I.a,{name:\"cross-circle\",title:\"icons.cross_circle.remove\",className:\"icon-14px\"})))}))),s.a.createElement(\"div\",{style:{paddingTop:\"2rem\"}},s.a.createElement(pe.a,{label:\"account.user_issued_assets.add_feed\",accountName:this.state.producer_name,account:this.state.producer_name,onChange:this.onAccountNameChanged.bind(this),onAccountChanged:this.onAccountChanged.bind(this),error:null,tabIndex:1,action_label:\"account.perm.confirm_add\",onAction:this.props.onChangeList.bind(this,\"add\",this.state.new_producer_id)})))}}]),t}(),ve=a(141),_e=a.n(ve),ye=a(2265),Ee=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var n in a)Object.prototype.hasOwnProperty.call(a,n)&&(e[n]=a[n])}return e},we=function(){function e(e,t){for(var a=0;a<t.length;a++){var n=t[a];n.enumerable=n.enumerable||!1,n.configurable=!0,\"value\"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,a,n){return a&&e(t.prototype,a),n&&e(t,n),t}}();function ke(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}function Ae(e,t){if(!(e instanceof t))throw new TypeError(\"Cannot call a class as a function\")}function Ce(e,t){if(!e)throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\");return!t||\"object\"!=typeof t&&\"function\"!=typeof t?e:t}function xe(e,t){if(\"function\"!=typeof t&&null!==t)throw new TypeError(\"Super expression must either be null or a function, not \"+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var Oe=new K.a(H.a.GRAPHENE_MAX_SHARE_SUPPLY),Se=function(){Y.Notification.error({message:W.a.translate(\"account.user_issued_assets.invalid_backing_asset_change\")})},Pe=function(e){function t(e){Ae(this,t);var a=Ce(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return a.state=a.resetState(e),a.showAssetUpdateConfirmationModal=a.showAssetUpdateConfirmationModal.bind(a),a.hideAssetUpdateConfirmationModal=a.hideAssetUpdateConfirmationModal.bind(a),a}return xe(t,s.a.Component),we(t,[{key:\"_openConfirm\",value:function(){this.showAssetUpdateConfirmationModal()}},{key:\"_cancelConfirm\",value:function(){this.hideAssetUpdateConfirmationModal()}},{key:\"resetState\",value:function(e){var t=e.asset.toJS(),a=void 0!==t.bitasset_data_id,n=F.a.get_asset_precision(t.precision),s=F.a.get_asset_precision(e.core.get(\"precision\")),o=new K.a(t.options.max_market_fee).div(n).toString(),r=new K.a(t.options.max_supply).div(n).toString(),i=t.options.core_exchange_rate;i.quote.amount=i.quote.asset_id===t.id?new K.a(i.quote.amount).div(n).toString():new K.a(i.quote.amount).div(s).toString(),i.base.amount=i.base.asset_id===t.id?new K.a(i.base.amount).div(n).toString():new K.a(i.base.amount).div(s).toString();var l=N.a.getFlagBooleans(t.options.flags,a),c=N.a.getFlagBooleans(t.options.issuer_permissions,a);t.options.market_fee_percent/=100;var u=q.ChainStore.getAsset(i.quote.asset_id).get(\"symbol\"),p=q.ChainStore.getAsset(i.base.asset_id).get(\"symbol\");return{isAssetUpdateConfirmationModalVisible:!1,update:{max_supply:r,max_market_fee:o,market_fee_percent:t.options.market_fee_percent,description:N.a.parseDescription(t.options.description)},core_exchange_rate:i,issuer:t.issuer,new_issuer_account_id:null,new_funder_account:e.account.get(\"id\"),asset_to_update:t.id,errors:{max_supply:null},new_authority_id:null,authority_name:null,isValid:!0,flagBooleans:l,permissionBooleans:c,isBitAsset:a,coreRateQuoteAssetName:u,quoteAssetInput:u,coreRateBaseAssetName:p,baseAssetInput:p,claimFeesAmount:0,bitasset_opts:a?t.bitasset.options:null,original_bitasset_opts:a?e.asset.getIn([\"bitasset\",\"options\"]).toJS():null,marketInput:\"\",whitelist_authorities:e.asset.getIn([\"options\",\"whitelist_authorities\"]),blacklist_authorities:e.asset.getIn([\"options\",\"blacklist_authorities\"]),whitelist_markets:e.asset.getIn([\"options\",\"whitelist_markets\"]),blacklist_markets:e.asset.getIn([\"options\",\"blacklist_markets\"]),maxFeedProducers:e.globalObject.getIn([\"parameters\",\"maximum_asset_feed_publishers\"]),feedProducers:a?e.asset.getIn([\"bitasset\",\"feeds\"],[]).map(function(e){return e.first()}):null,originalFeedProducers:a?e.asset.getIn([\"bitasset\",\"feeds\"],[]).map(function(e){return e.first()}):null}}},{key:\"hideAssetUpdateConfirmationModal\",value:function(){this.setState({isAssetUpdateConfirmationModalVisible:!1})}},{key:\"showAssetUpdateConfirmationModal\",value:function(){this.setState({isAssetUpdateConfirmationModalVisible:!0})}},{key:\"assetChanged\",value:function(){var e=this.state,t=this.resetState(this.props);return JSON.stringify(e.update)!==JSON.stringify(t.update)||JSON.stringify(e.core_exchange_rate)!==JSON.stringify(t.core_exchange_rate)||null!==e.new_issuer_account_id&&e.new_issuer_account_id!==e.issuer||JSON.stringify(e.flagBooleans)!==JSON.stringify(t.flagBooleans)||JSON.stringify(e.permissionBooleans)!==JSON.stringify(t.permissionBooleans)||JSON.stringify(e.whitelist_authorities)!==JSON.stringify(t.whitelist_authorities)||JSON.stringify(e.blacklist_authorities)!==JSON.stringify(t.blacklist_authorities)||JSON.stringify(e.whitelist_markets)!==JSON.stringify(t.whitelist_markets)||JSON.stringify(e.blacklist_markets)!==JSON.stringify(t.blacklist_markets)}},{key:\"tabChanged\",value:function(e){var t=this.tabsChanged();return!!t[e]&&t[e]}},{key:\"tabsChanged\",value:function(){var e=this.state,t=this.resetState(this.props),a=[];return e.update.max_supply===t.update.max_supply&&e.core_exchange_rate.base.amount===t.core_exchange_rate.base.amount&&e.core_exchange_rate.quote.amount===t.core_exchange_rate.quote.amount||(a[0]=!0),JSON.stringify(e.whitelist_authorities)===JSON.stringify(t.whitelist_authorities)&&JSON.stringify(e.blacklist_authorities)===JSON.stringify(t.blacklist_authorities)&&JSON.stringify(e.whitelist_markets)===JSON.stringify(t.whitelist_markets)&&JSON.stringify(e.blacklist_markets)===JSON.stringify(t.blacklist_markets)||(a[1]=!0),e.update.description.main===t.update.description.main&&e.update.description.short_name===t.update.description.short_name&&e.update.description.market===t.update.description.market||(a[2]=!0),JSON.stringify(e.bitasset_opts)!==JSON.stringify(t.original_bitasset_opts)&&(a[3]=!0),JSON.stringify(e.permissionBooleans)!==JSON.stringify(t.permissionBooleans)&&(a[4]=!0),JSON.stringify(e.flagBooleans)===JSON.stringify(t.flagBooleans)&&e.update.market_fee_percent===t.update.market_fee_percent&&e.update.max_market_fee===t.update.max_market_fee||(a[5]=!0),JSON.stringify(e.feedProducers)!==JSON.stringify(t.originalFeedProducers)&&(a[6]=!0),a}},{key:\"pageChanged\",value:function(){var e=this.state,t=e.isBitAsset,a=e.bitasset_opts,n=e.original_bitasset_opts,s=e.feedProducers,o=e.originalFeedProducers;return this.assetChanged()||t&&(JSON.stringify(a)!==JSON.stringify(n)||!F.a.are_equal_shallow(s.toJS(),o.toJS()))}},{key:\"_updateAsset\",value:function(e){var t=this;e.preventDefault(),this.hideAssetUpdateConfirmationModal();var a=this.state,n=a.update,s=a.issuer,o=a.new_issuer_account_id,r=a.core_exchange_rate,i=a.flagBooleans,l=a.permissionBooleans,c=a.isBitAsset,u=a.bitasset_opts,p=a.original_bitasset_opts,d=a.feedProducers,h=a.originalFeedProducers,m=N.a.getFlags(i);128&this.props.asset.getIn([\"options\",\"flags\"])&&!(128&this.props.asset.getIn([\"options\",\"issuer_permissions\"]))&&(m+=128);var f=N.a.getPermissions(l,c);this.state.marketInput!==n.description.market&&(n.description.market=\"\");var g=JSON.stringify(n.description),b={whitelist_authorities:this.state.whitelist_authorities,blacklist_authorities:this.state.blacklist_authorities,whitelist_markets:this.state.whitelist_markets,blacklist_markets:this.state.blacklist_markets},v=c?d.toJS():null,_=c?h.toJS():null;C.a.updateAsset(s,o,n,r,this.props.asset,m,f,c,u,p,g,b,v,_,this.assetChanged()).then(function(){console.log(\"... AssetActions.updateAsset(account_id, update)\",s,o,t.props.asset.get(\"id\"),n),setTimeout(function(){q.ChainStore.getAsset(t.props.asset.get(\"id\")),t.setState(t.resetState(t.props))},3e3)})}},{key:\"_reset\",value:function(e){e.preventDefault(),this.setState(this.resetState(this.props))}},{key:\"_forcePositive\",value:function(e){return parseFloat(e)<0?\"0\":e}},{key:\"_onUpdateDescription\",value:function(e,t){var a=this.state.update,n=!0;switch(e){case\"condition\":if(t.target.value.length>60)return void(n=!1);a.description[e]=t.target.value;break;case\"short_name\":if(t.target.value.length>32)return void(n=!1);a.description[e]=t.target.value;break;case\"market\":a.description[e]=t;break;case\"visible\":a.description[e]=!a.description[e];break;default:a.description[e]=t.target.value}n&&(this.forceUpdate(),this._validateEditFields(a))}},{key:\"onChangeBitAssetOpts\",value:function(e,t){var a=this.state.bitasset_opts;switch(e){case\"force_settlement_offset_percent\":case\"maximum_force_settlement_volume\":a[e]=parseFloat(t.target.value)*H.a.GRAPHENE_1_PERCENT;break;case\"feed_lifetime_sec\":case\"force_settlement_delay_sec\":console.log(t.target.value,parseInt(60*parseFloat(t.target.value),10)),a[e]=parseInt(60*parseFloat(t.target.value),10);break;case\"short_backing_asset\":a[e]=t;break;case\"minimum_feeds\":a[e]=parseInt(t.target.value,10)}this.forceUpdate()}},{key:\"_onUpdateInput\",value:function(e,t){var a=this.state.update,n=!0,s=F.a.get_asset_precision(this.props.asset.get(\"precision\"));switch(e){case\"market_fee_percent\":a[e]=this._forcePositive(t.target.value);break;case\"max_market_fee\":var o=t.amount.replace(/,/g,\"\");if(new K.a(o).times(s).gt(Oe))return n=!1,this.setState({errors:{max_market_fee:\"The number you tried to enter is too large\"}});a[e]=F.a.limitByPrecision(o,this.props.asset.get(\"precision\"));break;case\"max_supply\":var r=t.amount.replace(/,/g,\"\");a[e]=F.a.limitByPrecision(r,this.props.asset.get(\"precision\"));break;default:a[e]=t.target.value}n&&(this.setState({update:a}),this._validateEditFields(a))}},{key:\"_validateEditFields\",value:function(e){var t=e.core_exchange_rate,a=e.feedProducers?e.feedProducers:this.state.feedProducers,n=this.state.flagBooleans,s=this.props,o=s.asset,r=s.core,i={max_supply:null,quote_asset:null,base_asset:null,max_feed_producer:null,conflict_producer:null,invalid_market_pair:null},l=this.props.asset.get(\"precision\");try{i.max_supply=e.max_supply<=0?W.a.translate(\"account.user_issued_assets.max_positive\"):new K.a(parseInt(e.max_supply,10)).times(Math.pow(10,l)).gt(Oe)?W.a.translate(\"account.user_issued_assets.too_large\"):null}catch(e){console.log(\"err:\",e),i.max_supply=W.a.translate(\"account.user_issued_assets.too_large\")}t&&(t.quote.asset_id!==o.get(\"id\")&&t.base.asset_id!==o.get(\"id\")&&(i.quote_asset=W.a.translate(\"account.user_issued_assets.need_asset\",{name:o.get(\"symbol\")})),t.quote.asset_id!==r.get(\"id\")&&t.base.asset_id!==r.get(\"id\")&&(i.base_asset=W.a.translate(\"account.user_issued_assets.need_asset\",{name:r.get(\"symbol\")}))),a&&a.size>this.state.maxFeedProducers&&(i.max_feed_producer=W.a.translate(\"account.user_issued_assets.too_many_feed\",{max:this.state.maxFeedProducers})),n.committee_fed_asset&&n.witness_fed_asset&&(i.conflict_producer=W.a.translate(\"account.user_issued_assets.conflict_feed\")),this.state.marketInput==this.props.asset.get(\"symbol\")&&(i.invalid_market_pair=W.a.translate(\"account.user_issued_assets.invalid_market_pair\"));var c=!(i.invalid_market_pair||i.max_supply||i.base_asset||i.quote_asset||i.max_feed_producer||i.conflict_producer);this.setState({isValid:c,errors:i})}},{key:\"_onCoreRateChange\",value:function(e,t){t.amount=\"\"==t.amount?\"0\":t.amount.replace(/,/g,\"\"),t.amount=F.a.limitByPrecision(t.amount,t.asset.get(\"precision\")),this.state.core_exchange_rate[e]={amount:t.amount,asset_id:t.asset.get(\"id\")},this.forceUpdate()}},{key:\"onAccountChanged\",value:function(e,t){this.setState(ke({},e,t?t.get(\"id\"):null))}},{key:\"onAccountNameChanged\",value:function(e,t){this.setState(ke({},e,t))}},{key:\"_onInputCoreAsset\",value:function(e,t){\"quote\"===e?this.setState({quoteAssetInput:t}):\"base\"===e&&this.setState({baseAssetInput:t})}},{key:\"_onFoundCoreAsset\",value:function(e,t){if(t){var a=this.state.core_exchange_rate;a[e].asset_id=t.get(\"id\"),this.setState({core_exchange_rate:a}),this._validateEditFields({max_supply:this.state.max_supply,core_exchange_rate:a})}}},{key:\"_onInputMarket\",value:function(e){this.setState({marketInput:e})}},{key:\"_onFoundMarketAsset\",value:function(e){e&&this._onUpdateDescription(\"market\",e.get(\"symbol\"))}},{key:\"_onFlagChange\",value:function(e){var t=this.state.flagBooleans;t[e]=!t[e],this.setState({flagBooleans:t}),this._validateEditFields({})}},{key:\"_getCurrentSupply\",value:function(){var e=this.props,t=e.asset,a=e.getDynamicObject;return a&&a(t.get(\"dynamic_asset_data_id\")).get(\"current_supply\")}},{key:\"_onPermissionChange\",value:function(e){var t=this.state,a=t.isBitAsset,n=t.permissionBooleans,s=!N.a.getFlagBooleans(this.props.asset.getIn([\"options\",\"issuer_permissions\"]),a)[e];if(this._getCurrentSupply()>0&&s)Y.Notification.error({message:W.a.translate(\"account.user_issued_assets.invalid_permissions_change\")});else{var o=n;o[e]=!o[e],this.setState({permissionBooleans:o})}}},{key:\"_onClaimInput\",value:function(e){this.setState({claimFeesAmount:e.amount})}},{key:\"onChangeList\",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:\"add\",a=arguments[2],n=this.state[e];\"add\"!==t||n.includes(a)?\"remove\"===t&&n.includes(a)&&(n=n.remove(n.indexOf(a))):n=n.push(a),this.setState(ke({},e,n))}},{key:\"onChangeFeedProducerList\",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:\"add\",t=arguments[1],a=this.state.feedProducers;\"add\"!==e||a.includes(t)?\"remove\"===e&&a.includes(t)&&(a=a.remove(a.indexOf(t))):a=a.push(t),this.setState({feedProducers:a}),this._validateEditFields({feedProducers:a})}},{key:\"render\",value:function(){var e,t=this,a=this.props.asset,n=this.state,o=n.errors,r=n.isValid,i=n.update,l=n.core_exchange_rate,c=n.flagBooleans,u=n.permissionBooleans,p=(n.claimFeesAmount,n.isBitAsset),d=n.bitasset_opts,h=a.get(\"symbol\");e=s.a.createElement(ie,{opType:\"asset_update\"});var m=q.ChainStore.getAsset(l.quote.asset_id),f=F.a.get_asset_precision(m.get(\"precision\")),g=q.ChainStore.getAsset(l.base.asset_id),b=F.a.get_asset_precision(g.get(\"precision\")),v=parseFloat(l.quote.amount)*f,_=parseFloat(l.base.amount)*b,y=N.a.getFlagBooleans(a.getIn([\"options\",\"issuer_permissions\"]),void 0!==a.get(\"bitasset\")),E=[],w=function(e,t,a){return s.a.createElement(\"table\",{key:\"table_\"+e,className:\"table\"},s.a.createElement(\"tbody\",null,s.a.createElement(\"tr\",null,s.a.createElement(\"td\",{style:{border:\"none\",width:\"80%\"}},s.a.createElement(A.a,{content:\"account.user_issued_assets.\"+e}),\":\"),s.a.createElement(\"td\",{style:{border:\"none\"}},s.a.createElement(Y.Switch,{checked:a,onChange:t})))))};for(var k in y)y[k]&&\"charge_market_fee\"!==k&&E.push(w(k,this._onFlagChange.bind(this,k),c[k]));E.push(w(\"visible\",this._onUpdateDescription.bind(this,\"visible\"),!i.description.visible&&!1===i.description.visible));var C=[];for(var x in y)C.push(s.a.createElement(\"table\",{key:\"table_\"+x,className:\"table\"},s.a.createElement(\"tbody\",null,s.a.createElement(\"tr\",null,s.a.createElement(\"td\",{style:{border:\"none\",width:\"80%\"}},s.a.createElement(A.a,{content:\"account.user_issued_assets.\"+x}),\":\"),s.a.createElement(\"td\",{style:{border:\"none\"}},s.a.createElement(Y.Switch,{checked:u[x],onChange:this._onPermissionChange.bind(this,x)}))))));var O=0;this.tabsChanged().forEach(function(){O++});var S=s.a.createElement(\"div\",null,s.a.createElement(\"button\",{className:L()(\"button\",{disabled:!r||!this.pageChanged()}),style:{width:\"9rem\"},onClick:O>1?this._openConfirm.bind(this):this._updateAsset.bind(this)},O>1?s.a.createElement(A.a,{content:\"account.perm.save_all\"}):s.a.createElement(A.a,{content:\"account.perm.save\"})),s.a.createElement(\"button\",{className:L()(\"button primary hollow\",{disabled:!this.pageChanged()}),onClick:this._reset.bind(this)},s.a.createElement(A.a,{content:\"account.perm.reset\"}))),P=!1;\"1.3.0\"!==m.get(\"id\")&&\"1.3.0\"!==g.get(\"id\")||m.get(\"id\")!==a.get(\"id\")&&g.get(\"id\")!==a.get(\"id\")||(P=!0);var j=a.getIn([\"bitasset\",\"is_prediction_market\"]),I=N.a.parseDescription(this.props.asset.toJS().options.description);return s.a.createElement(\"div\",{className:\"grid-content app-tables no-padding\",ref:\"appTables\"},s.a.createElement(\"div\",{className:\"content-block small-12\"},s.a.createElement(\"div\",{className:\"tabs-container generic-bordered-box\"},s.a.createElement(\"div\",{className:\"tabs-header\"},s.a.createElement(\"h3\",null,s.a.createElement(A.a,{content:\"header.update_asset\"}),\":\",\" \",h)),s.a.createElement(M.b,{setting:\"updateAssetTab\",className:\"account-tabs\",tabsClass:\"account-overview bordered-header content-block\",contentClass:\"grid-block padding-top shrink small-vertical medium-horizontal\",segmented:!1,actionButtons:S,onChangeTab:function(e){t.setState({activeTab:e})}},s.a.createElement(M.a,{title:\"account.user_issued_assets.primary\",updatedTab:this.tabChanged(0)},s.a.createElement(\"div\",{className:\"small-12 large-8 large-offset-2 grid-content\"},s.a.createElement(\"label\",null,s.a.createElement(A.a,{content:\"account.user_issued_assets.precision\"}),s.a.createElement(\"span\",null,\": \",a.get(\"precision\"))),s.a.createElement(\"br\",null),s.a.createElement(\"label\",null,s.a.createElement(G.a,{label:\"account.user_issued_assets.max_supply\",amount:i.max_supply,onChange:this._onUpdateInput.bind(this,\"max_supply\"),asset:a.get(\"id\"),assets:[a.get(\"id\")],placeholder:\"0.0\",tabIndex:1})),o.max_supply?s.a.createElement(\"p\",{className:\"grid-content has-error\"},o.max_supply):null,s.a.createElement(A.a,{component:\"h3\",content:\"account.user_issued_assets.core_exchange_rate\"}),s.a.createElement(\"label\",null,s.a.createElement(\"div\",{className:\"grid-block no-margin\"},P?null:s.a.createElement(\"div\",{className:\"grid-block no-margin small-12 medium-6\"},s.a.createElement(z.a,{label:\"account.user_issued_assets.quote_name\",onChange:this._onInputCoreAsset.bind(this,\"quote\"),asset:this.state.quoteAssetInput,assetInput:this.state.quoteAssetInput,tabIndex:1,style:{width:\"100%\",paddingRight:\"10px\"},onFound:this._onFoundCoreAsset.bind(this,\"quote\")})),P?null:s.a.createElement(\"div\",{className:\"grid-block no-margin small-12 medium-6\"},s.a.createElement(z.a,{label:\"account.user_issued_assets.base_name\",onChange:this._onInputCoreAsset.bind(this,\"base\"),asset:this.state.baseAssetInput,assetInput:this.state.baseAssetInput,tabIndex:1,style:{width:\"100%\",paddingLeft:\"10px\"},onFound:this._onFoundCoreAsset.bind(this,\"base\")})),o.quote_asset?s.a.createElement(\"p\",{className:\"grid-content has-error\"},o.quote_asset):null,o.base_asset?s.a.createElement(\"p\",{className:\"grid-content has-error\"},o.base_asset):null,s.a.createElement(\"div\",{className:\"grid-block no-margin small-12 medium-6\"},s.a.createElement(G.a,{label:\"account.user_issued_assets.quote\",amount:l.quote.amount,onChange:this._onCoreRateChange.bind(this,\"quote\"),asset:l.quote.asset_id,assets:[l.quote.asset_id],placeholder:\"0.0\",tabIndex:1,style:{width:\"100%\",paddingRight:\"10px\"}})),s.a.createElement(\"div\",{className:\"grid-block no-margin small-12 medium-6\"},s.a.createElement(G.a,{label:\"account.user_issued_assets.base\",amount:l.base.amount,onChange:this._onCoreRateChange.bind(this,\"base\"),asset:l.base.asset_id,assets:[l.base.asset_id],placeholder:\"0.0\",tabIndex:1,style:{width:\"100%\",paddingLeft:\"10px\"}}))),s.a.createElement(\"div\",null,s.a.createElement(\"h5\",null,s.a.createElement(A.a,{content:\"exchange.price\"}),\":\",\" \",s.a.createElement(le.a,{style:{fontWeight:\"bold\"},quote_amount:v,quote_asset:l.quote.asset_id,base_asset:l.base.asset_id,base_amount:_})))),s.a.createElement(\"div\",null,s.a.createElement(A.a,{content:\"account.user_issued_assets.cer_warning_1\",component:\"label\",className:\"has-error\"}),s.a.createElement(A.a,{content:\"account.user_issued_assets.cer_warning_2\",component:\"p\"})),s.a.createElement(\"p\",null,s.a.createElement(A.a,{content:\"account.user_issued_assets.approx_fee\"}),\": \",e))),s.a.createElement(M.a,{title:\"account.whitelist.title\",updatedTab:this.tabChanged(1)},s.a.createElement(fe,{whiteListEnabled:c.white_list,whitelist_authorities:this.state.whitelist_authorities,blacklist_authorities:this.state.blacklist_authorities,whitelist_markets:this.state.whitelist_markets,blacklist_markets:this.state.blacklist_markets,new_authority_id:this.state.new_authority_id,authority_name:this.state.authority_name,onAccountNameChanged:this.onAccountNameChanged.bind(this),onAccountChanged:this.onAccountChanged.bind(this),onChangeList:this.onChangeList.bind(this)},s.a.createElement(\"p\",null,s.a.createElement(A.a,{content:\"account.user_issued_assets.approx_fee\"}),\": \",e))),s.a.createElement(M.a,{title:\"account.user_issued_assets.description\",updatedTab:this.tabChanged(2)},s.a.createElement(\"div\",{className:\"small-12 large-8 large-offset-2 grid-content\"},s.a.createElement(\"label\",null,s.a.createElement(\"textarea\",{style:{height:\"7rem\"},rows:\"1\",value:i.description.main||\"\",onChange:this._onUpdateDescription.bind(this,\"main\")})),s.a.createElement(A.a,{component:\"h3\",content:\"account.user_issued_assets.short\"}),s.a.createElement(\"label\",null,s.a.createElement(\"input\",{type:\"text\",rows:\"1\",value:i.description.short_name||\"\",onChange:this._onUpdateDescription.bind(this,\"short_name\")})),s.a.createElement(A.a,{component:\"h3\",content:\"account.user_issued_assets.market\"}),s.a.createElement(z.a,{label:\"account.user_issued_assets.name\",onChange:this._onInputMarket.bind(this),placeholder:I.market,asset:this.state.marketInput,assetInput:this.state.marketInput,style:{width:\"100%\",paddingRight:\"10px\",paddingBottom:\"20px\"},onFound:this._onFoundMarketAsset.bind(this)}),o.invalid_market_pair?s.a.createElement(\"p\",{className:\"grid-content has-error\"},o.invalid_market_pair):null,j?s.a.createElement(\"div\",null,s.a.createElement(A.a,{component:\"h3\",content:\"account.user_issued_assets.condition\"}),s.a.createElement(\"label\",null,s.a.createElement(\"input\",{type:\"text\",rows:\"1\",value:i.description.condition,onChange:this._onUpdateDescription.bind(this,\"condition\")})),s.a.createElement(A.a,{component:\"h3\",content:\"account.user_issued_assets.expiry\"}),s.a.createElement(\"label\",null,s.a.createElement(\"input\",{type:\"date\",value:i.description.expiry,onChange:this._onUpdateDescription.bind(this,\"expiry\")}))):null,s.a.createElement(\"p\",null,s.a.createElement(A.a,{content:\"account.user_issued_assets.approx_fee\"}),\": \",e))),p?s.a.createElement(M.a,{title:\"account.user_issued_assets.bitasset_opts\",updatedTab:this.tabChanged(3)},s.a.createElement(\"div\",{className:\"small-12 large-8 large-offset-2 grid-content\"},s.a.createElement(ne,{bitasset_opts:d,onUpdate:this.onChangeBitAssetOpts.bind(this),backingAsset:d.short_backing_asset,assetPrecision:a.get(\"precision\"),assetSymbol:a.get(\"symbol\"),disableBackingAssetChange:this._getCurrentSupply()>0,disabledBackingAssetChangeCallback:Se}),s.a.createElement(\"p\",null,s.a.createElement(A.a,{content:\"account.user_issued_assets.approx_fee\"}),\": \",e))):null,s.a.createElement(M.a,{title:\"account.permissions\",updatedTab:this.tabChanged(4)},s.a.createElement(\"div\",{className:\"small-12 large-8 large-offset-2 grid-content\"},s.a.createElement(V.a,{path:\"components/AccountAssetCreate\",section:\"permissions\"}),s.a.createElement(\"p\",{className:\"grid-content has-error\"},s.a.createElement(A.a,{content:\"account.user_issued_assets.perm_warning\"})),C,s.a.createElement(\"p\",null,s.a.createElement(A.a,{content:\"account.user_issued_assets.approx_fee\"}),\": \",e))),s.a.createElement(M.a,{title:\"account.user_issued_assets.flags\",updatedTab:this.tabChanged(5)},s.a.createElement(\"div\",{className:\"small-12 large-8 large-offset-2 grid-content\"},s.a.createElement(V.a,{path:\"components/AccountAssetCreate\",section:\"flags\"}),y.charge_market_fee?s.a.createElement(\"div\",null,s.a.createElement(A.a,{component:\"h3\",content:\"account.user_issued_assets.market_fee\"}),s.a.createElement(\"table\",{className:\"table\"},s.a.createElement(\"tbody\",null,s.a.createElement(\"tr\",null,s.a.createElement(\"td\",{style:{border:\"none\",width:\"80%\"}},s.a.createElement(A.a,{content:\"account.user_issued_assets.charge_market_fee\"}),\":\"),s.a.createElement(\"td\",{style:{border:\"none\"}},s.a.createElement(Y.Switch,{checked:c.charge_market_fee,onChange:this._onFlagChange.bind(this,\"charge_market_fee\")}))))),s.a.createElement(\"div\",{className:L()({disabled:!c.charge_market_fee})},s.a.createElement(\"label\",null,s.a.createElement(A.a,{content:\"account.user_issued_assets.market_fee\"}),\" \",\"(%)\",s.a.createElement(\"input\",{type:\"number\",value:i.market_fee_percent,onChange:this._onUpdateInput.bind(this,\"market_fee_percent\")})),s.a.createElement(\"label\",null,s.a.createElement(G.a,{label:\"account.user_issued_assets.max_market_fee\",amount:i.max_market_fee,onChange:this._onUpdateInput.bind(this,\"max_market_fee\"),asset:a.get(\"id\"),assets:[a.get(\"id\")],placeholder:\"0.0\",tabIndex:1})),o.max_market_fee?s.a.createElement(\"p\",{className:\"grid-content has-error\"},o.max_market_fee):null)):null,s.a.createElement(\"h3\",null,s.a.createElement(A.a,{content:\"account.user_issued_assets.flags\"})),E,s.a.createElement(\"p\",null,s.a.createElement(A.a,{content:\"account.user_issued_assets.approx_fee\"}),\": \",e),o.conflict_producer?s.a.createElement(\"p\",{className:\"grid-content has-error\"},o.conflict_producer):null)),p?s.a.createElement(M.a,{title:\"account.user_issued_assets.feed_producers\",updatedTab:this.tabChanged(6)},s.a.createElement(be,{asset:this.props.asset,account:this.props.account,witnessFed:c.witness_fed_asset,committeeFed:c.committee_fed_asset,producers:this.state.feedProducers,onChangeList:this.onChangeFeedProducerList.bind(this)}),o.max_feed_producer?s.a.createElement(\"p\",{className:\"grid-content has-error large-8 large-offset-2\",style:{marginTop:\"20px\"}},o.max_feed_producer):null):null))),s.a.createElement(Ne,Ee({visible:this.state.isAssetUpdateConfirmationModalVisible,hideModal:this.hideAssetUpdateConfirmationModal,showModal:this.showAssetUpdateConfirmationModal,tabsChanged:this.tabsChanged(),_cancelConfirm:this._cancelConfirm.bind(this),_updateAsset:this._updateAsset.bind(this)},this.props)))}}]),t}();Pe.propTypes={globalObject:c.a.ChainObject.isRequired},Pe.defaultProps={globalObject:\"2.0.0\"},Pe=Object(u.a)(Pe),Pe=Object(j.a)(Pe,{propNames:[\"asset\",\"core\"],defaultProps:{core:\"1.3.0\"},withDynamic:!0});var Ne=function(e){function t(){Ae(this,t);var e=Ce(this,(t.__proto__||Object.getPrototypeOf(t)).call(this));return e.state={open:!1},e}return xe(t,s.a.Component),we(t,[{key:\"show\",value:function(){var e=this;this.setState({open:!0},function(){_e.a.publish(e.props.modalId,\"open\")})}},{key:\"onClose\",value:function(){this.setState({open:!1})}},{key:\"render\",value:function(){var e=this.props.tabsChanged,t=[s.a.createElement(Y.Button,{type:\"primary\",key:\"submit\",onClick:this.props._updateAsset},W.a.translate(\"global.confirm\")),s.a.createElement(Y.Button,{key:\"cancel\",onClick:this.props.hideModal},W.a.translate(\"global.cancel\"))];return s.a.createElement(Y.Modal,{visible:this.props.visible,footer:t,onCancel:this.props.hideModal,title:W.a.translate(\"account.confirm_asset_modal.header\")},s.a.createElement(A.a,{content:\"account.confirm_asset_modal.are_you_sure\",component:\"div\",style:{paddingBottom:\"1rem\"}}),s.a.createElement(\"div\",null,s.a.createElement(\"ul\",null,e[0]?s.a.createElement(\"li\",null,s.a.createElement(A.a,{content:\"account.user_issued_assets.primary\"})):null,e[1]?s.a.createElement(\"li\",null,s.a.createElement(A.a,{content:\"account.whitelist.title\"})):null,e[2]?s.a.createElement(\"li\",null,s.a.createElement(A.a,{content:\"account.user_issued_assets.description\"})):null,e[3]?s.a.createElement(\"li\",null,s.a.createElement(A.a,{content:\"account.user_issued_assets.bitasset_opts\"})):null,e[4]?s.a.createElement(\"li\",null,s.a.createElement(A.a,{content:\"account.permissions\"})):null,e[5]?s.a.createElement(\"li\",null,s.a.createElement(A.a,{content:\"account.user_issued_assets.flags\"})):null,e[6]?s.a.createElement(\"li\",null,s.a.createElement(A.a,{content:\"account.user_issued_assets.feed_producers\"})):null)))}}]),t}(),je=function(e){function t(){return Ae(this,t),Ce(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return xe(t,s.a.Component),we(t,[{key:\"render\",value:function(){var e=this.props.match.params.asset;return s.a.createElement(Pe,Ee({asset:e},this.props))}}]),t}(),Me=Object(ye.a)(je),Ie=function(){function e(e,t){for(var a=0;a<t.length;a++){var n=t[a];n.enumerable=n.enumerable||!1,n.configurable=!0,\"value\"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,a,n){return a&&e(t.prototype,a),n&&e(t,n),t}}();var Te=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError(\"Cannot call a class as a function\")}(this,t),function(e,t){if(!e)throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\");return!t||\"object\"!=typeof t&&\"function\"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return function(e,t){if(\"function\"!=typeof t&&null!==t)throw new TypeError(\"Super expression must either be null or a function, not \"+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,s.a.Component),Ie(t,[{key:\"render\",value:function(){var e=this.props.stat_object.toJS();return s.a.createElement(\"tbody\",null,s.a.createElement(\"tr\",null,s.a.createElement(\"td\",null,s.a.createElement(A.a,{content:\"account.member.fees_paid\"}),\" \"),s.a.createElement(\"td\",null,s.a.createElement(O.a,{amount:parseFloat(e.lifetime_fees_paid),asset:\"1.3.0\"}))))}}]),t}();Te.propTypes={stat_object:c.a.ChainObject.isRequired};var Re=Object(u.a)(Te),Be=a(581),De=a(44),Le=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var n in a)Object.prototype.hasOwnProperty.call(a,n)&&(e[n]=a[n])}return e},Ve=function(){function e(e,t){for(var a=0;a<t.length;a++){var n=t[a];n.enumerable=n.enumerable||!1,n.configurable=!0,\"value\"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,a,n){return a&&e(t.prototype,a),n&&e(t,n),t}}();function Fe(e,t){if(!(e instanceof t))throw new TypeError(\"Cannot call a class as a function\")}function qe(e,t){if(!e)throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\");return!t||\"object\"!=typeof t&&\"function\"!=typeof t?e:t}function Ue(e,t){if(\"function\"!=typeof t&&null!==t)throw new TypeError(\"Super expression must either be null or a function, not \"+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var We=function(e){function t(){return Fe(this,t),qe(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return Ue(t,s.a.Component),Ve(t,[{key:\"render\",value:function(){var e=this.props.dprops;return s.a.createElement(V.a,Le({},this.props,{path:\"components/AccountMembership\",section:\"fee-division\",nextMaintenanceTime:{time:e.get(\"next_maintenance_time\")}}))}}]),t}();We.propTypes={dprops:c.a.ChainObject.isRequired},We.defaultProps={dprops:\"2.1.0\"},We=Object(u.a)(We);var ze=function(e){function t(){return Fe(this,t),qe(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return Ue(t,s.a.Component),Ve(t,[{key:\"upgradeAccount\",value:function(e,t,a){a.preventDefault(),o.a.upgradeAccount(e,t)}},{key:\"componentWillMount\",value:function(){d.a.getFinalFeeAsset(this.props.account,\"account_upgrade\")}},{key:\"render\",value:function(){var e=this.props,t=e.gprops,a=e.core_asset,n=this.props.account.toJS(),o=q.ChainStore.getAccount(n.lifetime_referrer,!1);o&&(n.lifetime_referrer_name=o.get(\"name\"));var r=q.ChainStore.getAccount(n.referrer,!1);r&&(n.referrer_name=r.get(\"name\"));var i=q.ChainStore.getAccount(n.registrar,!1);i&&(n.registrar_name=i.get(\"name\"));var l=n.name,c=n.network_fee_percentage/100,u=n.lifetime_referrer_fee_percentage/100,p=100-c-u,d=p*n.referrer_rewards_percentage/1e4,h=100-d-u-c,m=t.getIn([\"parameters\",\"current_fees\",\"parameters\",8,1,\"membership_lifetime_fee\"])*t.getIn([\"parameters\",\"current_fees\",\"scale\"])/1e4,f=q.ChainStore.getAccountMemberStatus(this.props.account),g=\"account.member.\"+f,b=null;\"annual\"===f&&(b=s.a.createElement(\"span\",null,\"(\",s.a.createElement(A.a,{content:\"account.member.expires\"}),\" \",s.a.createElement(Be.a,{time:n.membership_expiration_date}),\")\"));var v=n.membership_expiration_date;return\"1969-12-31T23:59:59\"===v?v=\"Never\":\"1970-01-01T00:00:00\"===v&&(v=\"N/A\"),s.a.createElement(\"div\",{className:\"grid-content app-tables no-padding\",ref:\"appTables\"},s.a.createElement(\"div\",{className:\"content-block small-12\"},s.a.createElement(\"div\",{className:\"tabs-container generic-bordered-box\"},s.a.createElement(M.b,{segmented:!1,setting:\"membershipTab\",className:\"account-tabs\",tabsClass:\"account-overview bordered-header content-block\",contentClass:\"padding\"},s.a.createElement(M.a,{title:\"account.member.membership\"},s.a.createElement(\"h3\",null,s.a.createElement(A.a,{content:g}),\" \",b),\"lifetime\"===f?null:s.a.createElement(\"div\",null,s.a.createElement(\"div\",{className:\"large-6 medium-8\"},s.a.createElement(V.a,{path:\"components/AccountMembership\",section:\"lifetime\",feesCashback:100-c,price:{amount:m,asset:a}}),s.a.createElement(\"div\",{className:\"button no-margin\",onClick:this.upgradeAccount.bind(this,n.id,!0)},s.a.createElement(A.a,{content:\"account.member.upgrade_lifetime\"})),\" \",\"Â  Â \",null),s.a.createElement(\"br\",null),s.a.createElement(\"hr\",null)),s.a.createElement(\"div\",{className:\"content-block no-margin\"},s.a.createElement(\"div\",{className:\"no-margin grid-block vertical large-horizontal\"},s.a.createElement(\"div\",{className:\"no-margin grid-block large-5\"},s.a.createElement(\"div\",{className:\"grid-content\"},\"lifetime\"===f?s.a.createElement(\"div\",null,s.a.createElement(\"h4\",null,s.a.createElement(A.a,{content:\"account.member.referral_link\"})),s.a.createElement(A.a,{content:\"account.member.referral_text\",wallet_name:Object(De.l)()}),\":\",s.a.createElement(\"h5\",null,Object(De.m)()+\"/?r=\"+n.name)):null,s.a.createElement(\"h4\",null,s.a.createElement(A.a,{content:\"account.member.fee_allocation\"})),s.a.createElement(\"table\",{className:\"table key-value-table\"},s.a.createElement(\"tbody\",null,s.a.createElement(\"tr\",null,s.a.createElement(\"td\",null,s.a.createElement(A.a,{content:\"account.member.network_percentage\"})),s.a.createElement(\"td\",null,c,\"%\")),s.a.createElement(\"tr\",null,s.a.createElement(\"td\",null,s.a.createElement(A.a,{content:\"account.member.lifetime_referrer\"}),\" \",\"Â  (\",s.a.createElement(w.a,{to:\"/account/\"+n.lifetime_referrer_name},n.lifetime_referrer_name),\")\"),s.a.createElement(\"td\",null,u,\"%\")),s.a.createElement(\"tr\",null,s.a.createElement(\"td\",null,s.a.createElement(A.a,{content:\"account.member.registrar\"}),\" \",\"Â  (\",s.a.createElement(w.a,{to:\"/account/\"+n.registrar_name},n.registrar_name),\")\"),s.a.createElement(\"td\",null,h,\"%\")),s.a.createElement(\"tr\",null,s.a.createElement(\"td\",null,s.a.createElement(A.a,{content:\"account.member.referrer\"}),\" \",\"Â  (\",s.a.createElement(w.a,{to:\"/account/\"+n.referrer_name},n.referrer_name),\")\"),s.a.createElement(\"td\",null,d,\"%\")),s.a.createElement(\"tr\",null,s.a.createElement(\"td\",null,s.a.createElement(A.a,{content:\"account.member.membership_expiration\"}),\" \"),s.a.createElement(\"td\",null,v)))),s.a.createElement(\"h4\",{style:{paddingTop:\"1rem\"}},s.a.createElement(A.a,{content:\"account.member.fees_cashback\"})),s.a.createElement(\"table\",{className:\"table key-value-table\"},s.a.createElement(Re,{stat_object:n.statistics})))),s.a.createElement(\"div\",{className:\"grid-block large-7\"},s.a.createElement(\"div\",{className:\"grid-content\"},s.a.createElement(We,{account:l,networkFee:c,referrerFee:d,registrarFee:h,lifetimeFee:u,referrerTotalFee:p,maintenanceInterval:t.getIn([\"parameters\",\"maintenance_interval\"]),vestingThreshold:{amount:t.getIn([\"parameters\",\"cashback_vesting_threshold\"]),asset:a},vestingPeriod:t.getIn([\"parameters\",\"cashback_vesting_period_seconds\"])/60/60/24}))))))))))}}]),t}();ze.propTypes={account:c.a.ChainAccount.isRequired,gprops:c.a.ChainObject.isRequired,core_asset:c.a.ChainAsset.isRequired},ze.defaultProps={gprops:\"2.0.0\",core_asset:\"1.3.0\"};var Je=ze=Object(u.a)(ze),Ke=a(65),Ge=a(15),Ze=function(){function e(e,t){for(var a=0;a<t.length;a++){var n=t[a];n.enumerable=n.enumerable||!1,n.configurable=!0,\"value\"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,a,n){return a&&e(t.prototype,a),n&&e(t,n),t}}();function He(e,t){if(!(e instanceof t))throw new TypeError(\"Cannot call a class as a function\")}function Qe(e,t){if(!e)throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\");return!t||\"object\"!=typeof t&&\"function\"!=typeof t?e:t}function Ye(e,t){if(\"function\"!=typeof t&&null!==t)throw new TypeError(\"Super expression must either be null or a function, not \"+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var Xe=function(e){function t(){return He(this,t),Qe(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return Ye(t,s.a.Component),Ze(t,[{key:\"_onClaim\",value:function(e,t){var a=this;t.preventDefault(),Ke.a.claimVestingBalance(this.props.account.id,this.props.vb,e).then(function(){\"function\"==typeof a.props.handleChanged&&a.props.handleChanged()})}},{key:\"render\",value:function(){var e=this.props.vb;if(!this.props.vb)return null;var t=void 0,a=void 0,n=void 0,o=void 0,r=void 0;return e&&(r=e.balance.amount,t=q.ChainStore.getAsset(e.balance.asset_id),n=e.policy[1].coin_seconds_earned,o=0===(a=e.policy[1].vesting_seconds)?1:n/(a*r)),t&&r?s.a.createElement(\"div\",null,s.a.createElement(A.a,{component:\"h5\",content:\"account.vesting.balance_number\",id:e.id}),s.a.createElement(\"table\",{className:\"table key-value-table\"},s.a.createElement(\"tbody\",null,s.a.createElement(\"tr\",null,s.a.createElement(\"td\",null,s.a.createElement(A.a,{content:\"account.member.balance_type\"})),s.a.createElement(\"td\",null,s.a.createElement(\"span\",null,e.balance_type))),s.a.createElement(\"tr\",null,s.a.createElement(\"td\",null,s.a.createElement(A.a,{content:\"account.member.cashback\"})),s.a.createElement(\"td\",null,s.a.createElement(O.a,{amount:e.balance.amount,asset:e.balance.asset_id}))),s.a.createElement(\"tr\",null,s.a.createElement(\"td\",null,s.a.createElement(A.a,{content:\"account.member.earned\"})),s.a.createElement(\"td\",null,F.a.format_number(F.a.get_asset_amount(n/86400,t),0),\"Â \",s.a.createElement(A.a,{content:\"account.member.coindays\"}))),s.a.createElement(\"tr\",null,s.a.createElement(\"td\",null,s.a.createElement(A.a,{content:\"account.member.required\"})),s.a.createElement(\"td\",null,F.a.format_number(F.a.get_asset_amount(e.balance.amount*a/86400,t),0),\"Â \",s.a.createElement(A.a,{content:\"account.member.coindays\"}))),s.a.createElement(\"tr\",null,s.a.createElement(\"td\",null,s.a.createElement(A.a,{content:\"account.member.remaining\"})),s.a.createElement(\"td\",null,F.a.format_number(a*(1-o)/86400||0,2),\"Â days\")),s.a.createElement(\"tr\",null,s.a.createElement(\"td\",null,s.a.createElement(A.a,{content:\"account.member.available\"})),s.a.createElement(\"td\",null,F.a.format_number(100*o,2),\"% /\",\" \",s.a.createElement(O.a,{amount:o*e.balance.amount,asset:t.get(\"id\")}))),s.a.createElement(\"tr\",null,s.a.createElement(\"td\",{colSpan:\"2\",style:{textAlign:\"right\"}},s.a.createElement(\"button\",{onClick:this._onClaim.bind(this,!1),className:\"button\"},s.a.createElement(A.a,{content:\"account.member.claim\"}))))))):null}}]),t}(),$e=function(e){function t(){He(this,t);var e=Qe(this,(t.__proto__||Object.getPrototypeOf(t)).call(this));return e.state={vbs:null},e}return Ye(t,s.a.Component),Ze(t,[{key:\"componentWillMount\",value:function(){this.retrieveVestingBalances.call(this,this.props.account.get(\"id\"))}},{key:\"componentWillUpdate\",value:function(e){var t=e.account.get(\"id\");t!==this.props.account.get(\"id\")&&this.retrieveVestingBalances.call(this,t)}},{key:\"retrieveVestingBalances\",value:function(e){var t=this;e=e||this.props.account.get(\"id\"),Ge.Apis.instance().db_api().exec(\"get_vesting_balances\",[e]).then(function(e){t.setState({vbs:e})}).catch(function(e){console.log(\"error:\",e)})}},{key:\"render\",value:function(){var e=this,t=this.state.vbs;if(!t||!this.props.account||!this.props.account.get(\"vesting_balances\"))return null;var a=this.props.account.toJS(),n=t.map(function(t){if(t.balance.amount)return s.a.createElement(Xe,{key:t.id,vb:t,account:a,handleChanged:e.retrieveVestingBalances.bind(e)})}).filter(function(e){return!!e});return s.a.createElement(\"div\",{className:\"grid-content app-tables no-padding\",ref:\"appTables\"},s.a.createElement(\"div\",{className:\"content-block small-12\"},s.a.createElement(\"div\",{className:\"tabs-container generic-bordered-box\"},s.a.createElement(M.b,{segmented:!1,setting:\"vestingTab\",className:\"account-tabs\",tabsClass:\"account-overview bordered-header content-block\",contentClass:\"padding\"},s.a.createElement(M.a,{title:\"account.vesting.title\"},s.a.createElement(A.a,{content:\"account.vesting.explain\",component:\"p\"}),n.length?n:s.a.createElement(\"h4\",{style:{paddingTop:\"1rem\"}},s.a.createElement(A.a,{content:\"account.vesting.no_balances\"})))))))}}]),t}();$e.VestingBalance=Xe;var et=$e,tt=a(791),at=a(237),nt=a(369),st=a(46),ot=a(20),rt=a(103),it=a(579),lt=a.n(it),ct=function(){function e(e,t){for(var a=0;a<t.length;a++){var n=t[a];n.enumerable=n.enumerable||!1,n.configurable=!0,\"value\"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,a,n){return a&&e(t.prototype,a),n&&e(t,n),t}}();var ut=function(e){function t(e){!function(e,t){if(!(e instanceof t))throw new TypeError(\"Cannot call a class as a function\")}(this,t);var a=function(e,t){if(!e)throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\");return!t||\"object\"!=typeof t&&\"function\"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return a.state=a._getInitialState(),a.onPasswordEnter=a.onPasswordEnter.bind(a),a.onKeyDown=a.onKeyDown.bind(a),a.onCancel=a.onCancel.bind(a),a.onClose=a.onClose.bind(a),a}return function(e,t){if(\"function\"!=typeof t&&null!==t)throw new TypeError(\"Super expression must either be null or a function, not \"+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,s.a.Component),ct(t,[{key:\"_getInitialState\",value:function(){return{isShowQrcode:!1,keyString:null}}},{key:\"onCancel\",value:function(){this.props.hideModal(),this.onClose()}},{key:\"onClose\",value:function(){this.refs.password_input&&(this.refs.password_input.value=\"\"),this.setState(this._getInitialState())}},{key:\"onPasswordEnter\",value:function(e){e.preventDefault();var t=this.refs.password_input.value,a=this.props.keyValue;if(null!=t&&\"\"!=t){if(void 0!==a&&null!=a&&\"\"!=a){var n=q.Aes.fromSeed(t).encryptToHex(a);this.setState({isShowQrcode:!0,keyString:n})}}else this.setState({isShowQrcode:!0,keyString:a})}},{key:\"onKeyDown\",value:function(e){13===e.keyCode&&this.onPasswordEnter(e)}},{key:\"render\",value:function(){var e=this,t=null;this.state.isShowQrcode&&(t={textAlign:\"center\"});var a=[];return this.state.isShowQrcode||a.push(s.a.createElement(Y.Button,{type:\"primary\",key:\"submit\",onClick:this.onPasswordEnter},W.a.translate(\"modal.ok\"))),a.push(s.a.createElement(Y.Button,{key:\"cancel\",onClick:this.onCancel},W.a.translate(\"cancel\"))),s.a.createElement(Y.Modal,{visible:this.props.visible,onCancel:this.onCancel,footer:a},s.a.createElement(\"div\",{className:\"text-center\"},s.a.createElement(\"div\",{style:{margin:\"1.5rem 0\"}},s.a.createElement(A.a,{component:\"h4\",content:\"modal.qrcode.title\"})),s.a.createElement(\"form\",{className:\"full-width\",style:{margin:\"0 3.5rem\"},onSubmit:this.onPasswordEnter,noValidate:!0},s.a.createElement(\"div\",{className:\"form-group\"},this.state.isShowQrcode?s.a.createElement(\"section\",{style:t},s.a.createElement(\"span\",{style:{background:\"#fff\",padding:\".75rem\",display:\"inline-block\"}},s.a.createElement(lt.a,{size:256,value:this.state.keyString}))):s.a.createElement(\"section\",null,s.a.createElement(\"label\",{className:\"left-label\"},s.a.createElement(A.a,{unsafe:!0,content:\"modal.qrcode.input_message\"})),s.a.createElement(\"input\",{name:\"password\",type:\"text\",onFocus:function(){e.refs.password_input.setAttribute(\"type\",\"password\")},ref:\"password_input\",autoComplete:\"off\",onKeyDown:this.onKeyDown}))))))}}]),t}();ut.propTypes={modalId:E.a.string.isRequired,keyValue:E.a.string},ut.defaultProps={modalId:\"qr_code_password_modal\"};var pt=ut,dt=function(){function e(e,t){for(var a=0;a<t.length;a++){var n=t[a];n.enumerable=n.enumerable||!1,n.configurable=!0,\"value\"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,a,n){return a&&e(t.prototype,a),n&&e(t,n),t}}();var ht=function(e){function t(){!function(e,t){if(!(e instanceof t))throw new TypeError(\"Cannot call a class as a function\")}(this,t);var e=function(e,t){if(!e)throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\");return!t||\"object\"!=typeof t&&\"function\"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).call(this));return e.state=e._getInitialState(),e.showModal=e.showModal.bind(e),e.hideModal=e.hideModal.bind(e),e.showQrModal=e.showQrModal.bind(e),e.hideQrModal=e.hideQrModal.bind(e),e.onClose=e.onClose.bind(e),e}return function(e,t){if(\"function\"!=typeof t&&null!==t)throw new TypeError(\"Super expression must either be null or a function, not \"+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,n[\"Component\"]),dt(t,[{key:\"_getInitialState\",value:function(){return{isModalVisible:!1,isQrModalVisible:!1,wif:null}}},{key:\"reset\",value:function(){this.setState(this._getInitialState())}},{key:\"hideModal\",value:function(){this.setState({isModalVisible:!1})}},{key:\"showModal\",value:function(){this.setState({isModalVisible:!0})}},{key:\"hideQrModal\",value:function(){this.setState({isQrModalVisible:!1})}},{key:\"showQrModal\",value:function(){this.setState({isQrModalVisible:!0})}},{key:\"render\",value:function(){var e=\"key_view_modal\"+this.props.pubkey,t=rt.a.getState().keys;if(!t.has(this.props.pubkey))return s.a.createElement(\"span\",null,this.props.children);var n=t.get(this.props.pubkey),o=[s.a.createElement(Y.Button,{key:\"cancel\",onClick:this.onClose},W.a.translate(\"transfer.close\"))];return s.a.createElement(\"span\",null,s.a.createElement(\"a\",{onClick:this.onOpen.bind(this)},this.props.children),s.a.createElement(Y.Modal,{visible:this.state.isModalVisible,title:W.a.translate(\"account.perm.key_viewer\"),ref:e,id:e,onCancel:this.onClose,footer:o},s.a.createElement(\"div\",{className:\"grid-block vertical\"},s.a.createElement(\"div\",{className:\"content-block\"},s.a.createElement(\"div\",{className:\"grid-content\"},s.a.createElement(\"label\",null,s.a.createElement(A.a,{content:\"account.perm.public\"})),this.props.pubkey),s.a.createElement(\"br\",null),s.a.createElement(\"div\",{className:\"grid-block grid-content\"},s.a.createElement(\"label\",null,s.a.createElement(A.a,{content:\"account.perm.private\"})),s.a.createElement(\"div\",null,this.state.wif?s.a.createElement(\"span\",null,s.a.createElement(\"p\",{style:{fontWeight:600}},this.state.wif),s.a.createElement(\"div\",{className:\"button-group\"},s.a.createElement(\"div\",{className:\"button\",onClick:this.onHide.bind(this)},\"hide\"),s.a.createElement(\"div\",{className:\"clickable\",onClick:this.showQrModal},s.a.createElement(\"img\",{style:{height:50},src:a(2121)})))):s.a.createElement(\"span\",null,s.a.createElement(\"div\",{className:\"button\",onClick:this.onShow.bind(this)},s.a.createElement(A.a,{content:\"account.perm.show\"}))))),s.a.createElement(\"br\",null),s.a.createElement(\"div\",{className:\"grid-block grid-content\"},s.a.createElement(\"label\",null,s.a.createElement(A.a,{content:\"account.perm.brain\"})),null==n.brainkey_sequence?\"Non-deterministic\":n.brainkey_sequence),s.a.createElement(\"br\",null),n.import_account_names&&n.import_account_names.length?s.a.createElement(\"div\",{className:\"grid-block grid-content\"},s.a.createElement(\"label\",null,s.a.createElement(A.a,{content:\"account.perm.from\"})),n.import_account_names.join(\", \"),s.a.createElement(\"br\",null)):null))),s.a.createElement(pt,{showModal:this.showQrModal,hideModal:this.hideQrModal,visible:this.state.isQrModalVisible,keyValue:this.state.wif}))}},{key:\"onOpen\",value:function(){this.showModal()}},{key:\"onClose\",value:function(){this.reset(),this.hideModal()}},{key:\"onShow\",value:function(){var e=this;st.a.unlock().then(function(){var t=ot.a.getPrivateKey(e.props.pubkey);e.setState({wif:t.toWif()})}).catch(function(){})}},{key:\"onHide\",value:function(){this.setState({wif:null})}}]),t}();ht.propTypes={pubkey:E.a.string.isRequired};var mt=ht,ft=a(219),gt=function(){function e(e,t){for(var a=0;a<t.length;a++){var n=t[a];n.enumerable=n.enumerable||!1,n.configurable=!0,\"value\"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,a,n){return a&&e(t.prototype,a),n&&e(t,n),t}}();function bt(e,t){if(!(e instanceof t))throw new TypeError(\"Cannot call a class as a function\")}function vt(e,t){if(!e)throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\");return!t||\"object\"!=typeof t&&\"function\"!=typeof t?e:t}function _t(e,t){if(\"function\"!=typeof t&&null!==t)throw new TypeError(\"Super expression must either be null or a function, not \"+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var yt=function(e){function t(){return bt(this,t),vt(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return _t(t,s.a.Component),gt(t,[{key:\"shouldComponentUpdate\",value:function(e){return!F.a.are_equal_shallow(e,this.props)}},{key:\"_lookUpPubKeyForAddress\",value:function(e){return ft.a.getState().addresses.get(e)}},{key:\"render\",value:function(){var e=void 0,t=void 0,a=void 0,n=\"_accounts\",o=this.props.pubkey,r=rt.a.getState().keys,i=!1;return this.props.account?(e=this.props.account.get(\"name\"),t=this.props.account.get(\"id\"),a=s.a.createElement(w.a,{to:\"/account/\"+e+\"/permissions\"},e)):o?(e=t=o,a=s.a.createElement(mt,{pubkey:o},o),n=\"_keys\",i=r.has(o)):this.props.address&&(o=this._lookUpPubKeyForAddress(this.props.address),t=this.props.address,a=o?s.a.createElement(mt,{pubkey:o},o):this.props.address,n=\"_addresses\",i=r.has(o)),s.a.createElement(\"tr\",{key:e},s.a.createElement(\"td\",null,this.props.account?s.a.createElement(nt.a,{size:{height:30,width:30},account:e}):o?s.a.createElement(\"div\",{className:\"account-image\"},s.a.createElement(mt,{pubkey:o},s.a.createElement(I.a,{name:\"key\",title:\"icons.key\",size:\"4x\"}))):null),s.a.createElement(\"td\",{className:(i?\"my-key\":\"\")+\" pub-key\"},a),s.a.createElement(\"td\",null,this.props.weights[t]),s.a.createElement(\"td\",null,s.a.createElement(\"button\",{className:\"button\",onClick:this.props.onRemoveItem.bind(this,t,n)},s.a.createElement(A.a,{content:\"account.votes.remove_witness\"}))))}}]),t}();yt.propTypes={account:E.a.object,pubkey:E.a.string,address:E.a.string,onRemoveItem:E.a.func.isRequired,weights:E.a.object};var Et=function(e){function t(e){bt(this,t);var a=vt(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return a.state={selected_item:null,item_name_input:\"\",weight_input:\"\",error:null},a.onItemChange=a.onItemChange.bind(a),a.onItemAccountChange=a.onItemAccountChange.bind(a),a.onAddItem=a.onAddItem.bind(a),a}return _t(t,s.a.Component),gt(t,[{key:\"onItemChange\",value:function(e){this.setState({item_name_input:e})}},{key:\"onItemAccountChange\",value:function(e){var t=this;if(this.setState({selected_item:e,error:null}),e&&this.props.validateAccount){var a=this.props.validateAccount(e);if(null===a)return;\"string\"==typeof a?this.setState({error:a}):a.then(function(e){return t.setState({error:e})})}}},{key:\"onWeightChanged\",value:function(e){var t=e.target.value.trim();this.setState({weight_input:parseInt(t)})}},{key:\"onAddItem\",value:function(e){if(e){this.setState({selected_item:null,item_name_input:\"\",weight_input:\"\",error:null});var t=\"string\"==typeof e?e:e.get(\"id\");this.props.onAddItem(t,this.state.weight_input)}}},{key:\"onWeightKeyDown\",value:function(e){13===e.keyCode&&this.state.weight_input&&this.state.selected_item&&this.onAddItem(this.state.selected_item)}},{key:\"render\",value:function(){var e=this,t=0,a=this.props.accounts.filter(function(e){return!!e}).sort(function(e,t){return e.get(\"name\")>t.get(\"name\")?1:e.get(\"name\")<t.get(\"name\")?-1:0}).map(function(a){return s.a.createElement(yt,{key:t++,account:a,weights:e.props.weights,onRemoveItem:e.props.onRemoveItem})}),n=this.props.keys.map(function(a){return s.a.createElement(yt,{key:t++,pubkey:a,weights:e.props.weights,onRemoveItem:e.props.onRemoveItem})}),o=this.props.addresses.map(function(a){return s.a.createElement(yt,{key:t++,address:a,weights:e.props.weights,onRemoveItem:e.props.onRemoveItem})}),r=this.state.error;!r&&this.state.selected_item&&-1!==this.props.accounts.indexOf(this.state.selected_item)&&(r=W.a.translate(\"account.perm.warning3\")),!r&&this.state.item_name_input&&-1!==this.props.keys.indexOf(this.state.item_name_input)&&(r=W.a.translate(\"account.perm.warning4\"));var i=[\"10%\",\"70%\",\"30%\",\"10%\"];return s.a.createElement(\"div\",null,s.a.createElement(pe.a,{label:this.props.label,error:r,placeholder:this.props.placeholder,account:this.state.item_name_input,accountName:this.state.item_name_input,onChange:this.onItemChange,onAccountChanged:this.onItemAccountChange,onAction:this.onAddItem,action_label:\"account.votes.add_witness\",tabIndex:this.props.tabIndex,allowPubKey:!0,disableActionButton:!this.state.weight_input,allowUppercase:!0},s.a.createElement(\"input\",{value:this.state.weight_input,onChange:this.onWeightChanged.bind(this),className:\"weight-input\",type:\"number\",autoComplete:\"off\",placeholder:W.a.translate(\"account.perm.weight\"),onKeyDown:this.onWeightKeyDown.bind(this),tabIndex:this.props.tabIndex+1})),s.a.createElement(\"div\",{style:{paddingTop:\"2rem\"}},s.a.createElement(\"table\",{className:\"table\"},s.a.createElement(\"thead\",null,s.a.createElement(\"tr\",null,s.a.createElement(\"th\",{style:{width:i[0]}}),s.a.createElement(\"th\",{style:{width:i[1]}},s.a.createElement(A.a,{content:\"account.perm.acct_or_key\"})),s.a.createElement(\"th\",{style:{width:i[2]}},s.a.createElement(A.a,{content:\"account.perm.weight\"})),s.a.createElement(\"th\",{style:{width:i[3]}},s.a.createElement(A.a,{content:\"account.perm.action\"})))),s.a.createElement(\"tbody\",null,a,n,o))))}}]),t}();Et.propTypes={accounts:c.a.ChainObjectsList,onAddItem:E.a.func.isRequired,onRemoveItem:E.a.func.isRequired,validateAccount:E.a.func,label:E.a.string.isRequired,placeholder:E.a.string,tabIndex:E.a.number,weights:E.a.object};var wt=Object(u.a)(Et,{autosubscribe:!1}),kt=a(553),At=function(){function e(e,t){for(var a=0;a<t.length;a++){var n=t[a];n.enumerable=n.enumerable||!1,n.configurable=!0,\"value\"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,a,n){return a&&e(t.prototype,a),n&&e(t,n),t}}();var Ct=function(e){function t(){!function(e,t){if(!(e instanceof t))throw new TypeError(\"Cannot call a class as a function\")}(this,t);var e=function(e,t){if(!e)throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\");return!t||\"object\"!=typeof t&&\"function\"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).call(this));return e.state={validPassword:!1,pass:null,generatedPassword:\"P\"+q.key.get_random_key().toWif().toString()},e}return function(e,t){if(\"function\"!=typeof t&&null!==t)throw new TypeError(\"Super expression must either be null or a function, not \"+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,s.a.Component),At(t,[{key:\"onSubmit\",value:function(){}},{key:\"onPasswordChange\",value:function(e){var t=e.valid,a=this.props.account.get(\"name\"),n=t?ot.a.generateKeyFromPassword(a,\"active\",e.value).pubKey:null,s=t?ot.a.generateKeyFromPassword(a,\"owner\",e.value).pubKey:null,o=t?ot.a.generateKeyFromPassword(a,\"memo\",e.value).pubKey:null;this.setState({validPassword:e.valid,pass:e.value}),this.props.onSetPasswordKeys({active:n,owner:s,memo:o})}},{key:\"checkKeyUse\",value:function(e,t){return!!e&&(\"memo\"===t?e===this.props.memoKey:this.props[t+\"Keys\"].reduce(function(t,a){return a===e||t},!1))}},{key:\"_onUseKey\",value:function(e){if(arguments.length>1&&void 0!==arguments[1]&&arguments[1])this.props[\"active\"===e?\"onRemoveActive\":\"onRemoveOwner\"](this.props[e],\"_keys\");else if(this.props[e]){var t={active:this.props.account.getIn([\"active\",\"weight_threshold\"]),owner:this.props.account.getIn([\"owner\",\"weight_threshold\"])};console.log(\"key\",this.props[e],\"weights\",t,\"weight of role:\",t[e]),this.props[\"active\"===e?\"onAddActive\":\"owner\"===e?\"onAddOwner\":\"onSetMemo\"](this.props[e],t[e])}}},{key:\"render\",value:function(){var e=this.checkKeyUse(this.props.active&&this.props.active,\"active\"),t=this.checkKeyUse(this.props.owner&&this.props.owner,\"owner\"),a=this.checkKeyUse(this.props.memo&&this.props.memo,\"memo\"),n=W.a.translate(\"account.perm.use_text\"),o=W.a.translate(\"account.perm.remove_text\");return s.a.createElement(\"div\",null,s.a.createElement(\"p\",{style:{maxWidth:\"800px\"}},s.a.createElement(A.a,{content:\"account.perm.password_model_1\"})),s.a.createElement(\"p\",{style:{maxWidth:\"800px\"}},s.a.createElement(A.a,{content:\"wallet.password_model_1\"})),s.a.createElement(\"p\",{style:{maxWidth:\"800px\"}},s.a.createElement(A.a,{unsafe:!0,content:\"wallet.password_model_2\"})),s.a.createElement(\"div\",{className:\"divider\"}),s.a.createElement(\"form\",{style:{maxWidth:\"40rem\"},onSubmit:this.onSubmit.bind(this),noValidate:!0},s.a.createElement(\"label\",{className:\"left-label\"},s.a.createElement(A.a,{content:\"wallet.generated\"})),s.a.createElement(\"p\",null,this.state.generatedPassword),s.a.createElement(\"p\",{style:{fontWeight:\"bold\"}},s.a.createElement(A.a,{content:\"account.perm.password_model_2\"})),s.a.createElement(kt.a,{ref:\"password\",confirmation:!0,onChange:this.onPasswordChange.bind(this),noLabel:!0,passwordLength:12,checkStrength:!0})),s.a.createElement(\"table\",{className:\"table\"},s.a.createElement(\"tbody\",null,s.a.createElement(\"tr\",{className:e?\"in-use\":\"\"},s.a.createElement(\"td\",null,s.a.createElement(A.a,{content:\"account.perm.new_active\"}),\":\"),s.a.createElement(\"td\",null,this.props.active),s.a.createElement(\"td\",{className:\"text-right\"},s.a.createElement(\"div\",{className:\"button\",onClick:this._onUseKey.bind(this,\"active\",e)},e?o:n))),s.a.createElement(\"tr\",{className:t?\"in-use\":\"\"},s.a.createElement(\"td\",null,s.a.createElement(A.a,{content:\"account.perm.new_owner\"}),\":\"),s.a.createElement(\"td\",null,this.props.owner),s.a.createElement(\"td\",{className:\"text-right\"},s.a.createElement(\"div\",{className:\"button\",onClick:this._onUseKey.bind(this,\"owner\",t)},t?o:n))),s.a.createElement(\"tr\",{className:a?\"in-use\":\"\"},s.a.createElement(\"td\",null,s.a.createElement(A.a,{content:\"account.perm.new_memo\"}),\":\"),s.a.createElement(\"td\",null,this.props.memo),s.a.createElement(\"td\",{className:\"text-right\"},s.a.createElement(\"div\",{className:\"button\",style:{visibility:a?\"hidden\":\"\"},onClick:this._onUseKey.bind(this,\"memo\",a)},n))))),a?s.a.createElement(\"p\",{style:{maxWidth:\"800px\",paddingTop:10},className:\"has-error\"},s.a.createElement(A.a,{content:\"account.perm.memo_warning\"})):null)}}]),t}(),xt=function(){function e(e,t){for(var a=0;a<t.length;a++){var n=t[a];n.enumerable=n.enumerable||!1,n.configurable=!0,\"value\"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,a,n){return a&&e(t.prototype,a),n&&e(t,n),t}}();var Ot=function(e){function t(e){return function(e,t){if(!(e instanceof t))throw new TypeError(\"Cannot call a class as a function\")}(this,t),function(e,t){if(!e)throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\");return!t||\"object\"!=typeof t&&\"function\"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e))}return function(e,t){if(\"function\"!=typeof t&&null!==t)throw new TypeError(\"Super expression must either be null or a function, not \"+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,s.a.Component),xt(t,[{key:\"isValidPubKey\",value:function(e){return!!q.PublicKey.fromPublicKeyString(e)}},{key:\"onInputChanged\",value:function(e){var t=e.target.value.trim();this.props.onChange(t)}},{key:\"onKeyDown\",value:function(e){13===e.keyCode&&this.onAction(e)}},{key:\"onAction\",value:function(e){e.preventDefault(),this.props.onAction&&this.state.valid&&!this.props.disableActionButton&&this.props.onAction(e)}},{key:\"render\",value:function(){var e=this.props.error;e||!this.props.value||this.isValidPubKey(this.props.value)||(e=\"Not a valid public key\");var t=L()(\"button\",{disabled:e||this.props.disableActionButton}),a=rt.a.getState().keys,n=this.isValidPubKey(this.props.value)&&a.has(this.props.value);return s.a.createElement(\"div\",{className:\"pubkey-input no-overflow\"},s.a.createElement(\"div\",{className:\"content-area\"},s.a.createElement(\"div\",{className:\"header-area\"},!e&&this.props.value&&this.isValidPubKey(this.props.value)?s.a.createElement(\"label\",{className:\"right-label\"},s.a.createElement(A.a,{content:\"account.perm.valid_pub\"})):null,s.a.createElement(A.a,{className:\"left-label\",component:\"label\",content:this.props.label})),s.a.createElement(\"div\",{className:\"input-area\"},s.a.createElement(\"span\",{className:\"inline-label\"},s.a.createElement(\"div\",{className:\"account-image\"},s.a.createElement(mt,{pubkey:this.props.value},s.a.createElement(I.a,{name:\"key\",title:\"icons.key\",size:\"4x\"}))),s.a.createElement(\"input\",{type:\"text\",className:n?\"my-key\":\"\",value:this.props.value,placeholder:this.props.placeholder||counterpart.translate(\"account.public_key\"),ref:\"user_input\",onChange:this.onInputChanged.bind(this),onKeyDown:this.onKeyDown.bind(this),tabIndex:this.props.tabIndex}),this.props.onAction?s.a.createElement(\"button\",{className:t,onClick:this.onAction.bind(this)},s.a.createElement(A.a,{content:this.props.action_label})):null)),s.a.createElement(\"div\",{className:\"error-area has-error\"},s.a.createElement(\"span\",null,e))))}}]),t}();Ot.propTypes={label:E.a.string.isRequired,value:E.a.string,error:E.a.string,placeholder:E.a.string,onChange:E.a.func,onAction:E.a.func,tabIndex:E.a.number,disableActionButton:E.a.bool};var St=Ot,Pt=a(861),Nt=function(){function e(e,t){for(var a=0;a<t.length;a++){var n=t[a];n.enumerable=n.enumerable||!1,n.configurable=!0,\"value\"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,a,n){return a&&e(t.prototype,a),n&&e(t,n),t}}();var jt=function(e){function t(e){!function(e,t){if(!(e instanceof t))throw new TypeError(\"Cannot call a class as a function\")}(this,t);var a=function(e,t){if(!e)throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\");return!t||\"object\"!=typeof t&&\"function\"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return a.state={},a.onPublish=a.onPublish.bind(a),a.onReset=a.onReset.bind(a),a}return function(e,t){if(\"function\"!=typeof t&&null!==t)throw new TypeError(\"Super expression must either be null or a function, not \"+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,s.a.Component),Nt(t,[{key:\"componentWillMount\",value:function(){this.updateAccountData(this.props.account),d.a.getFinalFeeAsset(this.props.account,\"account_update\")}},{key:\"componentWillReceiveProps\",value:function(e){e.account!==this.props.account&&this.updateAccountData(e.account)}},{key:\"permissionsFromImmutableObj\",value:function(e){var t=e.get(\"weight_threshold\"),a=e.get(\"account_auths\"),n=e.get(\"key_auths\"),s=e.get(\"address_auths\"),o=a.map(function(e){return e.get(0)}),r=n.map(function(e){return e.get(0)}),i=s.map(function(e){return e.get(0)}),l=a.reduce(function(e,t){return e[t.get(0)]=t.get(1),e},{});return l=n.reduce(function(e,t){return e[t.get(0)]=t.get(1),e},l),{threshold:t,accounts:o,keys:r,addresses:i,weights:l=s.reduce(function(e,t){return e[t.get(0)]=t.get(1),e},l)}}},{key:\"permissionsToJson\",value:function(e,t,a,n,s){var o={weight_threshold:e};return o.account_auths=t.sort(F.a.sortID).map(function(e){return[e,s[e]]}).toJS(),o.key_auths=a.sort(F.a.sortID).map(function(e){return[e,s[e]]}).toJS(),o.address_auths=n.sort(F.a.sortID).map(function(e){return[e,s[e]]}).toJS(),o}},{key:\"updateAccountData\",value:function(e){var t=this.permissionsFromImmutableObj(e.get(\"active\")),a=this.permissionsFromImmutableObj(e.get(\"owner\")),n=e.get(\"options\").get(\"memo_key\"),s={active_accounts:t.accounts,active_keys:t.keys,active_addresses:t.addresses,owner_accounts:a.accounts,owner_keys:a.keys,owner_addresses:a.addresses,active_weights:t.weights,owner_weights:a.weights,active_threshold:t.threshold,owner_threshold:a.threshold,memo_key:n,prev_active_accounts:t.accounts,prev_active_keys:t.keys,prev_active_addresses:t.addresses,prev_owner_accounts:a.accounts,prev_owner_keys:a.keys,prev_owner_addresses:a.addresses,prev_active_weights:t.weights,prev_owner_weights:a.weights,prev_active_threshold:t.threshold,prev_owner_threshold:a.threshold,prev_memo_key:n};this.setState(s)}},{key:\"isChanged\",value:function(){var e=this.state;return e.active_accounts!==e.prev_active_accounts||e.active_keys!==e.prev_active_keys||e.active_addresses!==e.prev_active_addresses||e.owner_accounts!==e.prev_owner_accounts||e.owner_keys!==e.prev_owner_keys||e.owner_addresses!==e.prev_owner_addresses||e.active_threshold!==e.prev_active_threshold||e.owner_threshold!==e.prev_owner_threshold||e.memo_key!==e.prev_memo_key}},{key:\"didChange\",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.state;if(\"memo\"===e)return t.memo_key!==t.prev_memo_key;var a=!1;return[\"_keys\",\"_active_addresses\",\"_accounts\",\"_threshold\"].forEach(function(n){var s=e+n;t[s]!==t[\"prev_\"+s]&&(a=!0)}),a}},{key:\"onPublish\",value:function(){var e=this.state,t=this.props.account.toJS();t.fee={amount:0,asset_id:d.a.getFinalFeeAsset(t.id,\"account_update\")};var a={account:t.id};if(this.didChange(\"active\")&&(a.active=this.permissionsToJson(e.active_threshold,e.active_accounts,e.active_keys,e.active_addresses,e.active_weights)),this.didChange(\"owner\")&&(a.owner=this.permissionsToJson(e.owner_threshold,e.owner_accounts,e.owner_keys,e.owner_addresses,e.owner_weights)),this.didChange(\"owner\")&&0===e.owner_keys.size&&0===e.owner_addresses.size&&1===e.owner_accounts.size&&e.owner_accounts.first()===t.id)return Y.Notification.warning({message:W.a.translate(\"notifications.account_permissions_update_warning\")});e.memo_key&&this.didChange(\"memo\")&&this.isValidPubKey(e.memo_key)&&(a.new_options=this.props.account.get(\"options\").toJS(),a.new_options.memo_key=e.memo_key),at.a.updateAccount(a)}},{key:\"isValidPubKey\",value:function(e){return!!q.PublicKey.fromPublicKeyString(e)}},{key:\"onReset\",value:function(){var e=this.state;this.setState({active_accounts:e.prev_active_accounts,active_keys:e.prev_active_keys,active_addresses:e.prev_active_addresses,owner_accounts:e.prev_owner_accounts,owner_keys:e.prev_owner_keys,owner_addresses:e.prev_owner_addresses,active_weights:e.prev_active_weights,owner_weights:e.prev_owner_weights,active_threshold:e.prev_active_threshold,owner_threshold:e.prev_owner_threshold,memo_key:e.prev_memo_key})}},{key:\"onAddItem\",value:function(e,t,a){var n={},s=e+(F.a.is_object_id(t)?\"_accounts\":\"_keys\");n[s]=this.state[s].push(t),this.state[e+\"_weights\"][t]=a,this.setState(n)}},{key:\"onRemoveItem\",value:function(e,t,a){console.log(\"onRemoveItem\",e,t,a);var n={},s=e+a;n[s]=this.state[s].filter(function(e){return e!==t}),this.setState(n)}},{key:\"onThresholdChanged\",value:function(e,t){var a=parseInt(t.target.value.trim()),n={};n[e]=a,this.setState(n)}},{key:\"validateAccount\",value:function(e,t){return null}},{key:\"sumUpWeights\",value:function(e,t,a,n){var s=e.reduce(function(e,t){return e+n[t]},0);return s=t.reduce(function(e,t){return e+n[t]},s),a.reduce(function(e,t){return e+n[t]},s)}},{key:\"onMemoKeyChanged\",value:function(e){this.setState({memo_key:e})}},{key:\"onSetPasswordKeys\",value:function(e){var t={};(arguments.length>1&&void 0!==arguments[1]?arguments[1]:[\"active\",\"owner\",\"memo\"]).forEach(function(a){t[\"password_\"+a]=e[a]}),this.setState(t)}},{key:\"onPdfCreate\",value:function(){Object(tt.a)(this.props.account)}},{key:\"render\",value:function(){var e=this,t=void 0,a=void 0,n=this.state,o=n.active_accounts,r=n.active_keys,i=n.active_addresses,l=n.active_weights,c=this.state,u=c.owner_accounts,p=c.owner_keys,d=c.owner_addresses,h=c.owner_weights,f=this.state.active_threshold>0?this.state.active_threshold:0,g=this.sumUpWeights(o,r,i,l);this.didChange(\"active\")&&g<f&&(t=W.a.translate(\"account.perm.warning1\",{weights_total:g,threshold:f})),f=this.state.owner_threshold>0?this.state.owner_threshold:0,g=this.sumUpWeights(u,p,d,h),this.didChange(\"owner\")&&g<f&&(a=W.a.translate(\"account.perm.warning2\",{weights_total:g,threshold:f}));var b=\"button\"+(!t&&!a&&this.isChanged()&&this.isValidPubKey(this.state.memo_key)?\"\":\" disabled\"),v=\"button\"+(this.isChanged()?\"\":\" disabled\"),_=m.a.Set();return _=_.add(this.props.account.get(\"id\")),s.a.createElement(\"div\",{className:\"grid-content app-tables no-padding\",ref:\"appTables\"},s.a.createElement(\"div\",{className:\"content-block small-12\"},s.a.createElement(\"div\",{className:\"tabs-container generic-bordered-box\"},s.a.createElement(M.b,{defaultActiveTab:1,segmented:!1,setting:\"permissionsTab\",className:\"account-tabs\",tabsClass:\"account-overview bordered-header content-block\",contentClass:\"padding\",actionButtons:s.a.createElement(\"div\",{className:\"action-buttons\"},s.a.createElement(\"button\",{className:v,onClick:this.onReset,tabIndex:8},s.a.createElement(A.a,{content:\"account.perm.reset\"})),s.a.createElement(\"button\",{className:b,onClick:this.onPublish,tabIndex:9},s.a.createElement(A.a,{content:\"account.perm.publish\"})),s.a.createElement(\"button\",{className:\"button\",style:{marginLeft:10},\"data-tip\":W.a.translate(\"account.perm.create_paperwallet_private_hint\"),onClick:function(){e.onPdfCreate()},tabIndex:10},s.a.createElement(A.a,{content:\"account.perm.create_paperwallet\"})))},s.a.createElement(M.a,{title:\"account.perm.active\"},s.a.createElement(V.a,{path:\"components/AccountPermActive\"}),s.a.createElement(\"form\",{className:\"threshold\"},s.a.createElement(\"label\",{className:\"horizontal\"},s.a.createElement(A.a,{content:\"account.perm.threshold\"}),\" \",\"Â  Â \",s.a.createElement(\"input\",{type:\"number\",placeholder:\"0\",size:\"5\",value:this.state.active_threshold,onChange:this.onThresholdChanged.bind(this,\"active_threshold\"),autoComplete:\"off\",tabIndex:1}))),s.a.createElement(wt,{label:\"account.perm.add_permission_label\",accounts:o,keys:r,weights:l,addresses:i,validateAccount:this.validateAccount.bind(this,\"active\"),onAddItem:this.onAddItem.bind(this,\"active\"),onRemoveItem:this.onRemoveItem.bind(this,\"active\"),placeholder:W.a.translate(\"account.perm.account_name_or_key\"),tabIndex:2}),s.a.createElement(\"br\",null),t?s.a.createElement(\"div\",{className:\"content-block has-error\"},t):null),s.a.createElement(M.a,{title:\"account.perm.owner\"},s.a.createElement(V.a,{path:\"components/AccountPermOwner\"}),s.a.createElement(\"form\",{className:\"threshold\"},s.a.createElement(\"label\",{className:\"horizontal\"},s.a.createElement(A.a,{content:\"account.perm.threshold\"}),\" \",\"Â  Â \",s.a.createElement(\"input\",{type:\"number\",placeholder:\"0\",size:\"5\",value:this.state.owner_threshold,onChange:this.onThresholdChanged.bind(this,\"owner_threshold\"),autoComplete:\"off\",tabIndex:4}))),s.a.createElement(wt,{label:\"account.perm.add_permission_label\",accounts:u,keys:p,weights:h,addresses:d,validateAccount:this.validateAccount.bind(this,\"owner\"),onAddItem:this.onAddItem.bind(this,\"owner\"),onRemoveItem:this.onRemoveItem.bind(this,\"owner\"),placeholder:W.a.translate(\"account.perm.account_name_or_key\"),tabIndex:5}),s.a.createElement(\"br\",null),a?s.a.createElement(\"div\",{className:\"content-block has-error\"},a):null),s.a.createElement(M.a,{title:\"account.perm.memo_key\"},s.a.createElement(V.a,{style:{maxWidth:\"800px\"},path:\"components/AccountPermMemo\"}),s.a.createElement(St,{ref:\"memo_key\",value:this.state.memo_key,label:\"account.perm.memo_public_key\",placeholder:\"Public Key\",onChange:this.onMemoKeyChanged.bind(this),tabIndex:7})),s.a.createElement(M.a,{title:\"account.perm.password_model\"},s.a.createElement(Ct,{active:this.state.password_active,owner:this.state.password_owner,memo:this.state.password_memo,onSetPasswordKeys:this.onSetPasswordKeys.bind(this),account:this.props.account,activeKeys:this.state.active_keys,ownerKeys:this.state.owner_keys,memoKey:this.state.memo_key,onAddActive:this.onAddItem.bind(this,\"active\"),onRemoveActive:this.onRemoveItem.bind(this,\"active\"),onAddOwner:this.onAddItem.bind(this,\"owner\"),onRemoveOwner:this.onRemoveItem.bind(this,\"owner\"),onSetMemo:this.onMemoKeyChanged.bind(this)}))),s.a.createElement(\"div\",{className:\"tab-content\",style:{padding:10}},s.a.createElement(\"div\",{className:\"divider\"}),s.a.createElement(Pt.a,{accountsList:_,limit:25,compactView:!1,filter:\"account_update\",style:{paddingBottom:\"2rem\"}})))))}}]),t}(),Mt=a(31),It=function(){function e(e,t){for(var a=0;a<t.length;a++){var n=t[a];n.enumerable=n.enumerable||!1,n.configurable=!0,\"value\"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,a,n){return a&&e(t.prototype,a),n&&e(t,n),t}}();var Tt=\"-----BEGIN BITSHARES SIGNED MESSAGE-----\",Rt=\"-----END BITSHARES SIGNED MESSAGE-----\",Bt=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError(\"Cannot call a class as a function\")}(this,e)}return It(e,[{key:\"parseMessage\",value:function(e){var t=void 0,a=void 0,n=void 0,s=void 0;try{t=(a=(t=e.split(Tt)[1]).split(\"-----BEGIN META-----\"))[0].replace(/^\\n|\\n$/g,\"\"),a=(n=a[1].split(\"-----BEGIN SIGNATURE-----\"))[0].trim(),n=n[1].split(Rt)[0].trim(),s=t+\"\\n\"+a}catch(e){throw new Error(W.a.translate(\"account.signedmessages.invalidformat\"))}var o=void 0,r=void 0,i=void 0,l=void 0;if(a)try{o=(o=a.split(\"account=\"))[1].split(\"\\n\")[0].trim(),r=(r=a.split(\"memokey=\"))[1].split(\"\\n\")[0].trim(),i=(i=a.split(\"block=\"))[1].split(\"\\n\")[0].trim(),l=(l=a.split(\"timestamp=\"))[1].split(\"\\n\")[0].trim()}catch(e){throw new Error(W.a.translate(\"account.signedmessages.invalidformat\"))}return{content:t,meta:{account:o,key:r,block:i,timestamp:l},signed:s,signature:n}}},{key:\"verifyMemo\",value:function(e){var t=void 0;if(t=\"string\"==typeof e||e instanceof String?this.parseMessage(e):e,null==q.ChainStore.getAccount(t.meta.account))throw new Error(W.a.translate(\"account.signedmessages.invaliduser\"));var a=!1;try{a=q.Signature.fromHex(t.signature).verifyBuffer(t.signed,q.PublicKey.fromPublicKeyString(t.meta.key))}catch(e){throw new Error(W.a.translate(\"account.signedmessages.errorverifying\"))}if(!a)throw new Error(W.a.translate(\"account.signedmessages.invalidsignature\"));return t}},{key:\"signMessage\",value:function(e,t){return new Promise(function(a,n){st.a.unlock().then(function(){try{var s=e.get(\"options\").get(\"memo_key\");/111111111111111111111/.test(s)&&(s=null);var o=void 0;if(t&&s&&!(o=ot.a.getPrivateKey(s)))throw new Error(W.a.translate(\"account.signedmessages.invalidkey\"));var r=q.ChainStore.getObject(\"2.1.0\").get(\"last_irreversible_block_num\"),i=new Date,l=\"account=\"+e.get(\"name\")+\"\\nmemokey=\"+s+\"\\nblock=\"+r+\"\\ntimestamp=\"+i.toUTCString(),c=t+\"\\n\"+l;setTimeout(function(){try{var e=q.Signature.signBuffer(c,o,s),r=Tt+\"\\n\"+t+\"\\n-----BEGIN META-----\\n\"+l+\"\\n-----BEGIN SIGNATURE-----\\n\"+e.toHex()+\"\\n\"+Rt;a(r)}catch(e){n(e)}},0)}catch(e){n(e)}}).catch(function(e){n(e)})})}}]),e}(),Dt=Mt.a.createActions(Bt),Lt=function(){function e(e,t){for(var a=0;a<t.length;a++){var n=t[a];n.enumerable=n.enumerable||!1,n.configurable=!0,\"value\"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,a,n){return a&&e(t.prototype,a),n&&e(t,n),t}}();var Vt=function(e){function t(e){!function(e,t){if(!(e instanceof t))throw new TypeError(\"Cannot call a class as a function\")}(this,t);var a=function(e,t){if(!e)throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\");return!t||\"object\"!=typeof t&&\"function\"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return a.state={message:a.props.message,messageParsed:null,showRawMessage:!1,noVerification:a.props.noVerification,verified:null,notification:null},a}return function(e,t){if(\"function\"!=typeof t&&null!==t)throw new TypeError(\"Super expression must either be null or a function, not \"+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,s.a.Component),Lt(t,[{key:\"_verifyMessage\",value:function(e){var t=this;this.setState({message:e,messageParsed:null,verified:null});var a=null;try{a=Dt.parseMessage(e),this.setState({verified:null,messageParsed:a}),this.state.noVerification||(this.setState({verified:null,notification:W.a.translate(\"account.signedmessages.verifying\")}),setTimeout(function(){try{Dt.verifyMemo(a),t.setState({verified:!0,notification:\"\"})}catch(e){t._warning(e.message),t.setState({verified:!1})}},0))}catch(e){this._warning(e.message)}}},{key:\"componentWillMount\",value:function(){this._verifyMessage(this.state.message)}},{key:\"componentWillReceiveProps\",value:function(e){var t=e.message;void 0!=t&&null!=t&&t==this.state.message||this._verifyMessage(t)}},{key:\"_warning\",value:function(e){this.setState({notification:e})}},{key:\"_toggleRawMessage\",value:function(){this.setState({showRawMessage:!this.state.showRawMessage})}},{key:\"render\",value:function(){var e=void 0,t=void 0;null!=this.state.messageParsed&&(null==this.state.verified?(t=\"#FFF\",e=\"Unverified message from \"+this.state.messageParsed.meta.account):this.state.verified?(t=\"#FFF\",e=\"Verified message from \"+this.state.messageParsed.meta.account):(t=\"#F00\",e=\"Refuted message, indicated sender \"+this.state.messageParsed.meta.account));var a=null!=this.props.message&&\"\"!=this.props.message,n=this.state.notification&&\"\"!=this.state.notification;return s.a.createElement(\"div\",{style:{color:\"gray\",margin:\"10px 10px\"}},null!=this.state.messageParsed&&s.a.createElement(\"fieldset\",{style:{borderColor:t}},s.a.createElement(\"legend\",{style:{color:\"white\",weight:\"bold\"}},e),s.a.createElement(\"pre\",{style:{position:\"relative\",width:\"100%\",display:\"table\"}},this.state.messageParsed.content,n&&s.a.createElement(\"div\",{style:{textAlign:\"center\",display:\"table-cell\",verticalAlign:\"middle\",position:\"absolute\",width:\"calc(100% - 30px)\",height:\"calc(100% + 15px)\",top:\"0px\",right:\"30px\",backgroundColor:\"rgba(50,50,50,0.5)\"},id:\"overlay\"},this.state.notification)),s.a.createElement(\"span\",{style:{fontSize:\"small\",float:\"right\"}},\"Signed on \",this.state.messageParsed.meta.timestamp,\" \",\"Â \",s.a.createElement(\"button\",{className:\"button\",type:\"button\",style:{fontSize:\"small\",float:\"right\",padding:\"0px 0px\",background:\"#777\"},onClick:this._toggleRawMessage.bind(this)},\"ð\")),this.state.showRawMessage&&s.a.createElement(\"br\",null),this.state.showRawMessage&&s.a.createElement(\"br\",null),this.state.showRawMessage&&s.a.createElement(\"div\",{style:{overflow:\"auto\",width:\"calc(100%)\",maxWidth:\"1000px\"}},s.a.createElement(\"pre\",null,this.state.message))),a&&null==this.state.messageParsed&&s.a.createElement(\"fieldset\",{style:{borderColor:\"#F00\"}},s.a.createElement(\"legend\",{style:{color:\"red\",weight:\"bold\"},className:\"error\"},\"Error while parsing message, please check syntax from message below\"),s.a.createElement(\"pre\",null,this.props.message)))}}]),t}();Vt.defaultProps={noVerification:!1};var Ft=Vt,qt=function(){function e(e,t){for(var a=0;a<t.length;a++){var n=t[a];n.enumerable=n.enumerable||!1,n.configurable=!0,\"value\"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,a,n){return a&&e(t.prototype,a),n&&e(t,n),t}}();var Ut=function(e){function t(e){!function(e,t){if(!(e instanceof t))throw new TypeError(\"Cannot call a class as a function\")}(this,t);var a=function(e,t){if(!e)throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\");return!t||\"object\"!=typeof t&&\"function\"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return a.state={tabsm_memo_key:a.props.account.get(\"options\").get(\"memo_key\"),tabsm_popup:\"\",tabsm_message_text:\"\",tabsm_message_signed:\"\",tabvm_popup:\"\",tabvm_message_signed:\"\",tabvm_verified:null,tabvm_message_signed_and_verified:null,tabvm_flag_verifyonchange:!1},a}return function(e,t){if(\"function\"!=typeof t&&null!==t)throw new TypeError(\"Super expression must either be null or a function, not \"+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,s.a.Component),qt(t,[{key:\"_tabSMSignAction\",value:function(e){var t=this;e.preventDefault();try{var a=this.props.account.get(\"options\").get(\"memo_key\");if(this.state.tabsm_memo_key!==a)throw Error(W.a.translate(\"account.signedmessages.keymismatch\"));this.state.tabsm_message_text&&(this._tabSMPopMessage(W.a.translate(\"account.signedmessages.signing\"),0),Dt.signMessage(this.props.account,this.state.tabsm_message_text).then(function(e){t.setState({tabsm_message_signed:e,tabsm_popup:\"\"})}).catch(function(e){t._tabSMPopMessage(e.message),t.setState({tabsm_message_signed:null})}))}catch(e){this._tabSMPopMessage(e.message),this.setState({tabsm_message_signed:null})}}},{key:\"_tabSMHandleChange\",value:function(e){this.setState({tabsm_message_text:e.target.value})}},{key:\"_tabSMHandleChangeKey\",value:function(e){this.setState({tabsm_memo_key:e})}},{key:\"_tabSMCopyToClipBoard\",value:function(e){if(\"\"!==e.target.value){e.target.focus(),e.target.select();try{var t=document.execCommand(\"copy\");this._tabSMPopMessage(t?W.a.translate(\"account.signedmessages.copysuccessful\"):W.a.translate(\"account.signedmessages.copyunsuccessful\"))}catch(e){this._tabSMPopMessage(W.a.translate(\"account.signedmessages.copyunsuccessful\"))}}}},{key:\"_tabSMPopMessage\",value:function(e){var t=this,a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:3e3;this.setState({tabsm_popup:e}),\"\"!==e&&a>0&&setTimeout(function(){t.setState({tabsm_popup:\"\"})},a)}},{key:\"_tabVMAction\",value:function(e){var t=this;e.preventDefault(),this.setState({tabvm_message_signed_and_verified:null,tabvm_verified:!1}),this.state.tabvm_message_signed&&(this._tabVMPopMessage(W.a.translate(\"account.signedmessages.verifying\"),0),setTimeout(function(){try{var e=Dt.verifyMemo(t.state.tabvm_message_signed);t.setState({tabvm_message_signed_and_verified:e,tabvm_verified:!0,tabvm_popup:\"\"})}catch(e){t._tabVMPopMessage(e.message),t.setState({tabvm_message_signed_and_verified:null,tabvm_verified:!1})}},0))}},{key:\"_tabVMHandleChange\",value:function(e){this.setState({tabvm_message_signed:e.target.value,tabvm_verified:!1,tabvm_message_signed_and_verified:null}),this.state.tabvm_flag_verifyonchange&&this._tabVMAction(e)}},{key:\"_tabVMPopMessage\",value:function(e){var t=this,a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:3e3;this.setState({tabvm_popup:e}),\"\"!==e&&a>0&&setTimeout(function(){t.setState({tabvm_popup:\"\"})},a)}},{key:\"_tabVMToggleVerifyOnChange\",value:function(){this.setState({tabvm_flag_verifyonchange:!this.state.tabvm_flag_verifyonchange})}},{key:\"render\",value:function(){return s.a.createElement(\"div\",{className:\"grid-content app-tables no-padding\",ref:\"appTables\"},s.a.createElement(\"div\",{className:\"content-block small-12\"},s.a.createElement(\"div\",{className:\"tabs-container generic-bordered-box\"},s.a.createElement(M.b,{className:\"account-tabs\",tabsClass:\"account-overview no-padding bordered-header content-block\",setting:\"accountSignedMessagesTab\",contentClass:\"grid-content shrink small-vertical medium-horizontal padding\",segmented:!1},s.a.createElement(M.a,{title:\"account.signedmessages.signmessage\"},s.a.createElement(\"div\",{className:\"grid-content\",style:{overflowX:\"hidden\"}},s.a.createElement(\"div\",{className:\"content-block no-margin\"},s.a.createElement(\"h3\",null,s.a.createElement(A.a,{content:\"account.signedmessages.signmessage\"}))),s.a.createElement(St,{ref:\"memo_key\",value:this.state.tabsm_memo_key,label:\"account.perm.memo_public_key\",placeholder:\"Public Key\",tabIndex:7,onChange:this._tabSMHandleChangeKey.bind(this),disableActionButton:!0}),s.a.createElement(\"br\",null),s.a.createElement(\"textarea\",{rows:\"10\",value:this.state.tabsm_message_text,onChange:this._tabSMHandleChange.bind(this),placeholder:W.a.translate(\"account.signedmessages.entermessage\")}),s.a.createElement(\"span\",null,s.a.createElement(\"button\",{className:\"button\",onClick:this._tabSMSignAction.bind(this)},s.a.createElement(A.a,{content:\"account.signedmessages.sign\"})),s.a.createElement(\"div\",{style:{color:\"gray\"}},this.state.tabsm_popup)),s.a.createElement(\"br\",null),s.a.createElement(\"br\",null),s.a.createElement(\"textarea\",{rows:\"14\",value:this.state.tabsm_message_signed,style:{editable:!1},placeholder:W.a.translate(\"account.signedmessages.automaticcreation\"),onClick:this._tabSMCopyToClipBoard.bind(this)}))),s.a.createElement(M.a,{title:\"account.signedmessages.verifymessage\"},s.a.createElement(\"div\",{className:\"grid-content\",style:{overflowX:\"hidden\"}},s.a.createElement(\"div\",{className:\"content-block no-margin\"},s.a.createElement(\"h3\",null,s.a.createElement(A.a,{content:\"account.signedmessages.verifymessage\"})),s.a.createElement(\"div\",{style:{float:\"right\",marginTop:\"0.1em\",marginBottom:\"0.5em\"}},s.a.createElement(\"table\",null,s.a.createElement(\"tr\",null,s.a.createElement(\"td\",null,s.a.createElement(\"label\",{style:{marginBottom:0,marginRight:\"0.5rem\"}},s.a.createElement(A.a,{content:\"account.signedmessages.verifyonchange\"}))),s.a.createElement(\"td\",null,s.a.createElement(Y.Switch,{checked:this.state.tabvm_flag_verifyonchange,onChange:this._tabVMToggleVerifyOnChange.bind(this)})))))),s.a.createElement(\"textarea\",{rows:\"10\",value:this.state.tabvm_message_signed,onChange:this._tabVMHandleChange.bind(this),placeholder:W.a.translate(\"account.signedmessages.entermessage\")}),s.a.createElement(\"span\",null,s.a.createElement(\"button\",{className:\"button\",onClick:this._tabVMAction.bind(this)},s.a.createElement(A.a,{content:\"account.signedmessages.verify\"})),s.a.createElement(\"text\",{style:{color:\"gray\"}},this.state.tabvm_popup),null!==this.state.tabvm_verified&&s.a.createElement(\"div\",{style:{float:\"right\"}},\"Message is:\",s.a.createElement(\"div\",{style:{backgroundColor:this.state.tabvm_verified?\"green\":\"red\"}},s.a.createElement(\"label\",null,this.state.tabvm_verified?\"verified\":\"not verified\"))),(this.state.tabvm_verified&&null!==this.state.tabvm_message_signed_and_verified||this.state.tabvm_flag_verifyonchange)&&s.a.createElement(\"div\",null,s.a.createElement(\"br\",null),s.a.createElement(Ft,{message:this.state.tabvm_message_signed})))))))))}}]),t}();Ut.propTypes={account:c.a.ChainAccount.isRequired};var Wt=Ut=Object(u.a)(Ut),zt=a(355),Jt=a.n(zt),Kt=a(100),Gt=function(){function e(e,t){for(var a=0;a<t.length;a++){var n=t[a];n.enumerable=n.enumerable||!1,n.configurable=!0,\"value\"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,a,n){return a&&e(t.prototype,a),n&&e(t,n),t}}();function Zt(e,t){if(!(e instanceof t))throw new TypeError(\"Cannot call a class as a function\")}function Ht(e,t){if(!e)throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\");return!t||\"object\"!=typeof t&&\"function\"!=typeof t?e:t}function Qt(e,t){if(\"function\"!=typeof t&&null!==t)throw new TypeError(\"Super expression must either be null or a function, not \"+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var Yt=function(e){function t(){return Zt(this,t),Ht(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return Qt(t,s.a.Component),Gt(t,[{key:\"render\",value:function(){var e=this.props,t=e.account,a=e.onRemove;return s.a.createElement(\"tr\",null,s.a.createElement(\"td\",null,this.props.index),s.a.createElement(\"td\",null,t.get(\"id\")),s.a.createElement(\"td\",null,s.a.createElement(ce.a,{account:t.get(\"id\")})),a?s.a.createElement(\"td\",null,s.a.createElement(\"button\",{onClick:a.bind(this,t.get(\"id\")),className:\"button outline\"},\"Remove\")):null)}}]),t}();Yt.propTypes={account:c.a.ChainAccount.isRequired},Yt.defaultProps={tempComponent:\"tr\"},Yt=Object(u.a)(Yt);var Xt=function(e){function t(){return Zt(this,t),Ht(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return Qt(t,s.a.Component),Gt(t,[{key:\"_onRemove\",value:function(e,t,a){if(t){var n=this.props.getCurrentState(t),s=Kt.a.new_transaction();s.add_type_operation(\"account_whitelist\",{fee:{amount:0,asset_id:\"1.3.0\"},authorizing_account:this.props.account.get(\"id\"),account_to_list:t,new_listing:n-Jt.a.account_listing[e]}),ot.a.process_transaction(s,null,!0)}}},{key:\"render\",value:function(){var e=this,t=this.props,a=t.removeButton,n=t.white,o=t.list.map(function(t,o){return s.a.createElement(Yt,{key:t,onRemove:a?e._onRemove.bind(e,n?\"white_listed\":\"black_listed\"):null,account:t,index:o+1})}).toArray(),r=!0;return o.length||(r=!1,o.push(s.a.createElement(\"tr\",{key:\"empty\"},s.a.createElement(\"td\",{style:{padding:\"1rem 0\"},colSpan:a?4:3},s.a.createElement(A.a,{content:this.props.emptyText,account:this.props.account.get(\"name\")}))))),s.a.createElement(\"table\",{className:\"table compact dashboard-table\"},r?s.a.createElement(\"thead\",null,s.a.createElement(\"tr\",null,s.a.createElement(\"th\",null,\"#\"),s.a.createElement(\"th\",null,s.a.createElement(A.a,{content:\"account.id\"})),s.a.createElement(\"th\",null,s.a.createElement(A.a,{content:\"account.name\"})),a?s.a.createElement(\"th\",null):null)):null,s.a.createElement(\"tbody\",null,o))}}]),t}(),$t=function(e){function t(){Zt(this,t);var e=Ht(this,(t.__proto__||Object.getPrototypeOf(t)).call(this));return e.state={accountName:\"\",accountToList:null},e}return Qt(t,s.a.Component),Gt(t,[{key:\"_getCurrentState\",value:function(e){var t=this.props.account,a=t.get(\"whitelisted_accounts\")||m.a.List(),n=t.get(\"blacklisted_accounts\")||m.a.List(),s=Jt.a.account_listing.no_listing;return a.includes(e)&&(s+=Jt.a.account_listing.white_listed),n.includes(e)&&(s+=Jt.a.account_listing.black_listed),s}},{key:\"_onAdd\",value:function(e,t){var a=this.state.accountToList,n=this.props.account,s=this._getCurrentState(a);if(a){var o=Kt.a.new_transaction();o.add_type_operation(\"account_whitelist\",{fee:{amount:0,asset_id:\"1.3.0\"},authorizing_account:n.get(\"id\"),account_to_list:a,new_listing:s+Jt.a.account_listing[e]}),ot.a.process_transaction(o,null,!0)}}},{key:\"_onAccountFound\",value:function(e){console.log(\"accountFound:\",e),this.setState({accountName:e?e.get(\"name\"):null,accountToList:e?e.get(\"id\"):null})}},{key:\"_onAccountChanged\",value:function(e){console.log(\"account changed:\",e),this.setState({accountName:e,accountToList:null})}},{key:\"render\",value:function(){var e=this.props.account,t=this.state.accountName;return s.a.createElement(\"div\",{className:\"grid-content app-tables no-padding\",ref:\"appTables\"},s.a.createElement(\"div\",{className:\"content-block small-12\"},s.a.createElement(\"div\",{className:\"tabs-container generic-bordered-box\"},s.a.createElement(M.b,{className:\"account-tabs\",tabsClass:\"account-overview no-padding bordered-header content-block\",setting:\"whitelistTab\",contentClass:\"grid-content shrink small-vertical medium-horizontal no-padding\",segmented:!1},s.a.createElement(M.a,{title:\"account.whitelist.title\"},s.a.createElement(\"div\",{style:{paddingBottom:\"1rem\"},className:\"small-12\"},s.a.createElement(\"div\",null,s.a.createElement(Xt,{emptyText:\"account.whitelist.empty\",account:e,getCurrentState:this._getCurrentState.bind(this),list:e.get(\"whitelisted_accounts\")||m.a.List(),removeButton:!0,white:!0})),e.get(\"whitelisted_accounts\")?null:s.a.createElement(\"p\",{className:\"has-error\"},\"Please note, whitelisting is not working yet due to unresolved backend issue.\"),s.a.createElement(\"div\",{style:{padding:\"2rem 0\"}},s.a.createElement(pe.a,{label:\"account.whitelist.add\",accountName:t,onAccountChanged:this._onAccountFound.bind(this),onChange:this._onAccountChanged.bind(this),account:t,tabIndex:2,onAction:this._onAdd.bind(this,\"white_listed\"),action_label:\"account.perm.confirm_add\",white:!1,typeahead:!0})))),s.a.createElement(M.a,{title:\"account.whitelist.black\"},s.a.createElement(\"div\",{style:{paddingBottom:\"1rem\"},className:\"small-12\"},s.a.createElement(\"div\",null,s.a.createElement(Xt,{emptyText:\"account.whitelist.empty_black\",account:e,getCurrentState:this._getCurrentState.bind(this),list:e.get(\"blacklisted_accounts\"),removeButton:!0})),s.a.createElement(\"div\",{style:{padding:\"2rem 1rem\"}},s.a.createElement(pe.a,{label:\"account.whitelist.add_black\",accountName:t,onAccountChanged:this._onAccountFound.bind(this),onChange:this._onAccountChanged.bind(this),account:t,tabIndex:2,onAction:this._onAdd.bind(this,\"black_listed\"),action_label:\"account.perm.confirm_add\",typeahead:!0})))),s.a.createElement(M.a,{title:\"account.whitelist.white_by\"},s.a.createElement(\"div\",{style:{paddingBottom:\"1rem\"},className:\"small-12\"},s.a.createElement(\"div\",null,s.a.createElement(Xt,{emptyText:\"account.whitelist.empty_white_by\",account:e,list:e.get(\"whitelisting_accounts\")})))),s.a.createElement(M.a,{title:\"account.whitelist.black_by\"},s.a.createElement(\"div\",{style:{paddingBottom:\"1rem\"},className:\"small-12\"},s.a.createElement(\"div\",null,s.a.createElement(Xt,{emptyText:\"account.whitelist.empty_black_by\",account:e,list:e.get(\"blacklisting_accounts\")}))))))))}}]),t}(),ea=a(1980),ta=function(){function e(e,t){for(var a=0;a<t.length;a++){var n=t[a];n.enumerable=n.enumerable||!1,n.configurable=!0,\"value\"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,a,n){return a&&e(t.prototype,a),n&&e(t,n),t}}();var aa=function(e){function t(e){return function(e,t){if(!(e instanceof t))throw new TypeError(\"Cannot call a class as a function\")}(this,t),function(e,t){if(!e)throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\");return!t||\"object\"!=typeof t&&\"function\"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e))}return function(e,t){if(\"function\"!=typeof t&&null!==t)throw new TypeError(\"Super expression must either be null or a function, not \"+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,s.a.Component),ta(t,[{key:\"onApprove\",value:function(){var e=[],t=[];this.props.vote_ids.has(this.props.worker.get(\"vote_against\"))&&t.push(this.props.worker.get(\"vote_against\")),this.props.vote_ids.has(this.props.worker.get(\"vote_for\"))||e.push(this.props.worker.get(\"vote_for\")),this.props.onChangeVotes(e,t)}},{key:\"onReject\",value:function(){var e=[];this.props.vote_ids.has(this.props.worker.get(\"vote_against\"))&&e.push(this.props.worker.get(\"vote_against\")),this.props.vote_ids.has(this.props.worker.get(\"vote_for\"))&&e.push(this.props.worker.get(\"vote_for\")),this.props.onChangeVotes([],e)}},{key:\"render\",value:function(){var e=this.props.rank,t=this.props.worker.toJS(),a=t.total_votes_for-t.total_votes_against,n=!!this.props.vote_ids.has(t.vote_for)||!this.props.vote_ids.has(t.vote_against)&&null,o=0;t.daily_pay<this.props.rest?o=100:this.props.rest>0&&(o=this.props.rest/t.daily_pay*100);var r=W.a.localize(new Date(t.work_begin_date+\"Z\"),{type:\"date\",format:\"short_custom\"}),i=W.a.localize(new Date(t.work_end_date+\"Z\"),{type:\"date\",format:\"short_custom\"}),l=new Date,c=new Date(t.work_end_date+\"Z\")<=l,u=new Date(t.work_begin_date+\"Z\")<=l,p=!c&&a<this.props.voteThreshold||!u,d=!!this.props.poll;return s.a.createElement(\"tr\",{className:n?\"\":\"unsupported\"},!d&&c?null:s.a.createElement(\"td\",{style:{textAlign:\"right\",paddingRight:10,paddingLeft:0}},c?W.a.translate(\"account.votes.expired\"):e),s.a.createElement(\"td\",{className:\"worker-id\",style:{textAlign:\"left\"}},t.id),s.a.createElement(\"td\",{className:\"worker-name\",style:{textAlign:\"left\"}},s.a.createElement(\"div\",{className:\"inline-block\",style:{paddingRight:5,position:\"relative\",top:-1}},s.a.createElement(\"a\",{style:{visibility:t.url&&-1!==t.url.indexOf(\".\")?\"visible\":\"hidden\"},href:t.url,target:\"_blank\",rel:\"noopener noreferrer\"},s.a.createElement(I.a,{name:\"share\",title:\"icons.share\"}))),s.a.createElement(\"div\",{className:\"inline-block\"},t.name,s.a.createElement(\"br\",null),s.a.createElement(ce.a,{account:t.worker_account}))),s.a.createElement(\"td\",{style:{textAlign:\"right\"},className:\"hide-column-small\"},s.a.createElement(O.a,{amount:a,asset:\"1.3.0\",decimalOffset:5,hide_asset:!0})),!p||d?null:s.a.createElement(\"td\",{style:{textAlign:\"right\"}},s.a.createElement(O.a,{amount:Math.max(0,this.props.voteThreshold-a),asset:\"1.3.0\",hide_asset:!0,decimalOffset:5})),s.a.createElement(\"td\",null,r,\" - \",i),d||!c&&!p?s.a.createElement(\"td\",{style:{textAlign:\"right\"},className:\"hide-column-small\"},c?\"-\":F.a.format_number(o,2)+\"%\"):null,s.a.createElement(\"td\",{style:{textAlign:\"right\"},className:\"hide-column-small\"},s.a.createElement(ea.b,{hide_asset:!0,fromAsset:\"1.3.0\",toAsset:this.props.preferredUnit,amount:t.daily_pay})),d||!c&&!p?s.a.createElement(\"td\",{style:{textAlign:\"right\"}},this.props.rest<=0?c?\"-\":\"0.00\":s.a.createElement(ea.b,{hide_asset:!0,fromAsset:\"1.3.0\",toAsset:this.props.preferredUnit,amount:this.props.rest})):null,s.a.createElement(\"td\",{className:\"clickable\",onClick:this.props.proxy?function(){}:this[n?\"onReject\":\"onApprove\"].bind(this)},this.props.proxy?s.a.createElement(I.a,{name:\"locked\",title:\"icons.locked.action\"}):s.a.createElement(I.a,{name:n?\"checkmark-circle\":\"minus-circle\",title:n?\"icons.checkmark_circle.approved\":\"icons.minus_circle.disapproved\"})))}}]),t}();aa.propTypes={worker:c.a.ChainObject.isRequired,onAddVote:E.a.func,onRemoveVote:E.a.func,vote_ids:E.a.object,poll:E.a.bool},aa.defaultProps={tempComponent:\"tr\",poll:!1};var na=Object(u.a)(aa),sa=a(217),oa=a.n(sa),ra=function(){function e(e,t){for(var a=0;a<t.length;a++){var n=t[a];n.enumerable=n.enumerable||!1,n.configurable=!0,\"value\"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,a,n){return a&&e(t.prototype,a),n&&e(t,n),t}}();function ia(e,t){if(!(e instanceof t))throw new TypeError(\"Cannot call a class as a function\")}function la(e,t){if(!e)throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\");return!t||\"object\"!=typeof t&&\"function\"!=typeof t?e:t}function ca(e,t){if(\"function\"!=typeof t&&null!==t)throw new TypeError(\"Super expression must either be null or a function, not \"+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}function ua(e,t){var a=\"\",n=0,s=void 0;return\"witness\"===e?s=q.ChainStore.getWitnessById(t.get(\"id\")):\"committee\"===e&&(s=q.ChainStore.getCommitteeMemberById(t.get(\"id\"))),a=s?s.get(\"url\"):a,{url:a=oa()(a,{whiteList:[],stripIgnoreTag:!0}),votes:n=s?s.get(\"total_votes\"):n,id:s.get(\"id\")}}var pa=function(e){function t(){return ia(this,t),la(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return ca(t,s.a.Component),ra(t,[{key:\"shouldComponentUpdate\",value:function(e){return e.account!==this.props.account||e.action!==this.props.action||e.isActive!==this.props.isActive||e.idx!==this.props.idx||e.proxy!==this.props.proxy}},{key:\"onAction\",value:function(e){this.props.onAction(e)}},{key:\"render\",value:function(){var e=this.props,t=e.account,a=e.type,n=e.action,o=e.isActive,r=t.get(\"id\"),i=ua(a,t),l=i.url,c=i.votes,u=l&&l.length>0&&-1===l.indexOf(\"http\")?\"http://\"+l:l,p=\"remove\"===n;return s.a.createElement(\"tr\",{className:p?\"\":\"unsupported\"},s.a.createElement(\"td\",{style:{textAlign:\"right\"}},this.props.idx+1),s.a.createElement(\"td\",{style:{textAlign:\"left\"}},s.a.createElement(ce.a,{account:t.get(\"id\")})),s.a.createElement(\"td\",null,u&&-1!==u.indexOf(\".\")?s.a.createElement(\"a\",{href:u,target:\"_blank\",rel:\"noopener noreferrer\"},s.a.createElement(I.a,{name:\"share\",title:\"icons.share\"})):null),s.a.createElement(\"td\",null,s.a.createElement(O.a,{amount:c,asset:\"1.3.0\",decimalOffset:5,hide_asset:!0})),s.a.createElement(\"td\",null,s.a.createElement(A.a,{content:\"account.votes.\"+(o?\"active_short\":\"inactive\")})),s.a.createElement(\"td\",{style:{textAlign:\"center\"}},s.a.createElement(A.a,{content:\"settings.\"+(p?\"yes\":\"no\")})),s.a.createElement(\"td\",{className:this.props.proxy?\"\":\"clickable\",onClick:this.props.proxy?function(){}:this.onAction.bind(this,r)},this.props.proxy?s.a.createElement(I.a,{name:\"locked\",title:\"icons.locked.action\"}):s.a.createElement(I.a,{name:p?\"checkmark-circle\":\"minus-circle\",title:p?\"icons.checkmark_circle.yes\":\"icons.minus_circle.no\"})))}}]),t}();pa.propTypes={account:E.a.object.isRequired,onAction:E.a.func.isRequired};var da=function(e){function t(e){ia(this,t);var a=la(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return a.state={selected_item:null,item_name_input:\"\",error:null},a.onItemChange=a.onItemChange.bind(a),a.onItemAccountChange=a.onItemAccountChange.bind(a),a.onAddItem=a.onAddItem.bind(a),a}return ca(t,s.a.Component),ra(t,[{key:\"onItemChange\",value:function(e){this.setState({item_name_input:e})}},{key:\"onItemAccountChange\",value:function(e){var t=this;if(this.setState({selected_item:e,error:null}),e&&this.props.validateAccount){var a=this.props.validateAccount(e);if(null===a)return;\"string\"==typeof a?this.setState({error:a}):a.then(function(e){return t.setState({error:e})})}}},{key:\"onAddItem\",value:function(e){if(e){this.setState({selected_item:null,item_name_input:\"\",error:null}),this.props.onAddItem(e.get(\"id\"))}}},{key:\"render\",value:function(){var e=this;if(!this.props.items)return null;var t=this.props.items.filter(function(e){return!!e}).sort(function(t,a){var n=ua(e.props.type,t).votes,s=ua(e.props.type,a).votes;return n!==s?parseInt(s,10)-parseInt(n,10):t.get(\"name\")>a.get(\"name\")?1:t.get(\"name\")<a.get(\"name\")?-1:0}).map(function(t,a){var n=e.props.supported&&e.props.supported.includes(t.get(\"id\"))?\"remove\":\"add\",o=e.props.active.includes(ua(e.props.type,t).id);return s.a.createElement(pa,{idx:a,key:t.get(\"name\"),account:t,type:e.props.type,onAction:\"add\"===n?e.props.onAddItem:e.props.onRemoveItem,isSelected:-1!==e.props.items.indexOf(t),action:n,isActive:o,proxy:e.props.proxy})}),a=this.state.error;!a&&this.state.selected_item&&-1!==this.props.items.indexOf(this.state.selected_item)&&(a=W.a.translate(\"account.votes.already\"));var n=[\"10%\",\"20%\",\"40%\",\"20%\",\"10%\"];return s.a.createElement(\"div\",null,this.props.withSelector?s.a.createElement(pe.a,{style:{maxWidth:\"600px\"},label:this.props.label,error:a,placeholder:this.props.placeholder,account:this.state.item_name_input,accountName:this.state.item_name_input,onChange:this.onItemChange,onAccountChanged:this.onItemAccountChange,onAction:this.onAddItem,action_label:\"account.votes.add_witness\",tabIndex:this.props.tabIndex}):null,this.props.title&&t.length?s.a.createElement(\"h4\",null,this.props.title):null,t.length?s.a.createElement(\"table\",{className:\"table dashboard-table table-hover\"},s.a.createElement(\"thead\",null,s.a.createElement(\"tr\",null,s.a.createElement(\"th\",{style:{textAlign:\"right\"}},\"#\"),s.a.createElement(\"th\",{style:{textAlign:\"left\",maxWidth:n[1]}},s.a.createElement(A.a,{content:\"account.votes.name\"})),s.a.createElement(\"th\",{style:{maxWidth:n[2]}},s.a.createElement(A.a,{content:\"account.votes.about\"})),s.a.createElement(\"th\",{style:{maxWidth:n[3]}},s.a.createElement(A.a,{content:\"account.votes.votes\"})),s.a.createElement(\"th\",{style:{maxWidth:n[4]}},s.a.createElement(A.a,{content:\"account.votes.status.title\"})),s.a.createElement(\"th\",{style:{maxWidth:n[0]}},s.a.createElement(A.a,{content:\"account.votes.supported\"})),s.a.createElement(\"th\",{style:{maxWidth:n[5]}},s.a.createElement(A.a,{content:\"account.votes.toggle\"})))),s.a.createElement(\"tbody\",null,t)):null)}}]),t}();da.propTypes={items:c.a.ChainObjectsList,onAddItem:E.a.func.isRequired,onRemoveItem:E.a.func.isRequired,validateAccount:E.a.func,label:E.a.string.isRequired,placeholder:E.a.string,tabIndex:E.a.number,action:E.a.string,withSelector:E.a.bool},da.defaultProps={action:\"remove\",withSelector:!0,autosubscribe:!1};var ha=Object(u.a)(da),ma=a(88),fa=a(2122),ga=a.n(fa),ba=[\"1.14.114\",\"1.14.107\"],va=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var n in a)Object.prototype.hasOwnProperty.call(a,n)&&(e[n]=a[n])}return e},_a=function(){return function(e,t){if(Array.isArray(e))return e;if(Symbol.iterator in Object(e))return function(e,t){var a=[],n=!0,s=!1,o=void 0;try{for(var r,i=e[Symbol.iterator]();!(n=(r=i.next()).done)&&(a.push(r.value),!t||a.length!==t);n=!0);}catch(e){s=!0,o=e}finally{try{!n&&i.return&&i.return()}finally{if(s)throw o}}return a}(e,t);throw new TypeError(\"Invalid attempt to destructure non-iterable instance\")}}(),ya=function(){function e(e,t){for(var a=0;a<t.length;a++){var n=t[a];n.enumerable=n.enumerable||!1,n.configurable=!0,\"value\"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,a,n){return a&&e(t.prototype,a),n&&e(t,n),t}}();var Ea=function(e){function t(e){!function(e,t){if(!(e instanceof t))throw new TypeError(\"Cannot call a class as a function\")}(this,t);var a=function(e,t){if(!e)throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\");return!t||\"object\"!=typeof t&&\"function\"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));a.onRemoveProxy=function(){a.publish(null)};var n=e.proxy.get(\"id\"),s=e.proxy.get(\"name\");return a.state={proxy_account_id:\"1.2.5\"===n?\"\":n,prev_proxy_account_id:\"1.2.5\"===n?\"\":n,current_proxy_input:\"1.2.5\"===n?\"\":s,witnesses:null,committee:null,vote_ids:m.a.Set(),proxy_vote_ids:m.a.Set(),lastBudgetObject:e.initialBudget.get(\"id\"),workerTableIndex:e.viewSettings.get(\"workerTableIndex\",1),all_witnesses:m.a.List(),all_committee:m.a.List(),hideLegacyProposals:!0},a.onProxyAccountFound=a.onProxyAccountFound.bind(a),a.onPublish=a.onPublish.bind(a),a.onReset=a.onReset.bind(a),a._getVoteObjects=a._getVoteObjects.bind(a),a}return function(e,t){if(\"function\"!=typeof t&&null!==t)throw new TypeError(\"Super expression must either be null or a function, not \"+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,s.a.Component),ya(t,[{key:\"componentWillMount\",value:function(){d.a.getFinalFeeAsset(this.props.account,\"account_update\"),q.ChainStore.fetchAllWorkers(),this.getBudgetObject()}},{key:\"componentDidMount\",value:function(){this.updateAccountData(this.props),this._getVoteObjects(),this._getVoteObjects(\"committee\")}},{key:\"componentWillReceiveProps\",value:function(e){if(e.account!==this.props.account){var t=e.proxy.get(\"id\"),a={proxy_account_id:\"1.2.5\"===t?\"\":t};this.setState({prev_proxy_account_id:a.proxy_account_id}),this.updateAccountData(e,a)}this.getBudgetObject()}},{key:\"updateAccountData\",value:function(e){var t=this,a=e.account,n=(arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.state).proxy_account_id,s=q.ChainStore.getAccount(n),o=a.get(\"options\"),r=s?s.get(\"options\"):null,i=s?s.get(\"name\"):\"\";\"1.2.5\"===n&&(n=\"\",i=\"\");var l=o.get(\"votes\").toArray(),c=m.a.Set(l);q.ChainStore.getObjectsByVoteIds(l);var u=null,p=m.a.Set([]);if(\"1.2.5\"!==n&&r){var d=r.get(\"votes\").toArray();p=m.a.Set(d),q.ChainStore.getObjectsByVoteIds(d),u=Object(q.FetchChainObjects)(q.ChainStore.getObjectByVoteID,d,1e4)}Promise.all([Object(q.FetchChainObjects)(q.ChainStore.getObjectByVoteID,l,1e4),u]).then(function(e){var a=_a(e,2),s=a[0],o=a[1];function r(e){var t=new m.a.List,a=new m.a.List,n=new m.a.Set;return e.forEach(function(e){var n=e.get(\"committee_member_account\");n?a=a.push(n):(n=e.get(\"worker_account\"))||(n=e.get(\"witness_account\"))&&(t=t.push(n))}),{witnesses:t,committee:a,workers:n}}var l=r(s),u=l.witnesses,d=l.committee,h=l.workers,f=r(o||[]),g=f.witnesses,b=f.committee,v=f.workers,_={proxy_account_id:n,current_proxy_input:i,witnesses:u,committee:d,workers:h,proxy_witnesses:g,proxy_committee:b,proxy_workers:v,vote_ids:c,proxy_vote_ids:p,prev_witnesses:u,prev_committee:d,prev_workers:h,prev_vote_ids:c};t.setState(_)})}},{key:\"isChanged\",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.state;return e.proxy_account_id!==e.prev_proxy_account_id||e.witnesses!==e.prev_witnesses||e.committee!==e.prev_committee||!m.a.is(e.vote_ids,e.prev_vote_ids)}},{key:\"_getVoteObjects\",value:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:\"witnesses\",a=arguments[1],n=this.state[\"all_\"+t],s=\"witnesses\"===t,o=void 0;if(a)o=parseInt(a[a.length-1].split(\".\")[2],10);else{a=[];var r=this.props.globalObject.get(s?\"active_witnesses\":\"active_committee_members\").sort(function(e,t){return parseInt(e.split(\".\")[2],10)-parseInt(t.split(\".\")[2],10)}).last()||\"1.\"+(s?\"6\":\"5\")+\".1\";o=parseInt(r.split(\".\")[2],10);for(var i=1;i<=o+10;i++)a.push(\"1.\"+(s?\"6\":\"5\")+\".\"+i)}Object(q.FetchChainObjects)(q.ChainStore.getObject,a,5e3,{}).then(function(r){if(e.state[\"all_\"+t]=n.concat(m.a.List(r.filter(function(e){return!!e}).map(function(e){return e.get(s?\"witness_account\":\"committee_member_account\")}))),r[r.length-1]){a=[];for(var i=o+11;i<=o+20;i++)a.push(\"1.\"+(s?\"6\":\"5\")+\".\"+i);return e._getVoteObjects(t,a)}e.forceUpdate()})}},{key:\"onPublish\",value:function(){this.publish(this.state.proxy_account_id)}},{key:\"publish\",value:function(e){var t=this,a=this.props.account.toJS(),n={account:a.id},s={memo_key:a.options.memo_key};s.voting_account=e||\"1.2.5\",s.num_witness=this.state.witnesses.size,s.num_committee=this.state.committee.size,n.new_options=s,n.fee={amount:0,asset_id:d.a.getFinalFeeAsset(a.id,\"account_update\")};var o=this.state.vote_ids,r=this._getWorkerArray(),i=new Date;function l(e,t){return e.includes(t)&&(e=e.delete(t)),e}r.forEach(function(e){e&&(new Date(e.get(\"work_end_date\"))<=i&&(o=l(o,e.get(\"vote_for\"))),o=l(o,e.get(\"vote_against\")))}),Object(q.FetchChainObjects)(q.ChainStore.getWitnessById,this.state.witnesses.toArray(),4e3).then(function(e){var a=e.map(function(e){return e.get(\"vote_id\")});return Promise.all([Promise.resolve(a),Object(q.FetchChainObjects)(q.ChainStore.getCommitteeMemberById,t.state.committee.toArray(),4e3)])}).then(function(e){n.new_options.votes=e[0].concat(e[1].map(function(e){return e.get(\"vote_id\")})).concat(o.filter(function(e){return\"2\"===e.split(\":\")[0]}).toArray()).sort(function(e,t){var a=e.split(\":\"),n=t.split(\":\");return parseInt(a[1],10)-parseInt(n[1],10)}),at.a.updateAccount(n)})}},{key:\"onReset\",value:function(){var e=this,t=this.state;this.refs.voting_proxy&&this.refs.voting_proxy.refs.bound_component&&this.refs.voting_proxy.refs.bound_component.onResetProxy(),this.setState({proxy_account_id:t.prev_proxy_account_id,current_proxy_input:t.prev_proxy_input,witnesses:t.prev_witnesses,committee:t.prev_committee,workers:t.prev_workers,vote_ids:t.prev_vote_ids},function(){e.updateAccountData(e.props)})}},{key:\"onAddItem\",value:function(e,t){var a={};a[e]=this.state[e].push(t),this.setState(a)}},{key:\"onRemoveItem\",value:function(e,t){var a={};a[e]=this.state[e].filter(function(e){return e!==t}),this.setState(a)}},{key:\"onChangeVotes\",value:function(e,t){var a={};a.vote_ids=this.state.vote_ids,e.length&&e.forEach(function(e){a.vote_ids=a.vote_ids.add(e)}),t&&t.forEach(function(e){a.vote_ids=a.vote_ids.delete(e)}),this.setState(a)}},{key:\"validateAccount\",value:function(e,t){return t?\"witnesses\"===e?Object(q.FetchChainObjects)(q.ChainStore.getWitnessById,[t.get(\"id\")],3e3).then(function(e){return e[0]?null:\"Not a witness\"}):\"committee\"===e?Object(q.FetchChainObjects)(q.ChainStore.getCommitteeMemberById,[t.get(\"id\")],3e3).then(function(e){return e[0]?null:\"Not a committee member\"}):null:null}},{key:\"onProxyChange\",value:function(e){var t=q.ChainStore.getAccount(e);(!t||t&&t.get(\"id\")!==this.state.proxy_account_id)&&this.setState({proxy_account_id:\"\",proxy_witnesses:m.a.Set(),proxy_committee:m.a.Set(),proxy_workers:m.a.Set()}),this.setState({current_proxy_input:e})}},{key:\"onProxyAccountFound\",value:function(e){var t=this,a=e?e.get(\"id\"):\"\";this.state.proxy_account_id!==a&&this.setState({proxy_account_id:a},function(){t.updateAccountData(t.props)})}},{key:\"onClearProxy\",value:function(){this.setState({proxy_account_id:\"\"})}},{key:\"_getTotalVotes\",value:function(e){return parseInt(e.get(\"total_votes_for\"),10)-parseInt(e.get(\"total_votes_against\"),10)}},{key:\"getBudgetObject\",value:function(){var e=this,t=this.state.lastBudgetObject,a=void 0;a=q.ChainStore.getObject(t);var n=parseInt(t.split(\".\")[2],10);if(a){var s=a.get(\"time\");/Z$/.test(s)||(s+=\"Z\");var o=new Date,r=n+Math.floor((o-new Date(s).getTime())/1e3/60/60)-1;if(n>=r)return;var l=\"2.13.\"+Math.max(n,r),c=parseInt(l.split(\".\")[2],10);Object(q.FetchChainObjects)(q.ChainStore.getObject,[l],void 0,{}).then(function(t){null===_a(t,1)[0]?e.setState({lastBudgetObject:\"2.13.\"+(c-1)},e.getBudgetObject):(i.a.setLastBudgetObject(l),e.setState({lastBudgetObject:l}))})}else{var u=\"2.13.\"+(n-1);Object(q.FetchChainObjects)(q.ChainStore.getObject,[u],void 0,{}).then(function(t){null===_a(t,1)[0]?e.setState({lastBudgetObject:\"2.13.\"+(n-2)},e.getBudgetObject):(i.a.setLastBudgetObject(u),e.setState({lastBudgetObject:u}))})}}},{key:\"_getWorkerArray\",value:function(){var e=[];return q.ChainStore.workers.forEach(function(t){var a=q.ChainStore.getObject(t,!1,!1);a&&e.push(a)}),e}},{key:\"_setWorkerTableIndex\",value:function(e){this.setState({workerTableIndex:e})}},{key:\"_getMappedWorkers\",value:function(e,t){var a=this,n=new Date,s=t,o=void 0;return{mappedWorkers:e.filter(function(e){return!!e}).sort(function(e,t){return a._getTotalVotes(t)-a._getTotalVotes(e)}).map(function(e,t){e.isOngoing=new Date(e.get(\"work_end_date\")+\"Z\")>n&&new Date(e.get(\"work_begin_date\")+\"Z\")<=n,e.isUpcoming=new Date(e.get(\"work_begin_date\")+\"Z\")>n,e.isExpired=new Date(e.get(\"work_end_date\")+\"Z\")<=n;var a=parseInt(e.get(\"daily_pay\"),10);return e.votes=e.get(\"total_votes_for\")-e.get(\"total_votes_against\"),s>0&&e.isOngoing?(e.active=!0,(s-=a)<=0&&!o&&(o=e.votes),e.remainingPayout=s+a):(e.active=!1,e.remainingPayout=0),e}).sort(function(e,t){return e.isExpired!==t.isExpired?e.isExpired?1:-1:a._getTotalVotes(t)-a._getTotalVotes(e)}),voteThreshold:o}}},{key:\"render\",value:function(){var e=this,t=this.state,a=t.workerTableIndex,n=!!t.prev_proxy_account_id,o=this.props.settings.get(\"unit\")||\"1.3.0\",r=!!this.state.proxy_account_id,i=L()(\"button\",{disabled:!this.isChanged()}),l=this.props.globalObject,c=void 0;this.state.lastBudgetObject&&(c=q.ChainStore.getObject(this.state.lastBudgetObject));var u=0,p=l?parseInt(l.getIn([\"parameters\",\"worker_budget_per_day\"]),10):0;c&&(p=Math.min(24*c.getIn([\"record\",\"worker_budget\"]),p),u=Math.min(24*c.getIn([\"record\",\"worker_budget\"]),p));var d=this._getWorkerArray(),h=this._getMappedWorkers(d,p),m=h.mappedWorkers,f=h.voteThreshold,g=m.filter(function(e){var t=e.get(\"name\").toLowerCase();return t.includes(\"bsip\")||t.includes(\"poll\")}).map(function(t,a){return s.a.createElement(na,{preferredUnit:o,rest:t.remainingPayout,rank:a+1,poll:!0,key:t.get(\"id\"),worker:t.get(\"id\"),vote_ids:e.state[r?\"proxy_vote_ids\":\"vote_ids\"],onChangeVotes:e.onChangeVotes.bind(e),proxy:r,voteThreshold:f})}).filter(function(e){return!!e}),b=(m=m.filter(function(e){var t=e.get(\"name\").toLowerCase();return!t.includes(\"bsip\")&&!t.includes(\"poll\")})).filter(function(e){return e.isOngoing}),v=m.filter(function(e){return e.active&&e.isOngoing}).map(function(t,a){return s.a.createElement(na,{preferredUnit:o,rest:t.remainingPayout,rank:a+1,key:t.get(\"id\"),worker:t.get(\"id\"),vote_ids:e.state[r?\"proxy_vote_ids\":\"vote_ids\"],onChangeVotes:e.onChangeVotes.bind(e),proxy:r,voteThreshold:f})}).filter(function(e){return!!e}),_=m.filter(function(t){return!t.active&&!t.isExpired&&function(t,a){if(!e.state.hideLegacyProposals)return!0;var n=a.some(function(e){var a=ga.a.compareTwoStrings(t.get(\"name\"),e.get(\"name\"))>.8,n=e.get(\"id\")===t.get(\"id\"),s=e.get(\"id\").substr(5,e.get(\"id\").length)>t.get(\"id\").substr(5,e.get(\"id\").length);return a&&!n&&s}),s=new Date,o=t.get(\"total_votes_for\")-t.get(\"total_votes_against\")<2e12,r=new Date(t.get(\"work_begin_date\")+\"Z\")<=new Date(s.setMonth(s.getMonth()-2)),i=ba.includes(t.get(\"id\"));return!((n||r)&&o||i)}(t,b)}).map(function(t,a){return s.a.createElement(na,{preferredUnit:o,rest:0,rank:a+1,key:t.get(\"id\"),worker:t.get(\"id\"),vote_ids:e.state[r?\"proxy_vote_ids\":\"vote_ids\"],onChangeVotes:e.onChangeVotes.bind(e),proxy:r,voteThreshold:f})}),y=d.filter(function(e){return e.isExpired}).map(function(t,a){return s.a.createElement(na,{preferredUnit:o,rest:0,rank:a+1,key:t.get(\"id\"),worker:t.get(\"id\"),vote_ids:e.state[r?\"proxy_vote_ids\":\"vote_ids\"],onChangeVotes:e.onChangeVotes.bind(e),proxy:r,voteThreshold:f})}),E=s.a.createElement(\"span\",null,s.a.createElement(\"button\",{className:L()(i,{success:this.isChanged()}),onClick:this.onPublish,tabIndex:4},s.a.createElement(A.a,{content:\"account.votes.publish\"})),s.a.createElement(\"button\",{className:\"button \"+i,onClick:this.onReset,tabIndex:8},s.a.createElement(A.a,{content:\"account.perm.reset\"})),n&&s.a.createElement(\"button\",{className:\"button\",onClick:this.onRemoveProxy,tabIndex:9},s.a.createElement(A.a,{content:\"account.perm.remove_proxy\"}))),k=s.a.createElement(pe.a,{style:{width:\"50%\",maxWidth:250,marginBottom:10},account:this.state.current_proxy_input,accountName:this.state.current_proxy_input,onChange:this.onProxyChange.bind(this),onAccountChanged:this.onProxyAccountFound,tabIndex:1,placeholder:W.a.translate(\"account.votes.set_proxy\"),tooltip:W.a.translate(this.state.proxy_account_id?\"tooltip.proxy_remove\":\"tooltip.proxy_search\"),hideImage:!0},s.a.createElement(\"span\",{style:{paddingLeft:5,position:\"relative\",top:9,display:r?\"\":\"none\"}},s.a.createElement(I.a,{name:\"locked\",size:\"1x\"})),s.a.createElement(\"span\",{style:{paddingLeft:5,position:\"relative\",top:9,display:r?\"none\":\"\"}},s.a.createElement(w.a,{to:\"/help/voting\"},s.a.createElement(I.a,{name:\"question-circle\",title:\"icons.question_circle\",size:\"1x\"})))),C=2===a,x=s.a.createElement(\"div\",{className:\"inline-block\",style:{float:\"right\",visibility:this.isChanged()?\"visible\":\"hidden\",color:\"red\",padding:\"0.85rem\",fontSize:\"0.9rem\"}},s.a.createElement(A.a,{content:\"account.votes.save_finish\"})),S=s.a.createElement(\"div\",{className:\"inline-block\",style:{marginLeft:\"0.5em\"},onClick:function(){e.setState({hideLegacyProposals:!e.state.hideLegacyProposals})}},s.a.createElement(Y.Tooltip,{title:W.a.translate(\"tooltip.legacy_explanation\")},s.a.createElement(Y.Switch,{style:{marginRight:6},checked:this.state.hideLegacyProposals}),s.a.createElement(A.a,{content:\"account.votes.hide_legacy_proposals\"})));return s.a.createElement(\"div\",{className:\"grid-content app-tables no-padding\",ref:\"appTables\"},s.a.createElement(\"div\",{className:\"content-block small-12\"},s.a.createElement(\"div\",{className:\"tabs-container generic-bordered-box\"},s.a.createElement(M.b,{setting:\"votingTab\",className:\"account-tabs\",defaultActiveTab:1,segmented:!1,actionButtons:x,tabsClass:\"account-overview no-padding bordered-header content-block\"},s.a.createElement(M.a,{title:\"explorer.witnesses.title\"},s.a.createElement(\"div\",{className:L()(\"content-block\")},s.a.createElement(\"div\",{className:\"header-selector\"},k,s.a.createElement(\"div\",{style:{float:\"right\",marginTop:\"-2.5rem\"}},E)),s.a.createElement(ha,{type:\"witness\",label:\"account.votes.add_witness_label\",items:this.state.all_witnesses,validateAccount:this.validateAccount.bind(this,\"witnesses\"),onAddItem:this.onAddItem.bind(this,\"witnesses\"),onRemoveItem:this.onRemoveItem.bind(this,\"witnesses\"),tabIndex:r?-1:2,supported:this.state[r?\"proxy_witnesses\":\"witnesses\"],withSelector:!1,active:l.get(\"active_witnesses\"),proxy:this.state.proxy_account_id}))),s.a.createElement(M.a,{title:\"explorer.committee_members.title\"},s.a.createElement(\"div\",{className:L()(\"content-block\")},s.a.createElement(\"div\",{className:\"header-selector\"},k,s.a.createElement(\"div\",{style:{float:\"right\",marginTop:\"-2.5rem\"}},E)),s.a.createElement(ha,{type:\"committee\",label:\"account.votes.add_committee_label\",items:this.state.all_committee,validateAccount:this.validateAccount.bind(this,\"committee\"),onAddItem:this.onAddItem.bind(this,\"committee\"),onRemoveItem:this.onRemoveItem.bind(this,\"committee\"),tabIndex:r?-1:3,supported:this.state[r?\"proxy_committee\":\"committee\"],withSelector:!1,active:l.get(\"active_committee_members\"),proxy:this.state.proxy_account_id}))),s.a.createElement(M.a,{title:\"account.votes.workers_short\"},s.a.createElement(\"div\",{className:\"header-selector\"},s.a.createElement(\"div\",{style:{float:\"right\"}},s.a.createElement(w.a,{to:\"/create-worker\"},s.a.createElement(\"div\",{className:\"button\"},s.a.createElement(A.a,{content:\"account.votes.create_worker\"})))),s.a.createElement(\"div\",{className:\"selector inline-block\"},s.a.createElement(\"div\",{style:{paddingLeft:10},className:L()(\"inline-block\",{inactive:0!==a}),onClick:this._setWorkerTableIndex.bind(this,0)},W.a.translate(\"account.votes.new\",{count:_.length})),s.a.createElement(\"div\",{className:L()(\"inline-block\",{inactive:1!==a}),onClick:this._setWorkerTableIndex.bind(this,1)},W.a.translate(\"account.votes.active\",{count:v.length})),y.length?s.a.createElement(\"div\",{className:L()(\"inline-block\",{inactive:!C}),onClick:C?function(){}:this._setWorkerTableIndex.bind(this,2)},s.a.createElement(A.a,{content:\"account.votes.expired\"})):null,g.length?s.a.createElement(\"div\",{className:L()(\"inline-block\",{inactive:3!==a}),onClick:this._setWorkerTableIndex.bind(this,3)},W.a.translate(\"account.votes.polls\",{count:g.length})):null),s.a.createElement(\"div\",{className:\"inline-block\"},S),s.a.createElement(\"div\",{style:{marginTop:\"2rem\"}},k,s.a.createElement(\"div\",{style:{float:\"right\",marginTop:\"-2.5rem\"}},E))),s.a.createElement(\"table\",{className:\"table dashboard-table table-hover\"},2===a?null:0===a?s.a.createElement(\"thead\",null,s.a.createElement(\"tr\",null,s.a.createElement(\"th\",null),s.a.createElement(\"th\",{colSpan:\"3\",style:{textAlign:\"left\"}},s.a.createElement(A.a,{content:\"account.votes.threshold\"})),s.a.createElement(\"th\",{style:{textAlign:\"right\"}},s.a.createElement(O.a,{decimalOffset:5,hide_asset:!0,amount:f,asset:\"1.3.0\"})),s.a.createElement(\"th\",{colSpan:\"3\"})),s.a.createElement(\"tr\",null,s.a.createElement(\"th\",{style:{border:\"none\",backgroundColor:\"transparent\"}}))):s.a.createElement(\"thead\",null,s.a.createElement(\"tr\",null,s.a.createElement(\"th\",null),s.a.createElement(\"th\",{colSpan:\"4\",style:{textAlign:\"left\"}},s.a.createElement(A.a,{content:\"account.votes.total_budget\"}),\" \",\"(\",s.a.createElement(ma.a,{name:o}),\")\"),s.a.createElement(\"th\",{colSpan:\"2\",className:\"hide-column-small\"}),s.a.createElement(\"th\",{style:{textAlign:\"right\"}},l?s.a.createElement(ea.b,{hide_asset:!0,fromAsset:\"1.3.0\",toAsset:o,amount:u}):null),s.a.createElement(\"th\",{className:\"hide-column-small\"})),s.a.createElement(\"tr\",null,s.a.createElement(\"th\",{style:{border:\"none\",backgroundColor:\"transparent\"}}))),s.a.createElement(\"thead\",null,s.a.createElement(\"tr\",null,2===a?null:s.a.createElement(\"th\",{style:{textAlign:\"right\"}},s.a.createElement(A.a,{content:\"account.votes.line\"})),s.a.createElement(\"th\",{style:{textAlign:\"center\"}},s.a.createElement(A.a,{content:\"account.user_issued_assets.id\"})),s.a.createElement(\"th\",{style:{textAlign:\"left\"}},s.a.createElement(A.a,{content:\"account.user_issued_assets.description\"})),s.a.createElement(\"th\",{style:{textAlign:\"right\"},className:\"hide-column-small\"},s.a.createElement(A.a,{content:\"account.votes.total_votes\"})),0===a?s.a.createElement(\"th\",{style:{textAlign:\"right\"}},s.a.createElement(A.a,{content:\"account.votes.missing\"})):null,s.a.createElement(\"th\",null,s.a.createElement(A.a,{content:\"explorer.workers.period\"})),2===a||0===a?null:s.a.createElement(\"th\",{style:{textAlign:\"right\"},className:\"hide-column-small\"},s.a.createElement(A.a,{content:\"account.votes.funding\"})),s.a.createElement(\"th\",{style:{textAlign:\"right\"},className:\"hide-column-small\"},s.a.createElement(A.a,{content:\"account.votes.daily_pay\"}),s.a.createElement(\"div\",{style:{paddingTop:5,fontSize:\"0.8rem\"}},\"(\",s.a.createElement(ma.a,{name:o}),\")\")),2===a||0===a?null:s.a.createElement(\"th\",{style:{textAlign:\"right\"}},s.a.createElement(A.a,{content:\"explorer.witnesses.budget\"}),s.a.createElement(\"div\",{style:{paddingTop:5,fontSize:\"0.8rem\"}},\"(\",s.a.createElement(ma.a,{name:o}),\")\")),s.a.createElement(\"th\",null,s.a.createElement(A.a,{content:\"account.votes.toggle\"})))),s.a.createElement(\"tbody\",null,0===a?_:1===a?v:2===a?y:g)))))))}}]),t}();Ea.propTypes={initialBudget:c.a.ChainObject.isRequired,globalObject:c.a.ChainObject.isRequired,proxy:c.a.ChainAccount.isRequired},Ea.defaultProps={globalObject:\"2.0.0\"},Ea=Object(u.a)(Ea);var wa=function(e){var t={};if(e.initialBudget||(t.initialBudget=i.a.getLastBudgetObject()),!e.account){var a=r.a.getState().currentAccount||r.a.getState().passwordAccount;a=a&&\"null\"!==a?a:\"committee-account\",t.account=a}if(!e.proxy){var n=q.ChainStore.getAccount(e.account),o=null;if(!n)throw\"Account must be loaded\";o=n.getIn([\"options\",\"voting_account\"]),t.proxy=o}return s.a.createElement(Ea,va({},e,t))},ka=a(585),Aa=a(1992),Ca=function(){function e(e,t){for(var a=0;a<t.length;a++){var n=t[a];n.enumerable=n.enumerable||!1,n.configurable=!0,\"value\"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,a,n){return a&&e(t.prototype,a),n&&e(t,n),t}}();function xa(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}var Oa={textAlign:\"right\"},Sa={textAlign:\"left\"},Pa=function(e){function t(e){!function(e,t){if(!(e instanceof t))throw new TypeError(\"Cannot call a class as a function\")}(this,t);var a=function(e,t){if(!e)throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\");return!t||\"object\"!=typeof t&&\"function\"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e)),n=null!=e.object;return a.state={isBorrowModalVisible:!1,modalRef:\"cp_modal_\"+(n?a.props.object.getIn([\"call_price\",\"quote\",\"asset_id\"]):a.props.debtAsset.get(\"id\")),hasOrder:n},a}return function(e,t){if(\"function\"!=typeof t&&null!==t)throw new TypeError(\"Super expression must either be null or a function, not \"+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,s.a.Component),Ca(t,[{key:\"showBorrowModal\",value:function(){this.setState({isBorrowModalVisible:!0})}},{key:\"hideBorrowModal\",value:function(){this.setState({isBorrowModalVisible:!1})}},{key:\"_onUpdatePosition\",value:function(e){e.preventDefault(),this.refs[this.state.modalRef].show()}},{key:\"_getFeedPrice\",value:function(){return this.props?1/F.a.get_asset_price(N.a.extractRawFeedPrice(this.props.debtAsset).getIn([\"quote\",\"amount\"]),this.props.collateralAsset,N.a.extractRawFeedPrice(this.props.debtAsset).getIn([\"base\",\"amount\"]),this.props.debtAsset):1}},{key:\"_onClosePosition\",value:function(e){e.preventDefault();var t=Kt.a.new_transaction();t.add_type_operation(\"call_order_update\",{fee:{amount:0,asset_id:0},funding_account:this.props.object.get(\"borrower\"),delta_collateral:{amount:-this.props.object.get(\"collateral\"),asset_id:this.props.object.getIn([\"call_price\",\"base\",\"asset_id\"])},delta_debt:{amount:-this.props.object.get(\"debt\"),asset_id:this.props.object.getIn([\"call_price\",\"quote\",\"asset_id\"])}}),ot.a.process_transaction(t,null,!0)}},{key:\"_getBalance\",value:function(){var e=this.props.account,t=null;t=null!=this.props.object?this.props.object.getIn([\"call_price\",\"quote\",\"asset_id\"]):this.props.debtAsset.get(\"id\");var a=e.get(\"balances\"),n=0;return a&&a.forEach(function(e,a){if(a==t){var s=q.ChainStore.getObject(e);n=s.get(\"balance\")}}),n}},{key:\"_getCollateralRatio\",value:function(){var e=this.props.object.toJS();return F.a.get_asset_amount(e.collateral,this.props.collateralAsset)/(F.a.get_asset_amount(e.debt,this.props.debtAsset)/this._getFeedPrice())}},{key:\"_getMR\",value:function(){return this.props.debtAsset.getIn([\"bitasset\",\"current_feed\",\"maintenance_collateral_ratio\"])/1e3}},{key:\"_getStatusClass\",value:function(){var e=this._getCollateralRatio(),t=this._getMR();return isNaN(e)?null:e<t?\"danger\":e<t+.5?\"warning\":\"\"}},{key:\"_getCRTip\",value:function(){var e=this._getStatusClass(),t=this._getMR();return e&&\"\"!==e?\"danger\"===e?W.a.translate(\"tooltip.cr_danger\",{mr:t}):\"warning\"===e?W.a.translate(\"tooltip.cr_warning\",{mr:t}):null:null}},{key:\"_getTargetCollateralRatio\",value:function(){var e=this.props.object&&this.props.object.toJS();return e&&!isNaN(e.target_collateral_ratio)?e.target_collateral_ratio/1e3:0}},{key:\"render\",value:function(){var e=this.props,t=e.debtAsset,a=e.collateralAsset,n=e.object,o=null!=n,r=this._getBalance(),i=o?n.toJS():null,l=F.a.replaceName(this.props.debtAsset).isBitAsset,c=this.props.debtAsset.getIn([\"bitasset\",\"settlement_fund\"]),u=this.props.debtAsset.getIn([\"bitasset\",\"current_feed\",\"maintenance_collateral_ratio\"]),p=c>0,d=o?i.call_price.quote.asset_id:t.get(\"id\"),m=o?i.debt:0,f=o?i.collateral:0,g=o?i.call_price.base.asset_id:a.get(\"id\"),b=this._getTargetCollateralRatio();return s.a.createElement(\"tr\",{className:\"margin-row\"},s.a.createElement(\"td\",{style:Sa},s.a.createElement(w.a,{to:\"/asset/\"+t.get(\"symbol\")},s.a.createElement(ma.a,{noTip:!0,name:t.get(\"symbol\")}))),s.a.createElement(\"td\",{style:Oa},s.a.createElement(O.a,{amount:r,asset:d,hide_asset:!0})),s.a.createElement(\"td\",{style:Oa},s.a.createElement(O.a,{amount:m,asset:d,hide_asset:!0})),s.a.createElement(\"td\",{style:Oa,className:\"column-hide-medium\"},s.a.createElement(O.a,{decimalOffset:3,amount:f,asset:g})),o?s.a.createElement(\"td\",{\"data-place\":\"bottom\",\"data-tip\":this._getCRTip(),className:\"center-content \"+this._getStatusClass()},F.a.format_number(this._getCollateralRatio(),2)):s.a.createElement(\"td\",null),s.a.createElement(\"td\",null,b?F.a.format_number(b,2):null),s.a.createElement(\"td\",{style:Oa},o?s.a.createElement(ka.a,{noTip:!0,balances:Object(h.List)(),debt:xa({},t.get(\"id\"),i.debt),collateral:xa({},a.get(\"id\"),parseInt(i.collateral,10)),hide_asset:!0}):null),s.a.createElement(\"td\",{style:Oa,className:\"column-hide-small\"},o?s.a.createElement(le.a,{base_amount:f,base_asset:a.get(\"id\"),quote_amount:m*(u/1e3),quote_asset:t.get(\"id\"),hide_symbols:!0}):null),s.a.createElement(\"td\",{style:Oa,className:\"column-hide-small\"},o?s.a.createElement(le.a,{base_amount:N.a.extractRawFeedPrice(t).getIn([\"base\",\"amount\"]),base_asset:i.call_price.quote.asset_id,quote_amount:N.a.extractRawFeedPrice(t).getIn([\"quote\",\"amount\"]),quote_asset:i.call_price.base.asset_id,hide_symbols:!0}):null),s.a.createElement(\"td\",{className:\"center-content column-hide-small\",style:Sa},o?s.a.createElement(le.a,{base_amount:i.call_price.base.amount,base_asset:i.call_price.base.asset_id,quote_amount:i.call_price.quote.amount,quote_asset:i.call_price.quote.asset_id,hide_value:!0}):null),s.a.createElement(\"td\",{style:{textAlign:\"center\"}},s.a.createElement(w.a,{to:\"/market/\"+t.get(\"symbol\")+\"_\"+a.get(\"symbol\")},s.a.createElement(I.a,{name:\"trade\",title:\"icons.trade.trade\",className:\"icon-14px\",style:{marginRight:5}}))),s.a.createElement(\"td\",null,p?s.a.createElement(Y.Tooltip,{placement:\"left\",title:W.a.translate(\"tooltip.borrow_disabled\",{asset:l?\"bit\"+t.get(\"symbol\"):\"\"+t.get(\"symbol\")})},s.a.createElement(\"div\",{style:{paddingBottom:5}},s.a.createElement(Y.Icon,{type:\"question-circle\"}))):s.a.createElement(Y.Tooltip,{placement:\"left\",title:W.a.translate(\"tooltip.update_position\")},s.a.createElement(\"div\",{style:{paddingBottom:5}},s.a.createElement(\"a\",{onClick:this._onUpdatePosition.bind(this)},s.a.createElement(I.a,{name:\"adjust\",title:\"icons.adjust\",className:\"icon-14px rotate90\"}))))),s.a.createElement(\"td\",null,o?s.a.createElement(\"div\",{\"data-place\":\"left\",\"data-tip\":W.a.translate(\"tooltip.close_position\",{amount:F.a.get_asset_amount(i.debt,this.props.debtAsset),asset:t.get(\"symbol\")}),style:{paddingBottom:5}},s.a.createElement(\"a\",{onClick:this._onClosePosition.bind(this)},s.a.createElement(I.a,{name:\"cross-circle\",title:\"icons.cross_circle.close_position\",className:\"icon-14px\"}))):null,t?s.a.createElement(Aa.a,{visible:this.state.isBorrowModalVisible,showModal:this.showBorrowModal.bind(this),hideModal:this.hideBorrowModal.bind(this),ref:this.state.modalRef,modalId:this.state.modalRef,quote_asset:d,backing_asset:t.getIn([\"bitasset\",\"options\",\"short_backing_asset\"]),account:this.props.account}):null))}}]),t}();Pa.propTypes={object:c.a.ChainObject,debtAsset:c.a.ChainAsset.isRequired,collateralAsset:c.a.ChainAsset.isRequired},Pa.defaultProps={tempComponent:\"tr\"};var Na=Pa=Object(u.a)(Pa),ja=a(19),Ma=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var n in a)Object.prototype.hasOwnProperty.call(a,n)&&(e[n]=a[n])}return e},Ia=function(){function e(e,t){for(var a=0;a<t.length;a++){var n=t[a];n.enumerable=n.enumerable||!1,n.configurable=!0,\"value\"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,a,n){return a&&e(t.prototype,a),n&&e(t,n),t}}();var Ta={textAlign:\"right\"},Ra={textAlign:\"left\"},Ba=function(e){function t(e){!function(e,t){if(!(e instanceof t))throw new TypeError(\"Cannot call a class as a function\")}(this,t);var a=function(e,t){if(!e)throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\");return!t||\"object\"!=typeof t&&\"function\"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return a.state={assetsPropsCount:0,ordersJson:\"\"},a}return function(e,t){if(\"function\"!=typeof t&&null!==t)throw new TypeError(\"Super expression must either be null or a function, not \"+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,s.a.Component),Ia(t,[{key:\"render\",value:function(){var e=this,t=this.props.account,a=this.state.assets.sort(function(e,t){if(e.has_margin_order&&t.has_margin_order)return t.order.get(\"debt\")-e.order.get(\"debt\");if(e.has_margin_order||t.has_margin_order)return e.has_margin_order?-1:1;var a=F.a.replaceName(e.asset),n=F.a.replaceName(t.asset),s=(null!=a.prefix?a.prefix:\"\")+a.name,o=(null!=n.prefix?n.prefix:\"\")+n.name;return s.localeCompare(o)}).map(function(a){var n=void 0,o=void 0,r=null;if(a.has_margin_order){var i=a.order;n=i.getIn([\"call_price\",\"quote\",\"asset_id\"]),o=i.getIn([\"call_price\",\"base\",\"asset_id\"]),r=i.get(\"id\")}else n=a.asset.get(\"id\"),o=a.asset.getIn([\"bitasset\",\"options\",\"short_backing_asset\"]);return s.a.createElement(Na,Ma({key:a.asset.get(\"id\"),object:r,account:t,debtAsset:n,collateralAsset:o},e.props))});return s.a.createElement(\"tbody\",null,a)}}],[{key:\"getDerivedStateFromProps\",value:function(e,t){var a=JSON.stringify(e.callOrders);if(null==t||t.assetsPropsCount!=e.bitAssets.length||t.ordersJson!=a){var n=new Array,s={},o=0;return e.bitAssets.forEach(function(e){s[e.get(\"id\")]=o++,n.push({asset:e,has_margin_order:!1})}),e.callOrders.length>0&&e.callOrders.forEach(function(e){if(e){var t=e.getIn([\"call_price\",\"quote\",\"asset_id\"]);if(null==s[t]){var a=q.ChainStore.getObject(t);void 0!==a&&(s[t]=o++,n.push({asset:a,has_margin_order:!0,order:e}))}else n[s[t]].has_margin_order=!0,n[s[t]].order=e}}),{assetsPropsCount:e.bitAssets.length,assets:n,ordersJson:a}}return t}}]),t}();Ba.propTypes={callOrders:c.a.ChainObjectsList},Ba=Object(u.a)(Ba),Ba=Object(j.a)(Ba,{propNames:[\"bitAssets\"],defaultProps:{bitAssets:[\"1.3.113\",\"1.3.120\",\"1.3.121\",\"1.3.1325\",\"1.3.105\",\"1.3.106\",\"1.3.103\"]},asList:!0});var Da=function(e){var t=e.callOrders,a=e.account,n=e.className,o=e.children,r=e.preferredUnit;return s.a.createElement(\"table\",{className:\"table table-hover \"+n},s.a.createElement(\"thead\",null,s.a.createElement(\"tr\",null,s.a.createElement(\"th\",{style:Ra},s.a.createElement(A.a,{content:\"explorer.asset.title\"})),s.a.createElement(\"th\",{style:Ta},s.a.createElement(A.a,{content:\"exchange.balance\"})),s.a.createElement(\"th\",{style:Ta},s.a.createElement(A.a,{content:\"transaction.borrow_amount\"})),s.a.createElement(\"th\",{style:Ta,className:\"column-hide-medium\"},s.a.createElement(A.a,{content:\"transaction.collateral\"})),s.a.createElement(\"th\",null,s.a.createElement(Y.Popover,{placement:\"top\",title:W.a.translate(\"header.collateral_ratio\"),content:W.a.translate(\"tooltip.coll_ratio\")},s.a.createElement(A.a,{content:\"borrow.coll_ratio\"}))),s.a.createElement(\"th\",null,s.a.createElement(Y.Popover,{placement:\"top\",content:s.a.createElement(\"div\",{style:{width:\"600px\"}},W.a.translate(\"borrow.target_collateral_ratio_explanation\")),title:W.a.translate(\"borrow.target_collateral_ratio\")},s.a.createElement(A.a,{content:\"borrow.target_collateral_ratio_short\"}))),s.a.createElement(\"th\",null,s.a.createElement(ja.a,{noLink:!0,string:\"account.total\",keys:[{type:\"asset\",value:r,arg:\"asset\"}]})),s.a.createElement(\"th\",{style:Ta,className:\"column-hide-small\"},s.a.createElement(Y.Popover,{placement:\"top\",content:W.a.translate(\"tooltip.call_price\")},s.a.createElement(A.a,{content:\"exchange.call\"}))),s.a.createElement(\"th\",{style:Ta,className:\"column-hide-small\"},s.a.createElement(Y.Popover,{placement:\"top\",content:W.a.translate(\"tooltip.feed_price\")},s.a.createElement(A.a,{content:\"exchange.feed_price\"}))),s.a.createElement(\"th\",{className:\"column-hide-small\",style:Ra},s.a.createElement(A.a,{content:\"explorer.assets.units\"})),s.a.createElement(\"th\",{style:{textAlign:\"center\"}},s.a.createElement(A.a,{content:\"exchange.market\"})),s.a.createElement(\"th\",null,s.a.createElement(A.a,{content:\"borrow.adjust_short\"})),s.a.createElement(\"th\",null,s.a.createElement(A.a,{content:\"transfer.close\"})))),s.a.createElement(Ba,{account:a,callOrders:m.a.List(t)}),s.a.createElement(\"tbody\",null,o))},La=a(301),Va=a(193),Fa=a(595),qa={AccountPermission:function(e,t,a){var n=this;this.id=e.get(\"id\"),this.weight=t,this.threshold=e.getIn([a,\"weight_threshold\"]),this.accounts=[],this.keys=e.getIn([a,\"key_auths\"]).map(function(e){return new function(e){var t=this;this.id=e.toJS?e.get(0):e[0],this.weight=e.toJS?e.get(1):e[1],this.isAvailable=function(e){return e.includes?e.includes(t.id):-1!==e.indexOf(t)}}(e)}).toArray(),this.isAvailable=function(e){return e.includes?e.includes(n.id):-1!==e.indexOf(n)},this._sumWeights=function(e){if(n.isNested()||n.isMultiSig()){var t=n.accounts.reduce(function(t,a){return t+(a._sumWeights(e)?a.weight:0)},0);return Math.floor(t/n.threshold)}return n.isAvailable(e)?n.weight:0},this.getStatus=function(e,t){if(n.isNested()){var a=n.accounts.reduce(function(t,a){return t+a._sumWeights(e)},0);return n.keys.length&&(a+=n.sumKeys(t)),a}var s=n._sumWeights(e);return n.isMultiSig()&&(s+=n.sumKeys(t)),s},this.sumKeys=function(e){return n.keys.reduce(function(t,a){return t+(a.isAvailable(e)?a.weight:0)},0)},this.isNested=function(){return n.accounts.length>0},this.isMultiSig=function(){return n.keys.reduce(function(e,t){return e||t.weight<n.threshold},!1)},this.getMissingSigs=function(e){var t=[],a=[];return n.isNested()?a=n.accounts.reduce(function(t,a){return t.concat(a.getMissingSigs(e))},[]):n.isAvailable(e)||t.push(n.id),t.concat(a)},this.getMissingKeys=function(e){var t=[],a=[];return n.keys.length&&(n.isNested()||n.isMultiSig())&&n.keys.forEach(function(a){a.isAvailable(e)||t.push(a.id)}),n.isNested()&&(a=n.accounts.reduce(function(t,a){return t.concat(a.getMissingKeys(e))},[])),t.concat(a)}},listToIDs:function(e){var t=[];return e.forEach(function(e){e&&t.push(e.get?e.get(\"id\"):e)}),t},unravel:function(e,t){var a=this,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;if(n<3){var s=q.ChainStore.getAccount(e.id);s&&s.getIn([t,\"account_auths\"]).size&&s.getIn([t,\"account_auths\"]).forEach(function(s){var o=q.ChainStore.getAccount(s.get(0));o&&e.accounts.push(a.unravel(new a.AccountPermission(o,s.get(1),t),t,n+1))})}return e},unnest:function(e,t){var a=this,n=[];return e.forEach(function(e){var s=q.ChainStore.getAccount(e);if(s){var o=a.unravel(new a.AccountPermission(s,null,t),t);n.push(o)}}),n},flatten_auths:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:m.a.List();return e.size?(e.forEach(function(e){t.includes(e.get(0))||(t=t.push(e.get(0)))}),t):t}},Ua=a(53),Wa=a.n(Ua),za=function(){function e(e,t){for(var a=0;a<t.length;a++){var n=t[a];n.enumerable=n.enumerable||!1,n.configurable=!0,\"value\"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,a,n){return a&&e(t.prototype,a),n&&e(t,n),t}}();var Ja=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError(\"Cannot call a class as a function\")}(this,t),function(e,t){if(!e)throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\");return!t||\"object\"!=typeof t&&\"function\"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return function(e,t){if(\"function\"!=typeof t&&null!==t)throw new TypeError(\"Super expression must either be null or a function, not \"+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,s.a.Component),za(t,[{key:\"componentDidMount\",value:function(){Wa.a.rebuild()}},{key:\"render\",value:function(){var e=this.props,t=e.className,a=e.children,n=e.dataTip,o=e.content;return s.a.createElement(Y.Tooltip,{title:n||W.a.translate(o)},s.a.createElement(\"span\",{className:\"tooltip \"+t},a))}}]),t}(),Ka=function(){return s.a.createElement(Ja,{className:\"error appended\",content:\"explorer.proposals.authority_depth_warning\"},\"/!\\\\\")},Ga=function(){return s.a.createElement(Ja,{className:\"error appended\",content:\"explorer.proposals.children_authority_depth_warning\"},\"/!\\\\\")},Za=function(){return s.a.createElement(Ja,{className:\"warning\",content:\"explorer.proposals.pending_approval\"},s.a.createElement(A.a,{content:\"explorer.proposals.pending\"}))},Ha=function(){return s.a.createElement(Ja,{className:\"warning\",content:\"explorer.proposals.pending_review\"},s.a.createElement(A.a,{content:\"explorer.proposals.review\"}))},Qa=function(){return s.a.createElement(Ja,{className:\"error\",content:\"explorer.proposals.failed_execute\"},s.a.createElement(A.a,{content:\"explorer.proposals.failed\"}))},Ya=function(e){var t=e.onToggle,a=e.expanded;return s.a.createElement(\"a\",{className:\"expand-button\",onClick:t},\"[\",a?\"-\":\"+\",\"]\")},Xa=function(e){return e.approved?s.a.createElement(I.a,{name:\"checkmark-circle\",size:\"1x\",className:\"success\",title:\"icons.checkmark_circle.operation_succeed\"}):s.a.createElement(I.a,{name:\"cross-circle\",size:\"1x\",className:\"error\",title:\"icons.cross_circle.operation_failed\"})},$a=function(e){var t=e.available,a=e.permission,n=e.weight,o=e.level;return s.a.createElement(\"tbody\",null,s.a.createElement(\"tr\",null,s.a.createElement(\"td\",{colSpan:\"2\"},s.a.createElement(Xa,{approved:a.isAvailable(t)}),a.id.substr(0,20-4*o),\"...\"),s.a.createElement(\"td\",null,n)))},en=function e(t,a){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;return n>t||!(!a.isNested()&&!a.isMultiSig())&&a.accounts.some(function(a){return e(t,a,n+1)})},tn=function(e,t,a){return e.accounts.reduce(function(e,n){return e+(an(n,t,a)?n.weight:0)},0)+e.keys.reduce(function(e,t){return e+(t.isAvailable(a)?t.weight:0)},0)},an=function(e,t,a){return e.isNested()||e.isMultiSig()?tn(e,t,a)>=e.threshold:e.isAvailable(t)},nn=function(e,t,a){return e&&e.threshold>10?F.a.get_percentage(e.getStatus(t,a),e.threshold)+\" / 100%\":e.getStatus(t,a)+\" / \"+e.threshold},sn=function(e,t){return t&&t>10?F.a.get_percentage(e,t):e},on=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var n in a)Object.prototype.hasOwnProperty.call(a,n)&&(e[n]=a[n])}return e},rn=function(){function e(e,t){for(var a=0;a<t.length;a++){var n=t[a];n.enumerable=n.enumerable||!1,n.configurable=!0,\"value\"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,a,n){return a&&e(t.prototype,a),n&&e(t,n),t}}();function ln(e,t){if(!(e instanceof t))throw new TypeError(\"Cannot call a class as a function\")}function cn(e,t){if(!e)throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\");return!t||\"object\"!=typeof t&&\"function\"!=typeof t?e:t}function un(e,t){if(\"function\"!=typeof t&&null!==t)throw new TypeError(\"Super expression must either be null or a function, not \"+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var pn=function(e){function t(e){ln(this,t);var a=cn(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return a.handleExpandToggle=function(){a.setState({expanded:!a.state.expanded})},a.state={expanded:!!e.expanded},a}return un(t,s.a.Component),rn(t,[{key:\"render\",value:function(){var e=this.props,t=e.account,a=e.available,n=e.availableKeys,o=e.permission,r=e.threshold,i=e.level,l=e.maxAuthorityDepth,c=e.hideRoot,u=this.state.expanded,p=an(o,a,n),d=o.isNested(),h=o.isMultiSig(),m=sn(o.weight,r)||1,f=nn(o,a,n),g=i>=l,b=d||h?s.a.createElement(\"tr\",null,s.a.createElement(\"td\",{colSpan:\"2\"},s.a.createElement(Xa,{approved:p}),s.a.createElement(ce.a,{subpage:\"permissions\",account:t.get(\"id\")})),s.a.createElement(\"td\",null,u?s.a.createElement(\"span\",{className:p?\"success-text\":\"\"},m):m&&(m&&2===m.length?\"Â Â \":\"\")+m+\" \",s.a.createElement(Ya,{onToggle:this.handleExpandToggle,expanded:u}),u&&s.a.createElement(\"span\",{className:\"appended\"},\"(\",f,\")\"),g?s.a.createElement(Ka,null):en(l,o,i)&&!u&&s.a.createElement(Ga,null))):s.a.createElement(\"tr\",null,s.a.createElement(\"td\",{colSpan:\"2\"},s.a.createElement(Xa,{approved:p}),s.a.createElement(ce.a,{subpage:\"permissions\",account:t.get(\"id\")})),s.a.createElement(\"td\",null,!d&&m?(m&&2===m.length?\"Â Â \":\"\")+m+\" \":null)),v=[];return(d||h)&&u&&(o.accounts.forEach(function(e){v.push(s.a.createElement(dn,{key:e.id,account:e.id,accounts:e.accounts,permission:e,available:a,availableKeys:n,threshold:o.threshold,level:i+1,maxAuthorityDepth:l}))}),o.keys.length&&o.keys.forEach(function(e){return v.push(s.a.createElement($a,{key:e.id,permission:e,available:n,level:i+(c?0:1),weight:sn(e.weight,r)}))})),v.length>0?s.a.createElement(\"tbody\",null,c||b,s.a.createElement(\"tr\",null,s.a.createElement(\"td\",{colSpan:\"3\",className:\"heading-perm\"},s.a.createElement(\"div\",{className:c?\"\":\"table-container\"},s.a.createElement(\"table\",null,v)),u&&0===i&&s.a.createElement(\"div\",{className:\"spacer\"})))):s.a.createElement(\"tbody\",null,b)}}]),t}();pn.propTypes={account:c.a.ChainAccount.isRequired,accounts:c.a.ChainAccountsList,level:E.a.number.isRequired},pn.defaultProps={level:0};var dn=Object(u.a)(pn),hn=function(e){function t(e){ln(this,t);var a=cn(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return a.handleExpandToggle=function(){return a.setState({expanded:!a.state.expanded})},a.state={requiredPermissions:[],expanded:e.expanded},a._updateState=a._updateState.bind(a),a}return un(t,s.a.Component),rn(t,[{key:\"componentWillMount\",value:function(){this._updateState(),q.ChainStore.subscribe(this._updateState)}},{key:\"componentWillUnmount\",value:function(){q.ChainStore.unsubscribe(this._updateState)}},{key:\"_updateState\",value:function(){var e=qa.listToIDs(this.props.required),t=qa.listToIDs(this.props.available);this.setState({requiredPermissions:qa.unnest(e,this.props.type),required:e,available:t})}},{key:\"render\",value:function(){var e=this,t=this.props,a=(t.type,t.added),n=t.removed,o=t.availableKeys,r=t.globalObject,i=t.reviewPeriodTime,l=t.noFail,c=this.state,u=c.requiredPermissions,p=(c.required,c.available),d=c.expanded;p=Object(Fa.a)(p),o=o.toJS(),a&&(p.push(a),o.push(a)),n&&(-1!==p.indexOf(n)&&p.splice(p.indexOf(n),1),-1!==o.indexOf(n)&&o.splice(o.indexOf(n),1));var h=u.reduce(function(e,t){return e+(an(t,p,o)?1:0)},0),m=u.length,f=h===m,g=f&&!i&&!l,b=f&&i,v=r.get(\"parameters\").get(\"max_authority_depth\"),_=1===u.length,y=_?u[0]:null,E=!_&&h+\" / \"+m,w=u.map(function(t){return s.a.createElement(dn,{key:t.id,account:t.id,accounts:t.accounts,permission:t,available:p,availableKeys:o,expanded:e.props.expanded||_,level:0,maxAuthorityDepth:v,hideRoot:_})});return s.a.createElement(\"div\",{className:\"nested-approval-state\"},s.a.createElement(\"div\",{className:\"root-status\"},g?s.a.createElement(Qa,null):b?s.a.createElement(Ha,null):s.a.createElement(Za,null),\" \",y?y.threshold>1&&nn(y,p,o):s.a.createElement(\"span\",null,\"(\",E,\")\"),(!y||y.isMultiSig()||y.isNested())&&s.a.createElement(Ya,{onToggle:this.handleExpandToggle,expanded:d}),!d&&u.some(function(e){return en(v,e,0)})&&s.a.createElement(Ga,null)),d&&s.a.createElement(\"table\",null,w))}}]),t}();hn.propTypes={required:c.a.ChainAccountsList,available:c.a.ChainAccountsList},hn.defaultProps={type:\"active\",added:null,removed:null},hn=Object(u.a)(hn);var mn=function(e){function t(){return ln(this,t),cn(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return un(t,s.a.Component),rn(t,[{key:\"render\",value:function(){var e=this.props,t=e.proposal,a=e.type,n=t.get(\"available_\"+a+\"_approvals\"),o=t.get(\"available_key_approvals\"),r=t.get(\"required_\"+a+\"_approvals\");return s.a.createElement(hn,on({},this.props,{required:r,available:n,availableKeys:o,reviewPeriodTime:t.get(\"review_period_time\")}))}}]),t}();mn.propTypes={proposal:c.a.ChainObject.isRequired,type:E.a.string.isRequired,globalObject:c.a.ChainObject.isRequired},mn.defaultProps={type:\"active\",added:null,globalObject:\"2.0.0\"};var fn=Object(u.a)(mn),gn=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var n in a)Object.prototype.hasOwnProperty.call(a,n)&&(e[n]=a[n])}return e},bn=function(){return function(e,t){if(Array.isArray(e))return e;if(Symbol.iterator in Object(e))return function(e,t){var a=[],n=!0,s=!1,o=void 0;try{for(var r,i=e[Symbol.iterator]();!(n=(r=i.next()).done)&&(a.push(r.value),!t||a.length!==t);n=!0);}catch(e){s=!0,o=e}finally{try{!n&&i.return&&i.return()}finally{if(s)throw o}}return a}(e,t);throw new TypeError(\"Invalid attempt to destructure non-iterable instance\")}}(),vn=function(){function e(e,t){for(var a=0;a<t.length;a++){var n=t[a];n.enumerable=n.enumerable||!1,n.configurable=!0,\"value\"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,a,n){return a&&e(t.prototype,a),n&&e(t,n),t}}();function _n(e,t){if(!(e instanceof t))throw new TypeError(\"Cannot call a class as a function\")}function yn(e,t){if(!e)throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\");return!t||\"object\"!=typeof t&&\"function\"!=typeof t?e:t}function En(e,t){if(\"function\"!=typeof t&&null!==t)throw new TypeError(\"Super expression must either be null or a function, not \"+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var wn=function(e,t,a){var n=[];e.forEach(function(e){n=n.concat(e.getMissingSigs(t))});var s=[];return e.forEach(function(e){s=s.concat(e.getMissingKeys(a))}),[n,s]},kn=function(e){function t(e){_n(this,t);var a=yn(this,(t.__proto__||Object.getPrototypeOf(t)).call(this));return a.state={active:null,key:null,owner:null,payee:null},a}return En(t,s.a.Component),vn(t,[{key:\"onActiveAccount\",value:function(e,t,a,n){var s={};t[n]?(s.key=n,s[a]=null):n?(s[a]=e[n],s.key=null):(s[a]=null,s.key=null),this.setState(s)}},{key:\"_onProposalAction\",value:function(e){var t=this,a=e.toJS(),n=this.state,s=n.active,o=(n.key,n.owner,n.payee||s);if(\"delete\"===this.props.action){var r=Kt.a.new_transaction();r.add_type_operation(\"proposal_delete\",{fee_paying_account:o||this.props.account.get(\"id\"),proposal:a.id,using_owner_authority:!1}),ot.a.process_transaction(r,null,!0)}else{var i={fee_paying_account:o,proposal:a.id,active_approvals_to_add:[],active_approvals_to_remove:[],owner_approvals_to_add:[],owner_approvals_to_remove:[],key_approvals_to_add:[],key_approvals_to_remove:[]},l=\"approve\"===this.props.action,c=[];[\"active\",\"owner\",\"key\"].forEach(function(e){var n=t.state[e];if(n){var s=-1!==a[\"available_\"+e+\"_approvals\"].indexOf(n);(l&&!s||!l&&s)&&(\"approve\"===t.props.action?(i[e+\"_approvals_to_add\"]=[n],\"key\"===e&&c.push(n)):\"reject\"===t.props.action&&(i[e+\"_approvals_to_remove\"]=[n],\"key\"===e&&c.push(n)))}});var u=Kt.a.new_transaction();u.add_type_operation(\"proposal_update\",i),ot.a.process_transaction(u,null,!0,c)}this.props.hideModal()}},{key:\"onChangePayee\",value:function(e){var t=q.ChainStore.getAccount(e);t&&this.setState({payee:t.get(\"id\")})}},{key:\"onCancel\",value:function(){this.props.hideModal()}},{key:\"render\",value:function(){var e=this.props,t=e.proposal,a=e.type,n=[],o={},i=\"approve\"===this.props.action;this.props.accounts.length&&this.props.accounts.forEach(function(e){(i?e&&!t.get(\"available_\"+a+\"_approvals\").includes(e.get(\"id\")):e&&t.get(\"available_\"+a+\"_approvals\").includes(e.get(\"id\")))&&(o[e.get(\"name\")]=e.get(\"id\"),n.push(e.get(\"name\")))});var l=[],c={};this.props.keys.length&&this.props.keys.forEach(function(e){var a=r.a.isMyKey(e),n=t.get(\"available_key_approvals\").includes(e);(a&&i&&!n||a&&!i&&n)&&(c[e]=!0,l.push(e))});var u=r.a.getMyAccounts(),p=[s.a.createElement(Y.Button,{key:\"submit\",type:\"primary\",onClick:this._onProposalAction.bind(this,t)},W.a.translate(\"proposal.\"+this.props.action)),s.a.createElement(Y.Button,{key:\"cancel\",onClick:this.onCancel.bind(this)},W.a.translate(\"account.perm.cancel\"))];return s.a.createElement(Y.Modal,{visible:this.props.visible,title:W.a.translate(\"modal.proposals.actions.\"+this.props.action),footer:p,onCancel:this.props.hideModal},s.a.createElement(\"div\",{className:\"grid-block vertical\"},s.a.createElement(\"form\",{className:\"grid-block vertical full-width-content\",style:{paddingTop:0}},s.a.createElement(\"div\",{className:\"grid-container\"},s.a.createElement(\"div\",{className:\"content-block\",style:{paddingRight:\"20%\"}},s.a.createElement(fn,{expanded:!0,proposal:t.get(\"id\"),type:a,added:i?this.state.key?this.state.key:this.state[a]||null:null,removed:i?null:this.state.key?this.state.key:this.state[a]||null,noFail:!0})),s.a.createElement(\"div\",{className:\"content-block full-width-content\"},s.a.createElement(\"div\",{className:\"full-width-content form-group\"},s.a.createElement(A.a,{content:\"modal.proposals.pay_with\",component:\"label\"}),s.a.createElement(Va.a,{account_names:u,onChange:this.onChangePayee.bind(this),selected:1===u.length?u:null})),\"delete\"!==this.props.action&&(n.length||l.length)?s.a.createElement(\"div\",{className:\"full-width-content form-group\"},s.a.createElement(A.a,{content:\"modal.proposals.approval_\"+(i?\"add\":\"remove\"),component:\"label\"}),s.a.createElement(Va.a,{account_names:n.concat(l),onChange:this.onActiveAccount.bind(this,o,c,a)})):null,null)))))}}]),t}();kn.propTypes={accounts:c.a.ChainAccountsList},kn=Object(u.a)(kn);var An=function(e){function t(){_n(this,t);var e=yn(this,(t.__proto__||Object.getPrototypeOf(t)).call(this));return e._updateState=e._updateState.bind(e),e}return En(t,s.a.Component),vn(t,[{key:\"componentWillMount\",value:function(){this._updateState(),q.ChainStore.subscribe(this._updateState)}},{key:\"componentWillUnmount\",value:function(){q.ChainStore.unsubscribe(this._updateState)}},{key:\"_updateState\",value:function(){var e=this.props,t=e.proposal,a=(e.account,t.get(\"required_active_approvals\").size?\"active\":\"owner\"),n=qa.listToIDs(t.get(\"required_\"+a+\"_approvals\")),s=qa.listToIDs(t.get(\"available_\"+a+\"_approvals\")),o=qa.listToIDs(t.get(\"available_key_approvals\"));this.setState({requiredPermissions:qa.unnest(n,a),available:s,availableKeys:o,type:a})}},{key:\"render\",value:function(){var e=this.props.action,t=this.state,a=t.requiredPermissions,n=t.available,o=t.availableKeys,r=t.type,i=wn(a,n,o),l=bn(i,2),c=l[0],u=l[1];return s.a.createElement(kn,gn({},this.props,{type:r,accounts:\"approve\"===e?c:n,keys:\"approve\"===e?u:o}))}}]),t}();An.propTypes={account:c.a.ChainAccount.isRequired,proposal:c.a.ChainObject.isRequired},An=Object(u.a)(An);var Cn=function(e){function t(){return _n(this,t),yn(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return En(t,s.a.Component),vn(t,[{key:\"render\",value:function(){return this.props.account&&this.props.proposal&&this.props.action?s.a.createElement(An,this.props):null}}]),t}(),xn=function(){return function(e,t){if(Array.isArray(e))return e;if(Symbol.iterator in Object(e))return function(e,t){var a=[],n=!0,s=!1,o=void 0;try{for(var r,i=e[Symbol.iterator]();!(n=(r=i.next()).done)&&(a.push(r.value),!t||a.length!==t);n=!0);}catch(e){s=!0,o=e}finally{try{!n&&i.return&&i.return()}finally{if(s)throw o}}return a}(e,t);throw new TypeError(\"Invalid attempt to destructure non-iterable instance\")}}(),On=function(){function e(e,t){for(var a=0;a<t.length;a++){var n=t[a];n.enumerable=n.enumerable||!1,n.configurable=!0,\"value\"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,a,n){return a&&e(t.prototype,a),n&&e(t,n),t}}();var Sn=function(e){function t(){!function(e,t){if(!(e instanceof t))throw new TypeError(\"Cannot call a class as a function\")}(this,t);var e=function(e,t){if(!e)throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\");return!t||\"object\"!=typeof t&&\"function\"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).call(this));return e.state={isModalVisible:!1,modal:{action:null,proposalId:null,accountId:null}},e._proposals=[],e._loading=!1,e.forceUpdate=e.forceUpdate.bind(e),e._isScam=e._isScam.bind(e),e._isUnknown=e._isUnknown.bind(e),e.showModal=e.showModal.bind(e),e.hideModal=e.hideModal.bind(e),e}return function(e,t){if(\"function\"!=typeof t&&null!==t)throw new TypeError(\"Super expression must either be null or a function, not \"+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,n[\"Component\"]),On(t,[{key:\"componentDidMount\",value:function(){q.ChainStore.subscribe(this.forceUpdate)}},{key:\"_setProposals\",value:function(){this._loading=!0;var e=this.props.account;if(e.get(\"proposals\").size){var t=[];e.get(\"proposals\").forEach(function(a){var n=q.ChainStore.getObject(a);if(n){var s=n.get(\"proposed_transaction\").get(\"operations\");t.push({operations:s,account:e,proposal:n})}}),(t=t.sort(function(e,t){return F.a.sortID(e.proposal.get(\"id\"),t.proposal.get(\"id\"),!0)})).forEach(function(e){var t=e.proposal.get(\"required_active_approvals\").size?\"active\":\"owner\",a=qa.listToIDs(e.proposal.get(\"required_\"+t+\"_approvals\"));e.requiredPermissions=qa.unnest(a,t)}),this._proposals=t,this._loading=!1}}},{key:\"componentWillUnmount\",value:function(){q.ChainStore.unsubscribe(this.forceUpdate)}},{key:\"showModal\",value:function(e){var t=e.action,a=e.proposalId,n=e.accountId;this.setState({isModalVisible:!0,modal:{action:t,proposalId:a,accountId:n}})}},{key:\"hideModal\",value:function(){this.setState({isModalVisible:!1,modal:{action:null,proposalId:null,accountId:null}})}},{key:\"_onApproveModal\",value:function(e,t,a){this.showModal({action:a,proposalId:e,accountId:t})}},{key:\"_canReject\",value:function(e){return e.available_active_approvals.length||e.available_owner_approvals.length||e.available_key_approvals.length}},{key:\"_isScam\",value:function(e){var t=this,a=!1,n=[];e.operations.forEach(function(e){6==e.get(0)?(n.push(e.getIn([1,\"active\",\"account_auths\",0,0])),n.push(e.getIn([1,\"owner\",\"account_auths\",0,0]))):n.push(e.getIn([1,\"to\"]))});var s=e.proposal.get(\"proposer\");return n.push(s),n.forEach(function(e){d.a.isKnownScammer(e)&&(a=!0),t.props.account.get(\"blacklisted_accounts\").some(function(t){return t===e})&&(a=!0)}),a}},{key:\"_isUnknown\",value:function(e){var t=this,a=!0,n=[];e.operations.forEach(function(e){6==e.get(0)?(n.push(e.getIn([1,\"active\",\"account_auths\",0,0])),n.push(e.getIn([1,\"owner\",\"account_auths\",0,0]))):n.push(e.getIn([1,\"to\"]))});var s=e.proposal.get(\"proposer\");return n.push(s),n.forEach(function(e){t.props.account.get(\"whitelisted_accounts\").some(function(t){return t===e})&&(a=!1),r.a.getState().starredAccounts.some(function(t){var a=q.ChainStore.getAccount(t,!1);return!!a&&a.get(\"id\")==e})&&(a=!1),r.a.getState().accountContacts.some(function(t){var a=q.ChainStore.getAccount(t,!1);return!!a&&a.get(\"id\")==e})&&(a=!1)}),a}},{key:\"render\",value:function(){var e=this,t=this.props.account;if(!t)return null;(t.get(\"proposals\").size>0&&0==this._proposals.length||this._proposals.length>0&&t!==this._proposals[0].account&&!this._loading)&&this._setProposals();var a=this._proposals.reduce(function(t,a,n){var o=a.proposal.get(\"id\"),i=a.proposal.get(\"proposer\"),l=a.proposal.get(\"expiration_time\"),c=a.operations.map(function(e,t){return s.a.createElement(La.b,{key:a.proposal.get(\"id\")+\"_operation_\"+t,expiration:l,index:t,op:e.toJS(),inverted:!1,hideFee:!0,hideOpLabel:!0,hideExpiration:!0,hideDate:!0,proposal:!0,id:o,proposer:i,collapsed:!1})}).toArray(),u=e._canReject(a.proposal.toJS()),p=a.proposal.get(\"id\"),d=a.proposal.get(\"required_active_approvals\").size?\"active\":\"owner\";t.push(s.a.createElement(\"tr\",{key:p+\"_id\"},s.a.createElement(\"td\",{colSpan:\"4\",className:\"proposal\"+(0===n?\" first\":\"\")},s.a.createElement(La.a,{id:o,expiration:l}))));var h=qa.listToIDs(a.proposal.get(\"available_\"+d+\"_approvals\")),m=qa.listToIDs(a.proposal.get(\"available_key_approvals\")),f=a.requiredPermissions,g=wn(f,h,m),b=xn(g,2),v=b[0],_=b[1],y=[];v.length&&v.forEach(function(e){e&&!a.proposal.get(\"available_\"+d+\"_approvals\").includes(e)&&y.push(e)});var E=[];_.length&&_.forEach(function(e){r.a.isMyKey(e)&&!a.proposal.get(\"available_key_approvals\").includes(e)&&E.push(e)});var w=y.length+E.length>0,k=e._isScam(a),C=e._isUnknown(a);return t.push(s.a.createElement(\"tr\",{className:\"top-left-align\",key:p+\"_content\"},s.a.createElement(\"td\",null,c),s.a.createElement(\"td\",null,f.map(function(e,t){return s.a.createElement(\"div\",{className:\"list-item\",key:p+\"_approver_\"+t},s.a.createElement(ce.a,{subpage:\"permissions\",account:e.id}))})),s.a.createElement(\"td\",null,s.a.createElement(fn,{proposal:a.proposal.get(\"id\"),type:d})),s.a.createElement(\"td\",{className:\"approval-buttons\"},k&&s.a.createElement(Y.Tooltip,{title:W.a.translate(\"tooltip.propose_scam\")},s.a.createElement(\"div\",{className:\"tooltip has-error scam-error\"},\"SCAM ATTEMPT\")),e.props.hideFishingProposals&&!k&&C&&s.a.createElement(Y.Tooltip,{title:W.a.translate(\"tooltip.propose_unknown\")},s.a.createElement(\"div\",{className:\"tooltip has-error scam-error\"},\"UNKNOWN SOURCE\")),!k&&(!C||!e.props.hideFishingProposals)&&s.a.createElement(\"button\",{onClick:w?e._onApproveModal.bind(e,p,a.account.get(\"id\"),\"approve\"):function(){},className:\"button primary hollow\"+(w?\"\":\" hidden\")},s.a.createElement(\"span\",null,s.a.createElement(A.a,{content:\"proposal.approve\"}))),u?s.a.createElement(\"button\",{onClick:e._onApproveModal.bind(e,p,a.account.get(\"id\"),\"reject\"),className:\"button primary hollow\"},s.a.createElement(A.a,{content:\"proposal.reject\"})):null,s.a.createElement(\"button\",{onClick:e._onApproveModal.bind(e,p,a.account.get(\"id\"),\"delete\"),className:\"button primary hollow\"},s.a.createElement(A.a,{content:\"proposal.delete\"}))))),t.push(s.a.createElement(\"tr\",{key:p+\"_separator\"},s.a.createElement(\"td\",{colSpan:\"4\"},s.a.createElement(\"hr\",null)))),t},[]);return s.a.createElement(\"div\",null,s.a.createElement(\"table\",{className:\"table proposals compact \"+this.props.className},s.a.createElement(\"thead\",null,s.a.createElement(\"tr\",null,s.a.createElement(\"th\",null,s.a.createElement(A.a,{content:\"proposal.proposals\"})),s.a.createElement(\"th\",null,s.a.createElement(A.a,{content:\"proposal.approvers\"})),s.a.createElement(\"th\",null,s.a.createElement(A.a,{content:\"proposal.status\"})),s.a.createElement(\"th\",null,s.a.createElement(A.a,{content:\"proposal.action\"})))),s.a.createElement(\"tbody\",null,a)),s.a.createElement(Cn,{ref:\"modal\",visible:this.state.isModalVisible,hideModal:this.hideModal,showModal:this.showModal,account:this.state&&this.state.modal.accountId,proposal:this.state&&this.state.modal.proposalId,action:this.state&&this.state.modal.action}))}}]),t}();Sn.propTypes={account:c.a.ChainAccount.isRequired};var Pn=Object(u.a)(Sn),Nn=a(93),jn=a(37),Mn=a(54),In=a(586),Tn=a(1990),Rn=function(){function e(e,t){for(var a=0;a<t.length;a++){var n=t[a];n.enumerable=n.enumerable||!1,n.configurable=!0,\"value\"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,a,n){return a&&e(t.prototype,a),n&&e(t,n),t}}();function Bn(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}var Dn=function(e){function t(e){!function(e,t){if(!(e instanceof t))throw new TypeError(\"Cannot call a class as a function\")}(this,t);var a=function(e,t){if(!e)throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\");return!t||\"object\"!=typeof t&&\"function\"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return a.state={selectedOrders:[],filterValue:\"\"},a}return function(e,t){if(\"function\"!=typeof t&&null!==t)throw new TypeError(\"Super expression must either be null or a function, not \"+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,s.a.Component),Rn(t,[{key:\"componentDidMount\",value:function(){var e=document.getElementById(\"cancelAllOrders\");e&&e.addEventListener(\"click\",function(){var e=this._getFilteredOrders.call(this);e=e.toJS?e.toJS():e,this.setState({selectedOrders:e}),document.querySelectorAll(\".orderCancel\").forEach(function(e){e.checked||(e.checked=!0)})}.bind(this))}},{key:\"_getFilteredOrders\",value:function(){var e=this.state.filterValue;return(this.props.account.get(\"orders\")||[]).filter(function(t){var a=q.ChainStore.getObject(t).toJS(),n=q.ChainStore.getAsset(a.sell_price.base.asset_id),s=q.ChainStore.getAsset(a.sell_price.quote.asset_id),o=n.get(\"symbol\").toLowerCase(),r=s.get(\"symbol\").toLowerCase();return o.indexOf(e)>-1||r.indexOf(e)>-1})}},{key:\"_cancelLimitOrder\",value:function(e,t){t.preventDefault(),Nn.a.cancelLimitOrder(this.props.account.get(\"id\"),e,!1).catch(function(e){console.log(\"cancel order error:\",e)})}},{key:\"_cancelLimitOrders\",value:function(e){var t=this;Nn.a.cancelLimitOrders(this.props.account.get(\"id\"),this.state.selectedOrders).then(function(){t.resetSelected()}).catch(function(e){console.log(\"cancel orders error:\",e)})}},{key:\"onFlip\",value:function(e){var t={};t[e]=!this.props.marketDirections.get(e),de.a.changeMarketDirection(t)}},{key:\"onCheckCancel\",value:function(e,t){var a=this.state.selectedOrders;if(t.target.checked)this.setState({selectedOrders:a.concat([e])});else{var n=a.indexOf(e);n>-1&&this.setState({selectedOrders:a.slice(0,n).concat(a.slice(n+1))})}}},{key:\"setFilterValue\",value:function(e){this.setState({filterValue:e.target.value.toLowerCase()})}},{key:\"resetSelected\",value:function(){this.setState({selectedOrders:[]}),document.querySelectorAll(\".orderCancel\").forEach(function(e){e.checked&&(e.checked=!1)})}},{key:\"cancelSelected\",value:function(){this._cancelLimitOrders.call(this)}},{key:\"getHeader\",value:function(){var e=this.props.isMyAccount;return[e?{title:s.a.createElement(A.a,{content:\"wallet.cancel\"}),dataIndex:\"cancel\",render:function(t){return e?s.a.createElement(\"span\",{style:{whiteSpace:\"nowrap\",cursor:\"pointer\"}},t):null}}:{},{title:s.a.createElement(A.a,{content:\"account.trade\"}),dataIndex:\"trade\",render:function(e){return s.a.createElement(\"span\",{style:{whiteSpace:\"nowrap\"}},e)}},{title:s.a.createElement(A.a,{content:\"transaction.order_id\"}),dataIndex:\"order_id\",align:\"left\",render:function(e){return s.a.createElement(\"span\",{style:{whiteSpace:\"nowrap\"}},e)}},{title:s.a.createElement(A.a,{content:\"exchange.description\"}),dataIndex:\"description\",align:\"left\",width:\"30%\",render:function(e){return s.a.createElement(\"span\",{style:{whiteSpace:\"nowrap\"}},e)}},{title:s.a.createElement(A.a,{content:\"exchange.price\"}),dataIndex:\"price\",align:\"left\",render:function(e){return s.a.createElement(\"span\",{style:{whiteSpace:\"nowrap\"}},e)}},{title:s.a.createElement(A.a,{content:\"exchange.price_market\"}),dataIndex:\"price_market\",align:\"left\",render:function(e){return s.a.createElement(\"span\",{style:{whiteSpace:\"nowrap\"}},e)}},{title:s.a.createElement(A.a,{content:\"exchange.value\"}),dataIndex:\"value\",align:\"right\",render:function(e){return s.a.createElement(\"span\",{style:{whiteSpace:\"nowrap\"}},e)}}]}},{key:\"render\",value:function(){var e=this,t=this.props,a=t.account,n=t.marketDirections,o=this.state,r=o.filterValue,i=o.selectedOrders,l={},c={};if(!a.get(\"orders\"))return null;var u=a.get(\"orders\"),p=u.size;r&&(u=this._getFilteredOrders.call(this)),u.forEach(function(t){var a=q.ChainStore.getObject(t).toJS(),o=q.ChainStore.getAsset(a.sell_price.base.asset_id),r=q.ChainStore.getAsset(a.sell_price.quote.asset_id),i=e.props.settings;if(o&&r){var u,p=(Bn(u={},o.get(\"id\"),{precision:o.get(\"precision\")}),Bn(u,r.get(\"id\"),{precision:r.get(\"precision\")}),u),d=Mn.a.getMarketName(o,r).marketName,h=n.get(d);l[d]||(l[d]=h?{base:{id:o.get(\"id\"),symbol:o.get(\"symbol\"),precision:o.get(\"precision\")},quote:{id:r.get(\"id\"),symbol:r.get(\"symbol\"),precision:r.get(\"precision\")}}:{base:{id:r.get(\"id\"),symbol:r.get(\"symbol\"),precision:r.get(\"precision\")},quote:{id:o.get(\"id\"),symbol:o.get(\"symbol\"),precision:o.get(\"precision\")}});var m=new jn.g(a,p,l[d].quote.id),f=q.ChainStore.getAsset(l[d].base.id),g=q.ChainStore.getAsset(l[d].quote.id);c[d]||(c[d]=[]);var b=m.isBid(),v=m.isCall(),_=i?i.get(\"unit\"):\"1.3.0\",y=b?\"value positive\":\"value negative\",E=b?\"value negative\":\"value positive\";c[d].push({key:m.id,cancel:v?null:s.a.createElement(\"span\",{style:{marginRight:0},className:\"order-cancel\"},s.a.createElement(\"input\",{type:\"checkbox\",className:\"orderCancel\",onChange:e.onCheckCancel.bind(e,m.id)})),trade:s.a.createElement(w.a,{to:\"/market/\"+g.get(\"symbol\")+\"_\"+f.get(\"symbol\")},s.a.createElement(Y.Icon,{type:\"bar-chart\",name:\"trade\",title:\"icons.trade.trade\",className:\"icon-14px\"})),order_id:s.a.createElement(\"span\",null,\"#\",m.id.substring(4)),description:s.a.createElement(\"div\",{onClick:e.onFlip.bind(e,d)},b?s.a.createElement(A.a,{content:\"exchange.buy_description\",baseAsset:F.a.format_number(m[b?\"amountToReceive\":\"amountForSale\"]().getAmount({real:!0}),f.get(\"precision\"),!1),quoteAsset:F.a.format_number(m[b?\"amountForSale\":\"amountToReceive\"]().getAmount({real:!0}),g.get(\"precision\"),!1),baseName:s.a.createElement(ma.a,{noTip:!0,customClass:y,name:g.get(\"symbol\")}),quoteName:s.a.createElement(ma.a,{noTip:!0,customClass:E,name:f.get(\"symbol\")})}):s.a.createElement(A.a,{content:\"exchange.sell_description\",baseAsset:F.a.format_number(m[b?\"amountToReceive\":\"amountForSale\"]().getAmount({real:!0}),f.get(\"precision\"),!1),quoteAsset:F.a.format_number(m[b?\"amountForSale\":\"amountToReceive\"]().getAmount({real:!0}),g.get(\"precision\"),!1),baseName:s.a.createElement(ma.a,{noTip:!0,customClass:y,name:g.get(\"symbol\")}),quoteName:s.a.createElement(ma.a,{noTip:!0,customClass:E,name:f.get(\"symbol\")})})),price:s.a.createElement(\"div\",{onClick:e.onFlip.bind(e,d)},s.a.createElement(le.a,{base_amount:m.sellPrice().base.amount,base_asset:m.sellPrice().base.asset_id,quote_amount:m.sellPrice().quote.amount,quote_asset:m.sellPrice().quote.asset_id,force_direction:f.get(\"symbol\"),hide_symbols:!0})),price_market:s.a.createElement(\"div\",{onClick:e.onFlip.bind(e,d)},s.a.createElement(Tn.a,{base:f.get(\"id\"),quote:g.get(\"id\"),force_direction:f.get(\"symbol\"),hide_symbols:!0,hide_asset:!0})),value:s.a.createElement(\"div\",{onClick:e.onFlip.bind(e,d)},s.a.createElement(ea.b,{hide_asset:!0,amount:m.amountForSale().getAmount(),fromAsset:m.amountForSale().asset_id,noDecimals:!0,toAsset:_}),\" \",s.a.createElement(ma.a,{name:_}))})}});var d=[];for(var h in c)c[h].length&&(d=d.concat(c[h].sort(function(e,t){return e.price-t.price})));return s.a.createElement(\"div\",{className:\"grid-content no-overflow no-padding\",style:{paddingBottom:15}},s.a.createElement(\"div\",{className:\"header-selector\"},u&&p?s.a.createElement(\"div\",{className:\"filter inline-block\"},s.a.createElement(Y.Input,{type:\"text\",placeholder:W.a.translate(\"account.filter_orders\"),onChange:this.setFilterValue.bind(this),addonAfter:s.a.createElement(Y.Icon,{type:\"search\"})})):null,i.length?s.a.createElement(\"button\",{className:\"button\",onClick:this.resetSelected.bind(this)},s.a.createElement(A.a,{content:\"account.reset_orders\"})):null,i.length?s.a.createElement(\"button\",{className:\"button\",onClick:this.cancelSelected.bind(this)},s.a.createElement(A.a,{content:\"account.submit_orders\"})):null),s.a.createElement(In.a,{pageSize:20,className:\"table table-striped dashboard-table table-hover\",header:this.getHeader(),rows:d,extraRow:this.props.children}))}}]),t}(),Ln=Dn=Object(p.a)(Dn,{listenTo:function(){return[i.a]},getProps:function(){return{marketDirections:i.a.getState().marketDirections}}}),Vn={},Fn=6e4;var qn=a(766),Un=a(1991),Wn=a.n(Un),zn=a(2123),Jn=a.n(zn),Kn=a(2124),Gn=a.n(Kn),Zn=a(111),Hn=a(186),Qn=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var n in a)Object.prototype.hasOwnProperty.call(a,n)&&(e[n]=a[n])}return e},Yn=function(){function e(e,t){for(var a=0;a<t.length;a++){var n=t[a];n.enumerable=n.enumerable||!1,n.configurable=!0,\"value\"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,a,n){return a&&e(t.prototype,a),n&&e(t,n),t}}();function Xn(e,t){if(!(e instanceof t))throw new TypeError(\"Cannot call a class as a function\")}function $n(e,t){if(!e)throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\");return!t||\"object\"!=typeof t&&\"function\"!=typeof t?e:t}function es(e,t){if(\"function\"!=typeof t&&null!==t)throw new TypeError(\"Super expression must either be null or a function, not \"+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Jn()(Wn.a.Highcharts),Gn()(Wn.a.Highcharts);var ts=function(e){function t(){return Xn(this,t),$n(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return es(t,s.a.Component),Yn(t,[{key:\"render\",value:function(){var e=this.props,t=e.balanceObjects,a=e.core_asset,n=e.marketStats,o=e.preferredAsset,r=e.history,i=null;if(t&&t.length>0){var l=0;i=t.forEach(function(e){if(e){var t=\"string\"==typeof e?q.ChainStore.getObject(e):e,s=t.get(\"asset_type\"),r=q.ChainStore.getAsset(s);if(r&&o){var i=Number(t.get(\"balance\")),c=Mn.a.convertValue(i,o,r,n,a);if(c){var u=F.a.get_asset_precision(o.get(\"precision\"));l+=c/u}}}}),i=t.map(function(e,t){if(!e)return null;var s=\"string\"==typeof e?q.ChainStore.getObject(e):e,r=s.get(\"asset_type\"),i=q.ChainStore.getAsset(r);if(!i)return null;var c=Number(s.get(\"balance\")),u=Mn.a.convertValue(c,o,i,n,a);if(!u)return null;var p=u/F.a.get_asset_precision(o.get(\"precision\")),d=p/l*100;if(d<.5)return null;if(p<1)return null;var h=i.get(\"symbol\");return{symbol:h,name:h+\" (\"+(0===l?0:d.toFixed(2))+\"%)\",value:p,color:Wn.a.Highcharts.getOptions().colors[t]}}).filter(function(e){return!!e})}i&&1===i.length&&0===i[0].value&&(i=null);var c={chart:{backgroundColor:\"rgba(255, 0, 0, 0)\",height:250,spacingLeft:0,spacingRight:0,spacingBottom:0},credits:{enabled:!1},legend:{enabled:!1},plotOptions:{treemap:{animation:!1,tooltip:{pointFormatter:function(){return\"<b>\"+this.name+\"</b>: \"+Wn.a.Highcharts.numberFormat(this.value,0)+\" \"+o.get(\"symbol\")}}},series:{cursor:\"pointer\",point:{events:{click:function(){var e=\"/asset/\"+this.symbol;r.push(e)}}}}},series:[{type:\"treemap\",levels:[{level:1,layoutAlgorithm:\"sliceAndDice\",dataLabels:{enabled:!0,align:\"center\",verticalAlign:\"middle\"}}],data:i}],title:{text:null}};return s.a.createElement(\"div\",{className:\"account-treemap\"},s.a.createElement(\"div\",{className:\"account-treemap--legend\"},i.map(function(e,t){var a=e.name,n=e.symbol,o=e.color;return s.a.createElement(w.a,{key:t,to:\"/asset/\"+n},s.a.createElement(\"div\",{className:\"legend-item\"},s.a.createElement(\"div\",{className:\"legend-square\",style:{backgroundColor:o}}),a))})),s.a.createElement(Wn.a,{config:c}))}}]),t}();ts.propTypes={assets:c.a.ChainAssetsList,preferredAsset:c.a.ChainAsset.isRequired},ts.defaultProps={assets:[],preferredAsset:\"1.3.0\"},ts=Object(u.a)(ts);var as=function(e){function t(){return Xn(this,t),$n(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return es(t,s.a.Component),Yn(t,[{key:\"render\",value:function(){var e=this.props.balanceObjects.filter(function(e){return!!e}).map(function(e){return e.get(\"asset_type\")});return s.a.createElement(ts,Qn({preferredAsset:this.props.settings.get(\"unit\",\"1.3.0\"),assets:e},this.props))}}]),t}();as.propTypes={balanceObjects:c.a.ChainObjectsList,core_asset:c.a.ChainAsset.isRequired},as.defaultProps={balanceObjects:[],core_asset:\"1.3.0\"},as=Object(u.a)(as);var ns=function(e){function t(){return Xn(this,t),$n(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return es(t,s.a.Component),Yn(t,[{key:\"render\",value:function(){return s.a.createElement(Zn.a,{stores:[i.a,Hn.a],inject:{marketStats:function(){return Hn.a.getState().allMarketStats},settings:function(){return i.a.getState().settings}}},s.a.createElement(as,Qn({},this.props,{ref:this.props.refCallback})))}}]),t}(),ss=Object(ye.a)(ns),os=a(1982),rs=a.n(os),is=a(366),ls=a(107),cs=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var n in a)Object.prototype.hasOwnProperty.call(a,n)&&(e[n]=a[n])}return e},us=function(){function e(e,t){for(var a=0;a<t.length;a++){var n=t[a];n.enumerable=n.enumerable||!1,n.configurable=!0,\"value\"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,a,n){return a&&e(t.prototype,a),n&&e(t,n),t}}();function ps(e,t){if(!(e instanceof t))throw new TypeError(\"Cannot call a class as a function\")}function ds(e,t){if(!e)throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\");return!t||\"object\"!=typeof t&&\"function\"!=typeof t?e:t}function hs(e,t){if(\"function\"!=typeof t&&null!==t)throw new TypeError(\"Super expression must either be null or a function, not \"+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var ms=function(e){function t(e){return ps(this,t),ds(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e))}return hs(t,Tn[\"b\"]),us(t,[{key:\"shouldComponentUpdate\",value:function(e){return function e(t,a,n){null===t&&(t=Function.prototype);var s=Object.getOwnPropertyDescriptor(t,a);if(void 0===s){var o=Object.getPrototypeOf(t);return null===o?void 0:e(o,a,n)}if(\"value\"in s)return s.value;var r=s.get;return void 0!==r?r.call(n):void 0}(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),\"shouldComponentUpdate\",this).call(this,e)||e.base!==this.props.base}},{key:\"getValue\",value:function(){var e=this.props.marketStats;return e&&e.change?e.change:0}},{key:\"render\",value:function(){var e=this.getValue(),t=0===parseFloat(e)?\"\":parseFloat(e)<0?\"change-down\":\"change-up\",a=s.a.createElement(ls.b,{style:\"decimal\",value:e,minimumFractionDigits:2,maximumFractionDigits:2});return isNaN(parseFloat(e))?s.a.createElement(\"span\",{className:\"value \"+t},\"-\"):s.a.createElement(\"span\",{className:\"value \"+t},a,\"%\")}}]),t}();ms.defaultProps={fullPrecision:!1,noDecimals:!1,hide_asset:!1},ms=Object(j.a)(ms,{propNames:[\"quote\",\"base\"],defaultProps:{quote:\"1.3.0\"}});var fs=function(e){function t(){return ps(this,t),ds(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return hs(t,s.a.Component),us(t,[{key:\"render\",value:function(){var e=this.props,t=e.refCallback,a=function(e,t){var a={};for(var n in e)t.indexOf(n)>=0||Object.prototype.hasOwnProperty.call(e,n)&&(a[n]=e[n]);return a}(e,[\"refCallback\"]);return s.a.createElement(ms,cs({},a,{ref:t}))}}]),t}();fs=Object(p.a)(fs,{listenTo:function(){return[Hn.a]},getProps:function(e){return{marketStats:Hn.a.getState().allMarketStats.get(e.marketId),allMarketStats:Hn.a.getState().allMarketStats}}});var gs=a(580),bs=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var n in a)Object.prototype.hasOwnProperty.call(a,n)&&(e[n]=a[n])}return e},vs=function(){function e(e,t){for(var a=0;a<t.length;a++){var n=t[a];n.enumerable=n.enumerable||!1,n.configurable=!0,\"value\"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,a,n){return a&&e(t.prototype,a),n&&e(t,n),t}}();function _s(e,t){if(!(e instanceof t))throw new TypeError(\"Cannot call a class as a function\")}function ys(e,t){if(!e)throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\");return!t||\"object\"!=typeof t&&\"function\"!=typeof t?e:t}function Es(e,t){if(\"function\"!=typeof t&&null!==t)throw new TypeError(\"Super expression must either be null or a function, not \"+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var ws=function(e){function t(){return _s(this,t),ys(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return Es(t,gs[\"a\"]),vs(t,[{key:\"shouldComponentUpdate\",value:function(e,a){return function e(t,a,n){null===t&&(t=Function.prototype);var s=Object.getOwnPropertyDescriptor(t,a);if(void 0===s){var o=Object.getPrototypeOf(t);return null===o?void 0:e(o,a,n)}if(\"value\"in s)return s.value;var r=s.get;return void 0!==r?r.call(n):void 0}(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),\"shouldComponentUpdate\",this).call(this,e)||e.base_amount!==this.props.base_amount||e.quote_amount!==this.props.quote_amount||e.decimals!==this.props.decimals||!F.a.are_equal_shallow(e.pulsate,this.props.pulsate)||!F.a.are_equal_shallow(a,this.state)}},{key:\"getFinalPrice\",value:function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0],t=this.props,a=t.coreAsset,n=t.fromAsset,s=t.toAsset,o=t.allMarketStats;return Mn.a.getFinalPrice(a,n,s,o,e)}},{key:\"render\",value:function(){var e=this.props,t=e.toAsset,a=e.forceDirection,n=function(e,t){var a={};for(var n in e)t.indexOf(n)>=0||Object.prototype.hasOwnProperty.call(e,n)&&(a[n]=e[n]);return a}(e,[\"toAsset\",\"forceDirection\"]),o=this.getFinalPrice();return 1===o?s.a.createElement(\"span\",null,\"1.00\"):o?s.a.createElement(le.a,bs({force_direction:!!a&&t.get(\"symbol\"),base_amount:o.base.amount,base_asset:o.base.asset_id,quote_amount:o.quote.amount,quote_asset:o.quote.asset_id},n)):s.a.createElement(\"span\",null,\"--\")}}]),t}();ws.defaultProps={forceDirection:!0},ws=Object(j.a)(ws,{propNames:[\"toAsset\",\"fromAsset\",\"coreAsset\"],defaultProps:{toAsset:\"1.3.0\",coreAsset:\"1.3.0\"}});var ks=function(e){function t(){return _s(this,t),ys(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return Es(t,s.a.Component),vs(t,[{key:\"render\",value:function(){var e=this;return s.a.createElement(Zn.a,{stores:[i.a,Hn.a],inject:{toAsset:function(){return e.props.toAsset||i.a.getState().settings.get(\"unit\",\"1.3.0\")},allMarketStats:function(){return Hn.a.getState().allMarketStats}}},s.a.createElement(ws,bs({},this.props,{ref:this.props.refCallback})))}}]),t}(),As=a(134),Cs=a(195),xs=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var n in a)Object.prototype.hasOwnProperty.call(a,n)&&(e[n]=a[n])}return e},Os=function(){function e(e,t){for(var a=0;a<t.length;a++){var n=t[a];n.enumerable=n.enumerable||!1,n.configurable=!0,\"value\"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,a,n){return a&&e(t.prototype,a),n&&e(t,n),t}}();function Ss(e,t){if(!e)throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\");return!t||\"object\"!=typeof t&&\"function\"!=typeof t?e:t}var Ps=function(e){function t(){var e,a,n;!function(e,t){if(!(e instanceof t))throw new TypeError(\"Cannot call a class as a function\")}(this,t);for(var s=arguments.length,o=Array(s),r=0;r<s;r++)o[r]=arguments[r];return a=n=Ss(this,(e=t.__proto__||Object.getPrototypeOf(t)).call.apply(e,[this].concat(o))),n.tick=function(){var e=n.props,t=e.onIcon,a=e.offIcon,s=(n.state||{}).name,o=void 0===s?t:s;n.setState({name:o===t?a:t})},Ss(n,a)}return function(e,t){if(\"function\"!=typeof t&&null!==t)throw new TypeError(\"Super expression must either be null or a function, not \"+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,n[\"Component\"]),Os(t,[{key:\"componentDidMount\",value:function(){var e=this.props.duration;this.interval=setInterval(this.tick,e)}},{key:\"componentWillUnmount\",value:function(){this.interval&&clearInterval(this.interval)}},{key:\"render\",value:function(){var e=this.props,t=e.onIcon,a=e.rest,n=(this.state||{}).name,o=void 0===n?t:n,r=this.props.title;return s.a.createElement(I.a,xs({name:o,title:r},a))}}]),t}();Ps.propTypes={duration:E.a.number.isRequired,offIcon:E.a.string.isRequired,onIcon:E.a.string.isRequired,title:E.a.string.isRequired};var Ns=Ps,js=a(596),Ms=a(2017),Is=a(601),Ts=a(2003),Rs=a(597),Bs=a(338),Ds=function(){function e(e,t){for(var a=0;a<t.length;a++){var n=t[a];n.enumerable=n.enumerable||!1,n.configurable=!0,\"value\"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,a,n){return a&&e(t.prototype,a),n&&e(t,n),t}}();var Ls=function(e){function t(e){!function(e,t){if(!(e instanceof t))throw new TypeError(\"Cannot call a class as a function\")}(this,t);var a=function(e,t){if(!e)throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\");return!t||\"object\"!=typeof t&&\"function\"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return a.state=a.getInitialState(e),a.onSubmit=a.onSubmit.bind(a),a}return function(e,t){if(\"function\"!=typeof t&&null!==t)throw new TypeError(\"Super expression must either be null or a function, not \"+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,s.a.Component),Ds(t,[{key:\"componentWillReceiveProps\",value:function(e){e.asset&&this.props.asset&&e.asset.get(\"id\")!==this.props.asset.get(\"id\")&&this.setState(this.getInitialState(e))}},{key:\"getInitialState\",value:function(e){return{amount:0,amountAsset:new jn.a({amount:0,asset_id:e.asset.get(\"id\"),precision:e.asset.get(\"precision\")})}}},{key:\"onAmountChanged\",value:function(e){var t=e.amount,a=e.asset;this.state.amountAsset.setAmount({real:t}),this.setState({amount:t,asset:a})}},{key:\"onSubmit\",value:function(){var e=this;C.a.reserveAsset(this.state.amountAsset.getAmount(),this.props.asset.get(\"id\"),this.props.account.get(\"id\")).then(function(){e.state.amountAsset.setAmount({sats:0}),e.setState({amount:0})}),this.props.hideModal()}},{key:\"render\",value:function(){var e=this,t=this.props.asset.get(\"id\"),a=this.props.account&&this.props.account.get(\"balances\",[]).size&&this.props.account.getIn([\"balances\",t])?q.ChainStore.getObject(this.props.account.getIn([\"balances\",t])):null;return a?s.a.createElement(Y.Modal,{visible:this.props.visible,onCancel:this.props.hideModal,title:W.a.translate(\"modal.reserve.title\"),footer:[s.a.createElement(Y.Button,{type:\"primary\",key:\"submit\",onClick:this.onSubmit},W.a.translate(\"modal.reserve.submit\")),s.a.createElement(Y.Button,{onClick:this.props.hideModal,key:\"cancel\"},W.a.translate(\"cancel\"))]},s.a.createElement(Y.Alert,{message:W.a.translate(\"modal.reserve.warning_message\"),type:\"warning\",showIcon:!0,style:{marginBottom:\"2em\"}}),s.a.createElement(Y.Form,{layout:\"vertical\"},s.a.createElement(Bs.a,{label:\"modal.reserve.amount\",amount:this.state.amount,onChange:this.onAmountChanged.bind(this),asset:t,assets:[t],display_balance:s.a.createElement(\"div\",{onClick:function(){e.state.amountAsset.setAmount({sats:a.get(\"balance\")}),e.setState({amount:e.state.amountAsset.getAmount({real:!0})})}},s.a.createElement(is.a,{balance:this.props.account.getIn([\"balances\",t])})),tabIndex:1}))):null}}]),t}(),Vs=Ls=Object(j.a)(Ls,{propNames:[\"asset\"]}),Fs=function(){function e(e,t){for(var a=0;a<t.length;a++){var n=t[a];n.enumerable=n.enumerable||!1,n.configurable=!0,\"value\"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,a,n){return a&&e(t.prototype,a),n&&e(t,n),t}}();function qs(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}var Us=function(e){function t(e){!function(e,t){if(!(e instanceof t))throw new TypeError(\"Cannot call a class as a function\")}(this,t);var a=function(e,t){if(!e)throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\");return!t||\"object\"!=typeof t&&\"function\"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).call(this));for(var n in a.sortFunctions={qty:function(e,t,a){return Number(this.qtyRefs[e.key])<Number(this.qtyRefs[t.key])?this.state.portfolioSortDirection||a?-1:1:Number(this.qtyRefs[e.key])>Number(this.qtyRefs[t.key])?this.state.portfolioSortDirection||a?1:-1:void 0},alphabetic:function(e,t,a){return e.key>t.key?this.state.portfolioSortDirection||a?1:-1:e.key<t.key?this.state.portfolioSortDirection||a?-1:1:0},priceValue:function(e,t){var a=this.priceRefs[e.key],n=this.priceRefs[t.key];return a&&n?this.props.sortDirection?a-n:n-a:null===a&&null!==n?1:null!==a&&null===n?-1:this.sortFunctions.alphabetic(e,t,!0)},totalValue:function(e,t){var a=this.valueRefs[e.key],n=this.valueRefs[t.key];return a&&n?this.props.sortDirection?a-n:n-a:!a&&n?1:a&&!n?-1:this.sortFunctions.alphabetic(e,t,!0)},changeValue:function(e,t){var a=this.changeRefs[e.key],n=this.changeRefs[t.key];if(a&&n){var s=\"NaN\"!=parseFloat(a)?parseFloat(a):a,o=\"NaN\"!=parseFloat(n)?parseFloat(n):n;return void 0===this.state.portfolioSortDirection||this.state.portfolioSortDirection?s-o:o-s}}},a._renderBuy=function(e,t,n,o,r){if(\"BTS\"===e&&r<=1e6)return s.a.createElement(\"span\",null,s.a.createElement(\"a\",{onClick:a._showDepositWithdraw.bind(a,\"bridge_modal\",n,!1)},s.a.createElement(Ns,{onIcon:\"dollar\",offIcon:\"dollar-green\",title:\"icons.dollar.buy\",duration:1e3,className:\"icon-14px\"})));var i=a._showDepositWithdraw.bind(a,\"bridge_modal\",n,!1),l=s.a.createElement(\"span\",null,s.a.createElement(I.a,{style:{cursor:a.props.isMyAccount?\"pointer\":\"help\"},name:\"dollar\",title:\"icons.dollar.buy\",className:\"icon-14px\",onClick:a.props.isMyAccount?i:null}));return t&&a.props.isMyAccount?l:t&&!a.props.isMyAccount?s.a.createElement(Y.Tooltip,{title:W.a.translate(\"tooltip.login_required\")},l):o},a._renderGatewayAction=function(e,t,n,o){var r=\"deposit\"==e?a._showDepositModal.bind(a,n):a._showDepositWithdraw.bind(a,\"withdraw_modal_new\",n,!1),i=\"deposit\"==e?\"icons.\"+e+\".\"+e:\"icons.\"+e,l=s.a.createElement(\"span\",null,s.a.createElement(I.a,{style:{cursor:a.props.isMyAccount?\"pointer\":\"help\"},name:e,title:i,className:\"icon-14x\",onClick:a.props.isMyAccount?r:null}));return t&&a.props.isMyAccount?l:t&&!a.props.isMyAccount?s.a.createElement(Y.Tooltip,{title:W.a.translate(\"tooltip.login_required\")},l):o},a.state={isBridgeModalVisible:!1,isSettleModalVisible:!1,isBorrowModalVisible:!1,isDepositModalVisible:!1,isWithdrawModalVisible:!1,isBurnModalVisible:!1,isBridgeModalVisibleBefore:!1,isSettleModalVisibleBefore:!1,isBorrowModalVisibleBefore:!1,isDepositModalVisibleBefore:!1,isWithdrawModalVisibleBefore:!1,isBurnModalVisibleBefore:!1,borrow:null,settleAsset:\"1.3.0\",depositAsset:null,withdrawAsset:null,bridgeAsset:null,allRefsAssigned:!1,portfolioSort:e.viewSettings.get(\"portfolioSort\",\"value\"),portfolioSortDirection:e.viewSettings.get(\"portfolioSortDirection\",\"ascend\")},a.qtyRefs={},a.priceRefs={},a.valueRefs={},a.changeRefs={},a.sortFunctions)a.sortFunctions[n]=a.sortFunctions[n].bind(a);return a._checkRefAssignments=a._checkRefAssignments.bind(a),a.showSettleModal=a.showSettleModal.bind(a),a.hideSettleModal=a.hideSettleModal.bind(a),a.showDepositModal=a.showDepositModal.bind(a),a.hideDepositModal=a.hideDepositModal.bind(a),a.showWithdrawModal=a.showWithdrawModal.bind(a),a.hideWithdrawModal=a.hideWithdrawModal.bind(a),a.showBorrowModal=a.showBorrowModal.bind(a),a.hideBorrowModal=a.hideBorrowModal.bind(a),a.showBurnModal=a.showBurnModal.bind(a),a.hideBurnModal=a.hideBurnModal.bind(a),a.showBridgeModal=a.showBridgeModal.bind(a),a.hideBridgeModal=a.hideBridgeModal.bind(a),a.toggleSortOrder=a.toggleSortOrder.bind(a),a}return function(e,t){if(\"function\"!=typeof t&&null!==t)throw new TypeError(\"Super expression must either be null or a function, not \"+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,s.a.Component),Fs(t,[{key:\"componentWillMount\",value:function(){this.refCheckInterval=setInterval(this._checkRefAssignments)}},{key:\"componentWillUnmount\",value:function(){clearInterval(this.refCheckInterval)}},{key:\"_checkRefAssignments\",value:function(){var e=this;if(!this.state.allRefsAssigned){var t=[\"qtyRefs\",\"priceRefs\",\"valueRefs\",\"changeRefs\"].reduce(function(t,a){return void 0===t?!!Object.keys(e[a]).length:!!Object.keys(e[a]).length&&t},void 0);t&&(clearInterval(this.refCheckInterval),this.setState({allRefsAssigned:t}))}}},{key:\"shouldComponentUpdate\",value:function(e,t){var a=this;return!F.a.are_equal_shallow(t,this.state)||!F.a.are_equal_shallow(e.backedCoins,this.props.backedCoins)||!F.a.are_equal_shallow(e.balances,this.props.balances)||!F.a.are_equal_shallow(e.balanceList,this.props.balanceList)||!F.a.are_equal_shallow(e.optionalAssets,this.props.optionalAssets)||e.account!==this.props.account||e.visible!==this.props.visible||e.settings!==this.props.settings||e.hiddenAssets!==this.props.hiddenAssets||t.portfolioSort!==this.state.portfolioSort||t.portfolioSortDirection!==this.state.portfolioSortDirection||e.allMarketStats.reduce(function(e,t,n){return F.a.check_market_stats(t,a.props.allMarketStats.get(n))||e},!1)}},{key:\"showBridgeModal\",value:function(){this.setState({isBridgeModalVisible:!0,isBridgeModalVisibleBefore:!0})}},{key:\"hideBridgeModal\",value:function(){this.setState({isBridgeModalVisible:!1})}},{key:\"showWithdrawModal\",value:function(){this.setState({isWithdrawModalVisible:!0,isWithdrawModalVisibleBefore:!0})}},{key:\"hideWithdrawModal\",value:function(){this.setState({isWithdrawModalVisible:!1})}},{key:\"showBurnModal\",value:function(){this.setState({isBurnModalVisible:!0,isBurnModalVisibleBefore:!0})}},{key:\"hideBurnModal\",value:function(){this.setState({isBurnModalVisible:!1})}},{key:\"showSettleModal\",value:function(){this.setState({isSettleModalVisible:!0,isSettleModalVisibleBefore:!0})}},{key:\"hideSettleModal\",value:function(){this.setState({isSettleModalVisible:!1})}},{key:\"showDepositModal\",value:function(){this.setState({isDepositModalVisible:!0,isDepositModalVisibleBefore:!0})}},{key:\"hideDepositModal\",value:function(){this.setState({isDepositModalVisible:!1})}},{key:\"showBorrowModal\",value:function(e,t,a){this.setState({isBorrowModalVisible:!0,isBorrowModalVisibleBefore:!0,borrow:{quoteAsset:e,backingAsset:t,account:a}})}},{key:\"hideBorrowModal\",value:function(){this.setState({borrow:null,isBorrowModalVisible:!1})}},{key:\"triggerSend\",value:function(e){var t=this;this.setState({send_asset:e},function(){t.send_modal&&t.send_modal.show()})}},{key:\"_onSettleAsset\",value:function(e,t){t.preventDefault(),this.setState({settleAsset:e}),this.showSettleModal()}},{key:\"_hideAsset\",value:function(e,t){de.a.hideAsset(e,t)}},{key:\"_burnAsset\",value:function(e,t){t.preventDefault(),this.setState({reserve:e}),this.showBurnModal()}},{key:\"_showDepositModal\",value:function(e,t){var a=this;t.preventDefault(),this.setState({depositAsset:e},function(){a.showDepositModal()})}},{key:\"_showDepositWithdraw\",value:function(e,t,a,n){var s,o=this;n.preventDefault(),this.setState((qs(s={},\"bridge_modal\"===e?\"bridgeAsset\":\"deposit_modal\"===e?\"depositAsset\":\"withdrawAsset\",t),qs(s,\"fiatModal\",a),s),function(){return\"bridge_modal\"===e?(o.showBridgeModal(),!0):\"deposit_modal\"===e?(o.showDepositModal(),!0):void o.showWithdrawModal()})}},{key:\"_getSeparator\",value:function(e){return e?s.a.createElement(\"span\",null,\"Â |Â \"):null}},{key:\"toggleSortOrder\",value:function(e,t,a){de.a.changeViewSetting({portfolioSortDirection:a.order,portfolioSort:a.columnKey}),this.setState({portfolioSortDirection:a.order,portfolioSort:a.columnKey})}},{key:\"getHeader\",value:function(){var e=this.props.settings,t=this.state,a=t.shownAssets,n=t.portfolioSortDirection,o=t.portfolioSort,r=e.get(\"unit\")||this.props.core_asset.get(\"symbol\"),i=e.get(\"showAssetPercent\",!1);return[{title:s.a.createElement(A.a,{component:\"span\",content:\"account.asset\",style:{whiteSpace:\"nowrap\"}}),dataIndex:\"asset\",align:\"left\",sorter:this.sortFunctions.alphabetic,sortOrder:\"asset\"===o&&n,render:function(e){return s.a.createElement(\"span\",{style:{whiteSpace:\"nowrap\"}},e)}},{title:s.a.createElement(A.a,{content:\"account.qty\",style:{marginRight:\"5px\",whiteSpace:\"nowrap\"}}),dataIndex:\"qty\",align:\"right\",sorter:this.sortFunctions.qty,sortOrder:\"qty\"===o&&n,render:function(e){return s.a.createElement(\"span\",{style:{whiteSpace:\"nowrap\"}},e)}},{className:\"column-hide-small\",title:s.a.createElement(\"span\",{style:{marginRight:\"5px\",whiteSpace:\"nowrap\"}},s.a.createElement(A.a,{content:\"exchange.price\"}),\" (\",s.a.createElement(ma.a,{name:r,noTip:!0}),\")\"),dataIndex:\"price\",align:\"right\",sorter:this.sortFunctions.priceValue,sortOrder:\"price\"===o&&n,render:function(e){return s.a.createElement(\"span\",{style:{whiteSpace:\"nowrap\"}},e)}},{className:\"column-hide-small\",title:s.a.createElement(A.a,{content:\"account.hour_24_short\",style:{marginRight:\"5px\",whiteSpace:\"nowrap\"}}),dataIndex:\"hour24\",align:\"right\",sorter:this.sortFunctions.changeValue,sortOrder:\"hour24\"===o&&n,render:function(e){return s.a.createElement(\"span\",{style:{whiteSpace:\"nowrap\"}},e)}},{className:\"column-hide-small\",title:s.a.createElement(\"span\",{style:{marginRight:\"5px\",whiteSpace:\"nowrap\"}},s.a.createElement(ja.a,{noLink:!0,string:\"account.eq_value_header\",keys:[{type:\"asset\",value:r,arg:\"asset\"}],noTip:!0})),dataIndex:\"value\",align:\"right\",sorter:this.sortFunctions.totalValue,sortOrder:\"value\"===o&&n,render:function(e){return s.a.createElement(\"span\",{style:{whiteSpace:\"nowrap\"}},e)}},i?{title:s.a.createElement(A.a,{component:\"span\",content:\"account.percent\",style:{whiteSpace:\"nowrap\"}}),dataIndex:\"percent\",align:\"right\",render:function(e){return s.a.createElement(\"span\",{style:{whiteSpace:\"nowrap\"}},e)}}:{},{title:s.a.createElement(A.a,{content:\"header.payments\",style:{whiteSpace:\"nowrap\"}}),dataIndex:\"payments\",align:\"center\",render:function(e){return s.a.createElement(\"span\",{style:{whiteSpace:\"nowrap\"}},e)}},{title:s.a.createElement(A.a,{content:\"exchange.buy\",style:{whiteSpace:\"nowrap\"}}),dataIndex:\"buy\",align:\"center\",render:function(e){return s.a.createElement(\"span\",{style:{whiteSpace:\"nowrap\"}},e)}},{title:s.a.createElement(A.a,{content:\"modal.deposit.submit\",style:{whiteSpace:\"nowrap\"}}),dataIndex:\"deposit\",align:\"center\",render:function(e){return s.a.createElement(\"span\",{style:{whiteSpace:\"nowrap\"}},e)}},{title:s.a.createElement(A.a,{content:\"modal.withdraw.submit\",style:{whiteSpace:\"nowrap\"}}),dataIndex:\"withdraw\",align:\"center\",render:function(e){return s.a.createElement(\"span\",{style:{whiteSpace:\"nowrap\"}},e)}},{title:s.a.createElement(A.a,{content:\"account.trade\",style:{whiteSpace:\"nowrap\"}}),dataIndex:\"trade\",align:\"center\",render:function(e){return s.a.createElement(\"span\",{style:{whiteSpace:\"nowrap\"}},e)}},{title:s.a.createElement(A.a,{content:\"exchange.borrow_short\",style:{whiteSpace:\"nowrap\"}}),dataIndex:\"borrow\",align:\"center\",render:function(e){return s.a.createElement(\"span\",{style:{whiteSpace:\"nowrap\"}},e)}},{title:s.a.createElement(A.a,{content:\"account.settle\",style:{whiteSpace:\"nowrap\"}}),dataIndex:\"settle\",align:\"center\",render:function(e){return s.a.createElement(\"span\",{style:{whiteSpace:\"nowrap\"}},e)}},{className:\"column-hide-small\",title:s.a.createElement(A.a,{content:\"modal.reserve.submit\",style:{whiteSpace:\"nowrap\"}}),dataIndex:\"burn\",align:\"center\",render:function(e){return s.a.createElement(\"span\",{style:{whiteSpace:\"nowrap\"}},e)}},{className:\"column-hide-small\",title:s.a.createElement(A.a,{content:\"active\"==a?\"exchange.hide\":\"account.perm.show\",style:{whiteSpace:\"nowrap\"}}),dataIndex:\"hide\",align:\"center\",render:function(e){return s.a.createElement(\"span\",{style:{whiteSpace:\"nowrap\"}},e)}}]}},{key:\"_renderBalances\",value:function(e,t,a){var n=this,o=this.props,r=o.coreSymbol,i=o.preferredUnit,l=(o.settings,o.hiddenAssets),c=o.orders,u=function(e,t){var a=e&&e.has(\"bitasset_data_id\"),o=!!(a&&e.getIn([\"bitasset\",\"settlement_fund\"])>0);return{isBitAsset:a,borrowLink:!a||o?null:s.a.createElement(\"a\",{onClick:function(){Wa.a.hide(),n.showBorrowModal(e.get(\"id\"),e.getIn([\"bitasset\",\"options\",\"short_backing_asset\"]),t)}},s.a.createElement(I.a,{name:\"dollar\",title:\"icons.dollar.borrow\",className:\"icon-14px\"}))}},p=[];return e.forEach(function(e){var t=q.ChainStore.getObject(e);if(t){var a=t.get(\"asset_type\"),o=q.ChainStore.getObject(a);if(o){var d,h,m,f=\"\",g=o.get(\"symbol\"),b=\"1.3.0\"!==o.get(\"id\"),v=i!==r,_=N.a.parseDescription(o.getIn([\"options\",\"description\"])).market;-1===(f=o.get(\"symbol\")).indexOf(\"OPEN.\")||_||(_=\"USD\");var y=_||i;b&&y===f&&(y=r),d=b?s.a.createElement(w.a,{to:\"/market/\"+o.get(\"symbol\")+\"_\"+y},s.a.createElement(I.a,{name:\"trade\",title:\"icons.trade.trade\",className:\"icon-14px\"})):v?s.a.createElement(w.a,{to:\"/market/\"+o.get(\"symbol\")+\"_\"+i},s.a.createElement(I.a,{name:\"trade\",title:\"icons.trade.trade\",className:\"icon-14px\"})):\"-\",m=s.a.createElement(\"a\",{onClick:n.triggerSend.bind(n,o.get(\"id\"))},s.a.createElement(I.a,{name:\"transfer\",title:\"icons.transfer\",className:\"icon-14px\"}));var E=u(o,n.props.account),k=E.isBitAsset,A=E.borrowLink;h=s.a.createElement(\"a\",{onClick:n._onSettleAsset.bind(n,o.get(\"id\"))},s.a.createElement(I.a,{name:\"settle\",title:\"icons.settle\",className:\"icon-14px\"}));var C=!l.includes(a),x=!!t.get(\"balance\"),O=!!c[a],S=Object(As.b)(o.get(\"symbol\"),n.props.backedCoins),P=S&&S.depositAllowed||\"BTS\"==o.get(\"symbol\"),j=S&&S.withdrawalAllowed&&x&&0!=t.get(\"balance\"),M=!!n.props.bridgeCoins.get(f),T=t.get(\"balance\");n.qtyRefs[o.get(\"symbol\")]=F.a.get_asset_amount(T,o);var R=o&&o.getIn([\"bitasset\",\"options\"])?o.getIn([\"bitasset\",\"options\"]).toJS():null,B=R&&R.short_backing_asset?q.ChainStore.getAsset(R.short_backing_asset):null,D=F.a.replaceName(o).isBitAsset,L=F.a.replaceName(B).isBitAsset,V=void 0;V=k&&o.get(\"bitasset\").get(\"settlement_fund\")>0?\"tooltip.global_settle\":\"tooltip.settle\";var U=q.ChainStore.getAsset(i);n.valueRefs[o.get(\"symbol\")]=x&&U?Mn.a.convertValue(T,U,o,n.props.allMarketStats,n.props.coreAsset,!0):null,n.priceRefs[o.get(\"symbol\")]=U?Mn.a.getFinalPrice(n.props.coreAsset,o,U,n.props.allMarketStats,!0):null;var z=o.get(\"symbol\")+\"_\"+i,J=n.props.allMarketStats.get(z);n.changeRefs[o.get(\"symbol\")]=J&&J.change?J.change:0,p.push({key:o.get(\"symbol\"),asset:s.a.createElement(ue.a,{asset:o.get(\"id\")}),qty:x||O?s.a.createElement(is.a,{balance:e,hide_asset:!0}):null,price:s.a.createElement(ks,{fromAsset:o.get(\"id\"),pulsate:{reverse:!0,fill:\"forwards\"},hide_symbols:!0}),hour24:s.a.createElement(fs,{base:o.get(\"id\"),quote:i,marketId:z,hide_symbols:!0}),value:x||O?s.a.createElement(ea.a,{balance:e,toAsset:i,hide_asset:!0}):null,percent:x?s.a.createElement(is.a,{balance:e,asPercentage:!0}):null,payments:m,buy:n._renderBuy(o.get(\"symbol\"),M,g,\"-\",t.get(\"balance\")),deposit:n._renderGatewayAction(\"deposit\",P,g,\"-\"),withdraw:n._renderGatewayAction(\"withdraw\",j,g,\"-\"),trade:d,borrow:k&&A?s.a.createElement(Y.Tooltip,{title:W.a.translate(\"tooltip.borrow\",{asset:D?\"bit\"+f:f})},A):k&&!A?s.a.createElement(Y.Tooltip,{title:W.a.translate(\"tooltip.borrow_disabled\",{asset:D?\"bit\"+f:f})},s.a.createElement(Y.Icon,{type:\"question-circle\"})):\"-\",settle:k&&B?s.a.createElement(Y.Tooltip,{placement:\"bottom\",title:W.a.translate(V,{asset:D?\"bit\"+f:f,backingAsset:L?\"bit\"+B.get(\"symbol\"):B.get(\"symbol\"),settleDelay:R.force_settlement_delay_sec/3600})},s.a.createElement(\"div\",{className:\"inline-block\"},h)):\"-\",burn:k?null:s.a.createElement(\"a\",{style:{marginRight:0},onClick:n._burnAsset.bind(n,o.get(\"id\"))},s.a.createElement(I.a,{name:\"fire\",className:\"icon-14px\"})),hide:s.a.createElement(Y.Tooltip,{placement:\"bottom\",title:W.a.translate(\"tooltip.\"+(C?\"hide_asset\":\"show_asset\"))},s.a.createElement(\"a\",{style:{marginRight:0},className:C?\"order-cancel\":\"action-plus\",onClick:n._hideAsset.bind(n,a,C)},s.a.createElement(I.a,{name:C?\"cross-circle\":\"plus-circle\",title:C?\"icons.cross_circle.hide_asset\":\"icons.plus_circle.show_asset\",className:\"icon-14px\"})))})}}}),t&&t.filter(function(e){var t=!1;n.props.backedCoins.get(\"OPEN\",[]).forEach(function(a){a&&a.symbol===e&&(t=!0)}),n.props.bridgeCoins.get(e)&&(t=!0);var a=!0;return p.forEach(function(t){t.key===e&&(a=!1)}),a&&t}).forEach(function(e){var t=q.ChainStore.getAsset(e);if(t&&n.props.isMyAccount){var o=!l.includes(t.get(\"id\")),i=t.get(\"symbol\").split(\".\"),c=!!n.props.backedCoins.get(\"OPEN\",[]).find(function(e){return e.backingCoinType===i[1]})||!!n.props.backedCoins.get(\"RUDEX\",[]).find(function(e){return e.backingCoin===i[1]})||\"BTS\"==t.get(\"symbol\"),d=!!n.props.bridgeCoins.get(t.get(\"symbol\")),h=\"1.3.0\"!==t.get(\"id\"),m=N.a.parseDescription(t.getIn([\"options\",\"description\"])).market;-1===t.get(\"symbol\").indexOf(\"OPEN.\")||m||(m=\"USD\");var f=m||r,g=h?s.a.createElement(w.a,{to:\"/market/\"+t.get(\"symbol\")+\"_\"+f},s.a.createElement(I.a,{name:\"trade\",title:\"icons.trade.trade\",className:\"icon-14px\"})):\"-\",b=u(t,n.props.account),v=b.isBitAsset,_=b.borrowLink;(o&&a||!o&&!a)&&p.push({key:t.get(\"symbol\"),asset:s.a.createElement(ue.a,{asset:t.get(\"id\")}),qty:\"-\",price:\"-\",hour24:\"-\",value:\"-\",percent:\"-\",payments:\"-\",buy:d&&n.props.isMyAccount?s.a.createElement(\"span\",null,s.a.createElement(\"a\",{onClick:n._showDepositWithdraw.bind(n,\"bridge_modal\",e,!1)},s.a.createElement(I.a,{name:\"dollar\",title:\"icons.dollar.buy\",className:\"icon-14px\"}))):\"-\",deposit:c&&n.props.isMyAccount?s.a.createElement(\"span\",null,s.a.createElement(I.a,{style:{cursor:\"pointer\"},name:\"deposit\",title:\"icons.deposit.deposit\",className:\"icon-14x\",onClick:n._showDepositModal.bind(n,t.get(\"symbol\"))})):\"-\",withdraw:\"-\",trade:g,borrow:v?s.a.createElement(Y.Tooltip,{placement:\"bottom\",title:W.a.translate(\"tooltip.borrow\",{asset:t.get(\"symbol\")})},s.a.createElement(\"div\",{className:\"inline-block\"},_)):\"-\",settle:\"-\",burn:\"-\",hide:s.a.createElement(Y.Tooltip,{placement:\"bottom\",title:W.a.translate(\"tooltip.\"+(o?\"hide_asset\":\"show_asset\"))},s.a.createElement(\"a\",{style:{marginRight:0},className:o?\"order-cancel\":\"action-plus\",onClick:n._hideAsset.bind(n,t.get(\"id\"),o)},s.a.createElement(I.a,{name:o?\"cross-circle\":\"plus-circle\",title:o?\"icons.cross_circle.hide_asset\":\"icons.plus_circle.show_asset\",className:\"icon-14px\"})))})}}),p}},{key:\"_renderSendModal\",value:function(){var e=this;return s.a.createElement(js.a,{id:\"send_modal_portfolio\",refCallback:function(t){t&&(e.send_modal=t)},from_name:this.props.account.get(\"name\"),asset_id:this.state.send_asset||\"1.3.0\"})}},{key:\"_renderBorrowModal\",value:function(){return this.state.borrow&&this.state.borrow.quoteAsset&&this.state.borrow.backingAsset&&this.state.borrow.account&&this.state.isBorrowModalVisibleBefore?s.a.createElement(Aa.a,{visible:this.state.isBorrowModalVisible,showModal:this.showBorrowModal,hideModal:this.hideBorrowModal,account:this.state.borrow&&this.state.borrow.account,quote_asset:this.state.borrow&&this.state.borrow.quoteAsset,backing_asset:this.state.borrow&&this.state.borrow.backingAsset}):null}},{key:\"_renderSettleModal\",value:function(){return s.a.createElement(Ms.a,{visible:this.state.isSettleModalVisible,hideModal:this.hideSettleModal,showModal:this.showSettleModal,asset:this.state.settleAsset,account:this.props.account})}},{key:\"render\",value:function(){var e=this.props.bridgeCoins.get(this.state.bridgeAsset)||null;return s.a.createElement(\"div\",null,s.a.createElement(In.a,{className:\"table dashboard-table table-hover\",rows:this._renderBalances(this.props.balanceList,this.props.optionalAssets,this.props.visible),header:this.getHeader(),pageSize:20,label:\"utility.total_x_assets\",extraRow:this.props.extraRow,leftPadding:\"1.5rem\",toggleSortOrder:this.toggleSortOrder},this._renderSendModal(),(this.state.isSettleModalVisible||this.state.isSettleModalVisibleBefore)&&this._renderSettleModal(),this._renderBorrowModal(),(this.state.isWithdrawModalVisible||this.state.isWithdrawModalVisibleBefore)&&s.a.createElement(Rs.a,{hideModal:this.hideWithdrawModal,visible:this.state.isWithdrawModalVisible,backedCoins:this.props.backedCoins,initialSymbol:this.state.withdrawAsset}),(this.state.isDepositModalVisible||this.state.isDepositModalVisibleBefore)&&s.a.createElement(Is.a,{visible:this.state.isDepositModalVisible,showModal:this.showDepositModal,hideModal:this.hideDepositModal,asset:this.state.depositAsset,account:this.props.account.get(\"name\"),backedCoins:this.props.backedCoins}),(this.state.isBridgeModalVisible||this.state.isBridgeModalVisibleBefore)&&s.a.createElement(Ts.a,{visible:this.state.isBridgeModalVisible,showModal:this.showBridgeModal,hideModal:this.hideBridgeModal,action:\"deposit\",account:this.props.account.get(\"name\"),sender:this.props.account.get(\"id\"),asset:this.state.bridgeAsset,balances:this.props.balances,bridges:e,isDown:this.props.gatewayDown.get(\"TRADE\")}),(this.state.isBurnModalVisible||this.state.isBurnModalVisibleBefore)&&s.a.createElement(Vs,{visible:this.state.isBurnModalVisible,hideModal:this.hideBurnModal,asset:this.state.reserve,account:this.props.account,onClose:function(){_e.a.publish(\"reserve_asset\",\"close\")}})))}}]),t}();Us=Object(p.a)(Us,{listenTo:function(){return[i.a,Cs.a,Hn.a]},getProps:function(){return{settings:i.a.getState().settings,viewSettings:i.a.getState().viewSettings,backedCoins:Cs.a.getState().backedCoins,bridgeCoins:Cs.a.getState().bridgeCoins,gatewayDown:Cs.a.getState().down,allMarketStats:Hn.a.getState().allMarketStats}}});var Ws=Us=rs()(Us,50,{leading:!1}),zs=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var n in a)Object.prototype.hasOwnProperty.call(a,n)&&(e[n]=a[n])}return e},Js=function(){function e(e,t){for(var a=0;a<t.length;a++){var n=t[a];n.enumerable=n.enumerable||!1,n.configurable=!0,\"value\"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,a,n){return a&&e(t.prototype,a),n&&e(t,n),t}}();function Ks(e,t){if(!(e instanceof t))throw new TypeError(\"Cannot call a class as a function\")}function Gs(e,t){if(!e)throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\");return!t||\"object\"!=typeof t&&\"function\"!=typeof t?e:t}function Zs(e,t){if(\"function\"!=typeof t&&null!==t)throw new TypeError(\"Super expression must either be null or a function, not \"+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var Hs=function(e){function t(e){Ks(this,t);var a=Gs(this,(t.__proto__||Object.getPrototypeOf(t)).call(this));return a.state={shownAssets:e.viewSettings.get(\"shownAssets\",\"active\"),alwaysShowAssets:[\"BTS\"],hideFishingProposals:!0},a._handleFilterInput=a._handleFilterInput.bind(a),a}return Zs(t,s.a.Component),Js(t,[{key:\"_handleFilterInput\",value:function(e){e.preventDefault(),this.setState({filterValue:e.target.value})}},{key:\"componentWillMount\",value:function(){this._checkMarginStatus()}},{key:\"_checkMarginStatus\",value:function(){var e=this;(function(e){if(!e||e&&!e.get(\"call_orders\",[]).size)return Promise.resolve(null);var t=e.get(\"name\")+JSON.stringify(e.get(\"call_orders\"));return Vn[t]?Vn[t].result?Promise.resolve(Vn[t].result):new Promise(function(e,a){Vn[t].queue.push({res:e,rej:a})}):new Promise(function(a,n){Vn[t]={queue:[{res:a,rej:n}],result:null},Object(q.FetchChain)(\"getObject\",e.get(\"call_orders\").toArray()).then(function(e){var a=[];e.forEach(function(e){var t=e.getIn([\"call_price\",\"base\",\"asset_id\"]),n=e.getIn([\"call_price\",\"quote\",\"asset_id\"]);-1===a.indexOf(t)&&a.push(t),-1===a.indexOf(n)&&a.push(n)}),Object(q.FetchChain)(\"getAsset\",a,6e3).then(function(a){var n={};a.forEach(function(e){n[e.get(\"id\")]=e.toJS()});var s={};e.forEach(function(e){var t=n[e.getIn([\"call_price\",\"quote\",\"asset_id\"])],a=n[e.getIn([\"call_price\",\"base\",\"asset_id\"])],o=N.a.extractRawFeedPrice(t);if(o.base.asset_id===o.quote.asset_id)s[t.id]={ratio:null};else{var r=new jn.a({amount:e.get(\"collateral\"),asset_id:a.id,precision:a.precision}),i=new jn.a({amount:e.get(\"debt\"),asset_id:t.id,precision:t.precision}),l=t.bitasset.current_feed.maintenance_collateral_ratio/1e3,c=new jn.d({priceObject:N.a.extractRawFeedPrice(t),market_base:N.a.extractRawFeedPrice(t).quote.asset_id,sqr:t.bitasset.current_feed.maximum_short_squeeze_ratio,assets:n}),u={ratio:r.getAmount({real:!0})/(i.getAmount({real:!0})/c.toReal())};if(isNaN(u.ratio))return null;u.ratio<l?u.statusClass=\"danger\":u.ratio<l+.5?u.statusClass=\"warning\":u.statusClass=null,s[t.id]=u}}),Vn[t].queue.forEach(function(e){e.res(s)}),Vn[t]={result:s},setTimeout(function(){delete Vn[t]},Fn)})}).catch(function(){Vn[t].queue.forEach(function(e){e.rej()})})})})((arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.props).account).then(function(t){var a=null;for(var n in t)a=t[n].statusClass||a;e.setState({globalMarginStatus:a})})}},{key:\"componentWillReceiveProps\",value:function(e){e.account!==this.props.account&&this._checkMarginStatus(e)}},{key:\"shouldComponentUpdate\",value:function(e,t){return!F.a.are_equal_shallow(e.balances,this.props.balances)||e.account!==this.props.account||e.isMyAccount!==this.props.isMyAccount||e.settings!==this.props.settings||e.hiddenAssets!==this.props.hiddenAssets||!F.a.are_equal_shallow(t,this.state)||this.state.filterValue!==t.filterValue}},{key:\"_changeShownAssets\",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:\"active\";this.setState({shownAssets:e}),de.a.changeViewSetting({shownAssets:e})}},{key:\"_toggleHideProposal\",value:function(){this.setState({hideFishingProposals:!this.state.hideFishingProposals})}},{key:\"render\",value:function(){var e=this,t=this.props,a=t.account,n=t.hiddenAssets,o=t.settings,r=t.orders,i=this.state.shownAssets;if(!a)return null;var l=o.get(\"unit\")||this.props.core_asset.get(\"symbol\"),c=[],u={},p={};a.toJS&&a.has(\"call_orders\")&&(c=a.get(\"call_orders\").toJS());var d,h,f=a.get(\"balances\"),g=m.a.List(),b=m.a.List();c.forEach(function(e){var t=q.ChainStore.getObject(e);if(t){var a=t.getIn([\"call_price\",\"base\",\"asset_id\"]);u[a]?u[a]+=parseInt(t.get(\"collateral\"),10):u[a]=parseInt(t.get(\"collateral\"),10);var n=t.getIn([\"call_price\",\"quote\",\"asset_id\"]);p[n]?p[n]+=parseInt(t.get(\"debt\"),10):p[n]=parseInt(t.get(\"debt\"),10)}}),f&&(f=f.filter(function(e,t){var a=q.ChainStore.getObject(e);return!(a&&!a.get(\"balance\")&&!r[t])})).forEach(function(t,a){var s=q.ChainStore.getAsset(a),o=\"\",r=\"\";e.state.filterValue&&(r=e.state.filterValue?String(e.state.filterValue).toLowerCase():\"\",o=s.get(\"symbol\").toLowerCase(),F.a.replaceName(s).isBitAsset&&(o=\"bit\"+o));n.includes(a)&&o.includes(r)?b=b.push(t):o.includes(r)&&(g=g.push(t))});var v=s.a.createElement(ka.a,{noTip:!0,balances:b,hide_asset:!0}),_=s.a.createElement(ka.a,{noTip:!0,balances:g,hide_asset:!0}),y=s.a.createElement(ka.a,{noTip:!0,balances:m.a.List(),openOrders:r,hide_asset:!0}),E=s.a.createElement(ka.a,{noTip:!0,balances:m.a.List(),debt:p,collateral:u,hide_asset:!0}),w=s.a.createElement(ka.a,{noTip:!0,balances:m.a.List(),debt:p,hide_asset:!0}),k=s.a.createElement(ka.a,{noTip:!0,balances:m.a.List(),collateral:u,hide_asset:!0}),C=s.a.createElement(ja.a,{noLink:!0,string:\"account.total\",keys:[{type:\"asset\",value:l,arg:\"asset\"}]}),x=s.a.createElement(\"span\",{key:\"portfolio\",className:\"total-value\"},C,\": \",_),O=s.a.createElement(\"span\",{key:\"portfolio\",className:\"total-value\"},C,\": \",v);d=s.a.createElement(Ws,{balanceList:g,optionalAssets:this.state.filterValue?null:this.state.alwaysShowAssets,visible:!0,preferredUnit:l,coreAsset:this.props.core_asset,coreSymbol:this.props.core_asset.get(\"symbol\"),hiddenAssets:n,orders:r,account:this.props.account,isMyAccount:this.props.isMyAccount,balances:this.props.balances,extraRow:x,viewSettings:this.props.viewSettings}),h=s.a.createElement(Ws,{balanceList:b,optionalAssets:this.state.filterValue?null:this.state.alwaysShowAsset,visible:!1,preferredUnit:l,coreSymbol:this.props.core_asset.get(\"symbol\"),settings:o,hiddenAssets:n,orders:r,account:this.props.account,isMyAccount:this.props.isMyAccount,balances:this.props.balances,extraRow:O,viewSettings:this.props.viewSettings});return s.a.createElement(\"div\",{className:\"grid-content app-tables no-padding\",ref:\"appTables\"},s.a.createElement(\"div\",{className:\"content-block small-12\"},s.a.createElement(\"div\",{className:\"tabs-container generic-bordered-box\"},s.a.createElement(M.b,{defaultActiveTab:0,segmented:!1,setting:\"overviewTab\",className:\"account-tabs\",tabsClass:\"account-overview no-padding bordered-header content-block\"},s.a.createElement(M.a,{title:\"account.portfolio\",subText:_},s.a.createElement(\"div\",{className:\"header-selector\"},s.a.createElement(\"div\",{className:\"filter inline-block\"},s.a.createElement(Y.Input,{type:\"text\",placeholder:\"Filter...\",onChange:this._handleFilterInput,addonAfter:s.a.createElement(Y.Icon,{type:\"search\"})})),s.a.createElement(\"div\",{className:\"selector inline-block\",style:{position:\"relative\",top:\"6px\"}},s.a.createElement(\"div\",{className:L()(\"inline-block\",{inactive:\"active\"!=i}),onClick:\"active\"!=i?this._changeShownAssets.bind(this,\"active\"):function(){}},s.a.createElement(A.a,{content:\"account.hide_hidden\"})),b.size?s.a.createElement(\"div\",{className:L()(\"inline-block\",{inactive:\"hidden\"!=i}),onClick:\"hidden\"!=i?this._changeShownAssets.bind(this,\"hidden\"):function(){}},s.a.createElement(A.a,{content:\"account.show_hidden\"})):null,s.a.createElement(\"div\",{className:L()(\"inline-block\",{inactive:\"visual\"!=i}),onClick:\"visual\"!=i?this._changeShownAssets.bind(this,\"visual\"):function(){}},s.a.createElement(A.a,{content:\"account.show_visual\"})))),\"visual\"!=i?\"hidden\"===i&&b.size?h:d:s.a.createElement(ss,{balanceObjects:g})),s.a.createElement(M.a,{title:\"account.open_orders\",subText:y},s.a.createElement(Ln,this.props,s.a.createElement(\"span\",{className:\"total-value\",style:{textAlign:\"left\"}},C,y))),s.a.createElement(M.a,{title:\"account.collaterals\",subText:s.a.createElement(\"span\",{className:this.state.globalMarginStatus},E)},s.a.createElement(\"div\",{className:\"content-block\"},s.a.createElement(\"div\",{className:\"generic-bordered-box\"},s.a.createElement(Da,{preferredUnit:l,className:\"dashboard-table\",callOrders:c,account:a},s.a.createElement(\"tr\",{className:\"total-value\"},s.a.createElement(\"td\",null,C),s.a.createElement(\"td\",null),s.a.createElement(\"td\",null,w),s.a.createElement(\"td\",{className:\"column-hide-medium\"},k),s.a.createElement(\"td\",null),s.a.createElement(\"td\",null,E),s.a.createElement(\"td\",{className:\"column-hide-small\"}),s.a.createElement(\"td\",{className:\"column-hide-small\"}),s.a.createElement(\"td\",{colSpan:\"4\"})))))),s.a.createElement(M.a,{title:\"account.activity\",subText:\"Â  \"},s.a.createElement(Pt.a,{accountsList:m.a.fromJS([a.get(\"id\")]),compactView:!1,showMore:!0,fullHeight:!0,limit:100,showFilters:!0,dashboard:!0})),a.get(\"proposals\")&&a.get(\"proposals\").size?s.a.createElement(M.a,{title:\"explorer.proposals.title\",subText:String(a.get(\"proposals\")?a.get(\"proposals\").size:0)},s.a.createElement(\"div\",{onClick:this._toggleHideProposal.bind(this),style:{cursor:\"pointer\"}},s.a.createElement(Y.Tooltip,{title:W.a.translate(\"tooltip.propose_unhide\"),placement:\"bottom\"},s.a.createElement(Y.Switch,{style:{margin:16},checked:this.state.hideFishingProposals,onChange:this._toggleHideProposal.bind(this)}),s.a.createElement(A.a,{content:\"account.deactivate_suspicious_proposals\"}))),s.a.createElement(Pn,{className:\"dashboard-table\",account:a,hideFishingProposals:this.state.hideFishingProposals})):null))))}}]),t}();Hs=Object(j.a)(Hs,{propNames:[\"core_asset\"]});var Qs=function(e){function t(){return Ks(this,t),Gs(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return Zs(t,s.a.Component),Js(t,[{key:\"render\",value:function(){return s.a.createElement(qn.a,zs({},this.props,{wrap:Hs}))}}]),t}(),Ys=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var n in a)Object.prototype.hasOwnProperty.call(a,n)&&(e[n]=a[n])}return e},Xs=function(){function e(e,t){for(var a=0;a<t.length;a++){var n=t[a];n.enumerable=n.enumerable||!1,n.configurable=!0,\"value\"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,a,n){return a&&e(t.prototype,a),n&&e(t,n),t}}();function $s(e,t){if(!(e instanceof t))throw new TypeError(\"Cannot call a class as a function\")}function eo(e,t){if(!e)throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\");return!t||\"object\"!=typeof t&&\"function\"!=typeof t?e:t}function to(e,t){if(\"function\"!=typeof t&&null!==t)throw new TypeError(\"Super expression must either be null or a function, not \"+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var ao=function(e){function t(){return $s(this,t),eo(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return to(t,s.a.Component),Xs(t,[{key:\"componentDidMount\",value:function(){this.props.account&&(o.a.setCurrentAccount.defer(this.props.account.get(\"name\")),d.a.getPossibleFees(this.props.account,\"transfer\"))}},{key:\"componentWillReceiveProps\",value:function(e){if(e.account){var t=e.account.get(\"name\"),a=this.props.account&&this.props.account.get(\"name\");this.props.account&&t===a||(o.a.setCurrentAccount.defer(t),d.a.getPossibleFees(e.account,\"transfer\"))}}},{key:\"render\",value:function(){var e=this.props,t=e.myActiveAccounts,a=e.searchAccounts,n=e.settings,o=e.wallet_locked,i=e.account,l=e.hiddenAssets;if(!i)return s.a.createElement(f.a,null);var c=this.props.account.get(\"name\"),u={account_name:c,myActiveAccounts:t,searchAccounts:a,settings:n,wallet_locked:o,account:i,isMyAccount:r.a.isMyAccount(i),hiddenAssets:l,contained:!0,balances:i.get(\"balances\",Object(h.List)()).toList(),orders:i.get(\"orders\",Object(h.List)()).toList(),viewSettings:this.props.viewSettings,proxy:i.getIn([\"options\",\"voting_account\"]),history:this.props.history};return s.a.createElement(\"div\",{className:\"grid-block page-layout\"},s.a.createElement(\"div\",{className:\"grid-block no-padding\"},s.a.createElement(g.a,null,s.a.createElement(b.a,{path:\"/account/\"+c,exact:!0,render:function(){return s.a.createElement(Qs,u)}}),s.a.createElement(v.a,{from:\"/account/\"+c+\"/overview\",to:\"/account/\"+c}),s.a.createElement(b.a,{path:\"/account/\"+c+\"/assets\",exact:!0,render:function(){return s.a.createElement(B,u)}}),s.a.createElement(b.a,{path:\"/account/\"+c+\"/create-asset\",exact:!0,render:function(){return s.a.createElement(se,u)}}),s.a.createElement(b.a,{path:\"/account/\"+c+\"/update-asset/:asset\",exact:!0,render:function(){return s.a.createElement(Me,u)}}),s.a.createElement(b.a,{path:\"/account/\"+c+\"/member-stats\",exact:!0,render:function(){return s.a.createElement(Je,u)}}),s.a.createElement(b.a,{path:\"/account/\"+c+\"/vesting\",exact:!0,render:function(){return s.a.createElement(et,u)}}),s.a.createElement(b.a,{path:\"/account/\"+c+\"/permissions\",exact:!0,render:function(){return s.a.createElement(jt,u)}}),s.a.createElement(b.a,{path:\"/account/\"+c+\"/voting\",exact:!0,render:function(){return s.a.createElement(wa,u)}}),s.a.createElement(b.a,{path:\"/account/\"+c+\"/whitelist\",exact:!0,render:function(){return s.a.createElement($t,u)}}),s.a.createElement(b.a,{path:\"/account/\"+c+\"/signedmessages\",exact:!0,render:function(){return s.a.createElement(Wt,u)}}))))}}]),t}();ao.propTypes={account:c.a.ChainAccount.isRequired},ao=Object(u.a)(ao,{show_loader:!0});var no=function(e){function t(){return $s(this,t),eo(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return to(t,s.a.Component),Xs(t,[{key:\"render\",value:function(){var e=this.props.match.params.account_name;return s.a.createElement(ao,Ys({},this.props,{account:e}))}}]),t}();t.default=Object(p.a)(no,{listenTo:function(){return[r.a,i.a,l.a]},getProps:function(){return{myActiveAccounts:r.a.getState().myActiveAccounts,searchAccounts:r.a.getState().searchAccounts,settings:i.a.getState().settings,hiddenAssets:i.a.getState().hiddenAssets,wallet_locked:l.a.getState().locked,viewSettings:i.a.getState().viewSettings}}})}}]);"],"mappings":"AAAA","sourceRoot":""}